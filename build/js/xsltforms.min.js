"use strict";"undefined"==typeof Fleur&&(console.info("Fleur 1.0 (15), XPath 1.0 Parser, copyright (C) 2022 agenceXML - Alain Couthures, contact at fleur@agencexml.com"),function(e){e.Node=function(){},e.Node.ELEMENT_NODE=1,e.Node.ATTRIBUTE_NODE=2,e.Node.TEXT_NODE=3,e.Node.CDATA_NODE=4,e.Node.ENTITY_REFERENCE_NODE=5,e.Node.ENTITY_NODE=6,e.Node.PROCESSING_INSTRUCTION_NODE=7,e.Node.COMMENT_NODE=8,e.Node.DOCUMENT_NODE=9,e.Node.DOCUMENT_TYPE_NODE=10,e.Node.DOCUMENT_FRAGMENT_NODE=11,e.Node.NOTATION_NODE=12,e.Node.NAMESPACE_NODE=129,e.Node.ATOMIC_NODE=e.Node.TEXT_NODE,e.Node.SEQUENCE_NODE=130,e.Node.ARRAY_NODE=131,e.Node.MAP_NODE=132,e.Node.ENTRY_NODE=133,e.minimal=!0,e.DocumentType=function(){},e.DocumentType.resolveEntities=function(e,t){for(var r,s,o=0,n=null;-1!==(r=t.indexOf("&",o));){switch(s=t.substring(r+1,t.indexOf(";",r+1))){case"amp":n="&";break;case"lt":n="<";break;case"gt":n=">";break;case"apos":n="'";break;case"quot":n='"';break;default:"#"===s.charAt(0)?n=String.fromCharCode(parseInt("x"===s.charAt(1).toLowerCase()?"0"+s.substr(1).toLowerCase():s.substr(1),"x"===s.charAt(1).toLowerCase()?16:10)):e&&(n=e.getEntity(s))}if(!n)break;t=t.substr(0,r)+n+t.substr(r+s.length+2),o=r+n.length,n=null}return t.split("\r\n").join("\n")},e.Serializer=function(){},e.Serializer.escapeXML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.Serializer.prototype._serializeXMLToString=function(t,r,s,o){var n,l,a;switch(t.nodeType){case e.Node.ELEMENT_NODE:if(n=(r?s+"<":"<")+t.nodeName,r){var i=[];for(l=0,a=t.attributes.length;l<a;l++)i.push(t.attributes[l].nodeName);for(i.sort(),l=0,a=i.length;l<a;l++)n+=" "+i[l]+'="'+e.Serializer.escapeXML(t.getAttribute(i[l])).replace('"',"&quot;")+'"'}else for(l=0,a=t.attributes.length;l<a;l++)n+=" "+t.attributes[l].nodeName+'="'+e.Serializer.escapeXML(t.attributes[l].nodeValue).replace('"',"&quot;")+'"';if(0===t.childNodes.length)return n+(r?"/>\n":"/>");if(n+=r&&(t.childNodes[0].nodeType!==e.Node.TEXT_NODE||t.childNodes[0].data.match(/^[ \t\n\r]*$/))?">\n":">",-1!==o.indexOf(" "+t.nodeName+" "))for(l=0,a=t.childNodes.length;l<a;l++)t.childNodes[l].nodeType===e.Node.TEXT_NODE?(n+="<![CDATA[",n+=t.childNodes[l].data,n+="]]>"):n+=this._serializeXMLToString(t.childNodes[l],r,s+"  ",o);else for(l=0,a=t.childNodes.length;l<a;l++)n+=this._serializeXMLToString(t.childNodes[l],r,s+"  ",o);return n+(r&&(t.childNodes[0].nodeType!==e.Node.TEXT_NODE||t.childNodes[0].data.match(/^[ \t\n\r]*$/))?s+"</":"</")+t.nodeName+(r?">\n":">");case e.Node.TEXT_NODE:return r&&t.data.match(/^[ \t\n\r]*$/)&&1!==t.parentNode.childNodes.length?"":e.Serializer.escapeXML(t.data);case e.Node.CDATA_NODE:return(r?s+"<![CDATA[":"<![CDATA[")+t.data+(r?"]]>\n":"]]>");case e.Node.PROCESSING_INSTRUCTION_NODE:return(r?s+"<?":"<?")+t.nodeName+" "+t.nodeValue+(r?"?>\n":"?>");case e.Node.COMMENT_NODE:return(r?s+"\x3c!--":"\x3c!--")+t.data+(r?"--\x3e\n":"--\x3e");case e.Node.DOCUMENT_NODE:for(n='<?xml version="1.0" encoding="UTF-8"?>\r\n',l=0,a=t.childNodes.length;l<a;l++)n+=this._serializeXMLToString(t.childNodes[l],r,s,o);return n}},e.Serializer.prototype.serializeToString=function(e,t,r,s){for(var o,n,l=t.split(";"),a={},i=/^\s*(\S*)\s*=\s*(\S*)\s*$/,m=1,u=l.length;m<u;)a[(o=i.exec(l[m]))[1]]=o[2],m++;switch(l[0].replace(/^\s+|\s+$/gm,"")){case"text/xml":case"application/xml":return n=this._serializeXMLToString(e,r,""," "+s+" "),r&&"\n"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),n}},e.XMLSerializer=function(){},e.XMLSerializer.prototype=new e.Serializer,e.XMLSerializer.prototype.serializeToString=function(t,r,s){return e.Serializer.prototype.serializeToString.call(this,t,"application/xml",r,s)},e.Xlength=0,e.XQueryXNames=[["http://www.w3.org/2005/XQueryX","http://www.w3.org/2000/xmlns/","http://www.w3.org/2001/XMLSchema-instance","http://www.w3.org/2007/xquery-update-10"],[]],e.XQueryX={},e.XQueryXNames[1][e.XQueryX.NCName=e.Xlength++]=[1,0,"xqx:NCName"],e.XQueryXNames[1][e.XQueryX.QName=e.Xlength++]=[1,0,"xqx:QName"],e.XQueryXNames[1][e.XQueryX.URIExpr=e.Xlength++]=[1,0,"xqx:URIExpr"],e.XQueryXNames[1][e.XQueryX.Wildcard=e.Xlength++]=[1,0,"xqx:Wildcard"],e.XQueryXNames[1][e.XQueryX.addOp=e.Xlength++]=[1,0,"xqx:addOp"],e.XQueryXNames[1][e.XQueryX.allowingEmpty=e.Xlength++]=[1,0,"xqx:allowingEmpty"],e.XQueryXNames[1][e.XQueryX.andOp=e.Xlength++]=[1,0,"xqx:andOp"],e.XQueryXNames[1][e.XQueryX.annotation=e.Xlength++]=[1,0,"xqx:annotation"],e.XQueryXNames[1][e.XQueryX.annotationName=e.Xlength++]=[1,0,"xqx:annotationName"],e.XQueryXNames[1][e.XQueryX.anyElementTest=e.Xlength++]=[1,0,"xqx:anyElementTest"],e.XQueryXNames[1][e.XQueryX.anyFunctionTest=e.Xlength++]=[1,0,"xqx:anyFunctionTest"],e.XQueryXNames[1][e.XQueryX.anyItemType=e.Xlength++]=[1,0,"xqx:anyItemType"],e.XQueryXNames[1][e.XQueryX.anyKindTest=e.Xlength++]=[1,0,"xqx:anyKindTest"],e.XQueryXNames[1][e.XQueryX.arrayConstructor=e.Xlength++]=[1,0,"xqx:arrayConstructor"],e.XQueryXNames[1][e.XQueryX.argExpr=e.Xlength++]=[1,0,"xqx:argExpr"],e.XQueryXNames[1][e.XQueryX.argumentPlaceholder=e.Xlength++]=[1,0,"xqx:argumentPlaceholder"],e.XQueryXNames[1][e.XQueryX.arguments=e.Xlength++]=[1,0,"xqx:arguments"],e.XQueryXNames[1][e.XQueryX.arithmeticOp=e.Xlength++]=[1,0,"xqx:arithmeticOp"],e.XQueryXNames[1][e.XQueryX.arrayTest=e.Xlength++]=[1,0,"xqx:arrayTest"],e.XQueryXNames[1][e.XQueryX.atomicType=e.Xlength++]=[1,0,"xqx:atomicType"],e.XQueryXNames[1][e.XQueryX.attributeConstructor=e.Xlength++]=[1,0,"xqx:attributeConstructor"],e.XQueryXNames[1][e.XQueryX.attributeList=e.Xlength++]=[1,0,"xqx:attributeList"],e.XQueryXNames[1][e.XQueryX.attributeName=e.Xlength++]=[1,0,"xqx:attributeName"],e.XQueryXNames[1][e.XQueryX.attributeTest=e.Xlength++]=[1,0,"xqx:attributeTest"],e.XQueryXNames[1][e.XQueryX.attributeValue=e.Xlength++]=[1,0,"xqx:attributeValue"],e.XQueryXNames[1][e.XQueryX.attributeValueExpr=e.Xlength++]=[1,0,"xqx:attributeValueExpr"],e.XQueryXNames[1][e.XQueryX.baseUriDecl=e.Xlength++]=[1,0,"xqx:baseUriDecl"],e.XQueryXNames[1][e.XQueryX.bindingSequence=e.Xlength++]=[1,0,"xqx:bindingSequence"],e.XQueryXNames[1][e.XQueryX.boundarySpaceDecl=e.Xlength++]=[1,0,"xqx:boundarySpaceDecl"],e.XQueryXNames[1][e.XQueryX.castExpr=e.Xlength++]=[1,0,"xqx:castExpr"],e.XQueryXNames[1][e.XQueryX.castableExpr=e.Xlength++]=[1,0,"xqx:castableExpr"],e.XQueryXNames[1][e.XQueryX.catchClause=e.Xlength++]=[1,0,"xqx:catchClause"],e.XQueryXNames[1][e.XQueryX.catchErrorList=e.Xlength++]=[1,0,"xqx:catchErrorList"],e.XQueryXNames[1][e.XQueryX.catchExpr=e.Xlength++]=[1,0,"xqx:catchExpr"],e.XQueryXNames[1][e.XQueryX.collation=e.Xlength++]=[1,0,"xqx:collation"],e.XQueryXNames[1][e.XQueryX.commentTest=e.Xlength++]=[1,0,"xqx:commentTest"],e.XQueryXNames[1][e.XQueryX.comparisonOp=e.Xlength++]=[1,0,"xqx:comparisonOp"],e.XQueryXNames[1][e.XQueryX.computedAttributeConstructor=e.Xlength++]=[1,0,"xqx:computedAttributeConstructor"],e.XQueryXNames[1][e.XQueryX.computedCommentConstructor=e.Xlength++]=[1,0,"xqx:computedCommentConstructor"],e.XQueryXNames[1][e.XQueryX.computedDocumentConstructor=e.Xlength++]=[1,0,"xqx:computedDocumentConstructor"],e.XQueryXNames[1][e.XQueryX.computedElementConstructor=e.Xlength++]=[1,0,"xqx:computedElementConstructor"],e.XQueryXNames[1][e.XQueryX.computedEntryConstructor=e.Xlength++]=[1,0,"xqx:computedEntryConstructor"],e.XQueryXNames[1][e.XQueryX.computedNamespaceConstructor=e.Xlength++]=[1,0,"xqx:computedNamespaceConstructor"],e.XQueryXNames[1][e.XQueryX.computedPIConstructor=e.Xlength++]=[1,0,"xqx:computedPIConstructor"],e.XQueryXNames[1][e.XQueryX.computedTextConstructor=e.Xlength++]=[1,0,"xqx:computedTextConstructor"],e.XQueryXNames[1][e.XQueryX.constantExpr=e.Xlength++]=[1,0,"xqx:constantExpr"],e.XQueryXNames[1][e.XQueryX.constructionDecl=e.Xlength++]=[1,0,"xqx:constructionDecl"],e.XQueryXNames[1][e.XQueryX.constructorFunctionExpr=e.Xlength++]=[1,0,"xqx:constructorFunctionExpr"],e.XQueryXNames[1][e.XQueryX.contentExpr=e.Xlength++]=[1,0,"xqx:contentExpr"],e.XQueryXNames[1][e.XQueryX.contextItemDecl=e.Xlength++]=[1,0,"xqx:contextItemDecl"],e.XQueryXNames[1][e.XQueryX.contextItemExpr=e.Xlength++]=[1,0,"xqx:contextItemExpr"],e.XQueryXNames[1][e.XQueryX.copyNamespacesDecl=e.Xlength++]=[1,0,"xqx:copyNamespacesDecl"],e.XQueryXNames[1][e.XQueryX.countClause=e.Xlength++]=[1,0,"xqx:countClause"],e.XQueryXNames[1][e.XQueryX.currentItem=e.Xlength++]=[1,0,"xqx:currentItem"],e.XQueryXNames[1][e.XQueryX.decimalConstantExpr=e.Xlength++]=[1,0,"xqx:decimalConstantExpr"],e.XQueryXNames[1][e.XQueryX.decimalFormatDecl=e.Xlength++]=[1,0,"xqx:decimalFormatDecl"],e.XQueryXNames[1][e.XQueryX.decimalFormatName=e.Xlength++]=[1,0,"xqx:decimalFormatName"],e.XQueryXNames[1][e.XQueryX.decimalFormatParam=e.Xlength++]=[1,0,"xqx:decimalFormatParam"],e.XQueryXNames[1][e.XQueryX.decimalFormatParamName=e.Xlength++]=[1,0,"xqx:decimalFormatParamName"],e.XQueryXNames[1][e.XQueryX.decimalFormatParamValue=e.Xlength++]=[1,0,"xqx:decimalFormatParamValue"],e.XQueryXNames[1][e.XQueryX.defaultCollationDecl=e.Xlength++]=[1,0,"xqx:defaultCollationDecl"],e.XQueryXNames[1][e.XQueryX.defaultElementNamespace=e.Xlength++]=[1,0,"xqx:defaultElementNamespace"],e.XQueryXNames[1][e.XQueryX.defaultNamespaceCategory=e.Xlength++]=[1,0,"xqx:defaultNamespaceCategory"],e.XQueryXNames[1][e.XQueryX.defaultNamespaceDecl=e.Xlength++]=[1,0,"xqx:defaultNamespaceDecl"],e.XQueryXNames[1][e.XQueryX.divOp=e.Xlength++]=[1,0,"xqx:divOp"],e.XQueryXNames[1][e.XQueryX.documentTest=e.Xlength++]=[1,0,"xqx:documentTest"],e.XQueryXNames[1][e.XQueryX.doubleConstantExpr=e.Xlength++]=[1,0,"xqx:doubleConstantExpr"],e.XQueryXNames[1][e.XQueryX.doubleMapExpr=e.Xlength++]=[1,0,"xqx:doubleMapExpr"],e.XQueryXNames[1][e.XQueryX.dynamicFunctionInvocationExpr=e.Xlength++]=[1,0,"xqx:dynamicFunctionInvocationExpr"],e.XQueryXNames[1][e.XQueryX.elementConstructor=e.Xlength++]=[1,0,"xqx:elementConstructor"],e.XQueryXNames[1][e.XQueryX.elementContent=e.Xlength++]=[1,0,"xqx:elementContent"],e.XQueryXNames[1][e.XQueryX.elementName=e.Xlength++]=[1,0,"xqx:elementName"],e.XQueryXNames[1][e.XQueryX.elementTest=e.Xlength++]=[1,0,"xqx:elementTest"],e.XQueryXNames[1][e.XQueryX.elseClause=e.Xlength++]=[1,0,"xqx:elseClause"],e.XQueryXNames[1][e.XQueryX.emptyOrderingDecl=e.Xlength++]=[1,0,"xqx:emptyOrderingDecl"],e.XQueryXNames[1][e.XQueryX.emptyOrderingMode=e.Xlength++]=[1,0,"xqx:emptyOrderingMode"],e.XQueryXNames[1][e.XQueryX.encoding=e.Xlength++]=[1,0,"xqx:encoding"],e.XQueryXNames[1][e.XQueryX.endExpr=e.Xlength++]=[1,0,"xqx:endExpr"],e.XQueryXNames[1][e.XQueryX.entryTest=e.Xlength++]=[1,0,"xqx:entryTest"],e.XQueryXNames[1][e.XQueryX.eqOp=e.Xlength++]=[1,0,"xqx:eqOp"],e.XQueryXNames[1][e.XQueryX.equalOp=e.Xlength++]=[1,0,"xqx:equalOp"],e.XQueryXNames[1][e.XQueryX.exceptOp=e.Xlength++]=[1,0,"xqx:exceptOp"],e.XQueryXNames[1][e.XQueryX.expr=e.Xlength++]=[1,0,"xqx:expr"],e.XQueryXNames[1][e.XQueryX.extensionExpr=e.Xlength++]=[1,0,"xqx:extensionExpr"],e.XQueryXNames[1][e.XQueryX.external=e.Xlength++]=[1,0,"xqx:external"],e.XQueryXNames[1][e.XQueryX.externalDefinition=e.Xlength++]=[1,0,"xqx:externalDefinition"],e.XQueryXNames[1][e.XQueryX.filterExpr=e.Xlength++]=[1,0,"xqx:filterExpr"],e.XQueryXNames[1][e.XQueryX.firstOperand=e.Xlength++]=[1,0,"xqx:firstOperand"],e.XQueryXNames[1][e.XQueryX.flworExpr=e.Xlength++]=[1,0,"xqx:flworExpr"],e.XQueryXNames[1][e.XQueryX.forClause=e.Xlength++]=[1,0,"xqx:forClause"],e.XQueryXNames[1][e.XQueryX.forClauseItem=e.Xlength++]=[1,0,"xqx:forClauseItem"],e.XQueryXNames[1][e.XQueryX.forExpr=e.Xlength++]=[1,0,"xqx:forExpr"],e.XQueryXNames[1][e.XQueryX.forLetClauseItemExtensions=e.Xlength++]=[1,0,"xqx:forLetClauseItemExtensions"],e.XQueryXNames[1][e.XQueryX.functionBody=e.Xlength++]=[1,0,"xqx:functionBody"],e.XQueryXNames[1][e.XQueryX.functionCallExpr=e.Xlength++]=[1,0,"xqx:functionCallExpr"],e.XQueryXNames[1][e.XQueryX.functionDecl=e.Xlength++]=[1,0,"xqx:functionDecl"],e.XQueryXNames[1][e.XQueryX.functionItem=e.Xlength++]=[1,0,"xqx:functionItem"],e.XQueryXNames[1][e.XQueryX.functionName=e.Xlength++]=[1,0,"xqx:functionName"],e.XQueryXNames[1][e.XQueryX.geOp=e.Xlength++]=[1,0,"xqx:geOp"],e.XQueryXNames[1][e.XQueryX.generalComparisonOp=e.Xlength++]=[1,0,"xqx:generalComparisonOp"],e.XQueryXNames[1][e.XQueryX.greaterThanOp=e.Xlength++]=[1,0,"xqx:greaterThanOp"],e.XQueryXNames[1][e.XQueryX.greaterThanOrEqualOp=e.Xlength++]=[1,0,"xqx:greaterThanOrEqualOp"],e.XQueryXNames[1][e.XQueryX.groupByClause=e.Xlength++]=[1,0,"xqx:groupByClause"],e.XQueryXNames[1][e.XQueryX.groupVarInitialize=e.Xlength++]=[1,0,"xqx:groupVarInitialize"],e.XQueryXNames[1][e.XQueryX.groupingSpec=e.Xlength++]=[1,0,"xqx:groupingSpec"],e.XQueryXNames[1][e.XQueryX.gtOp=e.Xlength++]=[1,0,"xqx:gtOp"],e.XQueryXNames[1][e.XQueryX.idivOp=e.Xlength++]=[1,0,"xqx:idivOp"],e.XQueryXNames[1][e.XQueryX.ifClause=e.Xlength++]=[1,0,"xqx:ifClause"],e.XQueryXNames[1][e.XQueryX.ifThenElseExpr=e.Xlength++]=[1,0,"xqx:ifThenElseExpr"],e.XQueryXNames[1][e.XQueryX.inheritMode=e.Xlength++]=[1,0,"xqx:inheritMode"],e.XQueryXNames[1][e.XQueryX.inlineFunctionExpr=e.Xlength++]=[1,0,"xqx:inlineFunctionExpr"],e.XQueryXNames[1][e.XQueryX.instanceOfExpr=e.Xlength++]=[1,0,"xqx:instanceOfExpr"],e.XQueryXNames[1][e.XQueryX.integerConstantExpr=e.Xlength++]=[1,0,"xqx:integerConstantExpr"],e.XQueryXNames[1][e.XQueryX.intersectOp=e.Xlength++]=[1,0,"xqx:intersectOp"],e.XQueryXNames[1][e.XQueryX.isOp=e.Xlength++]=[1,0,"xqx:isOp"],e.XQueryXNames[1][e.XQueryX.itemType=e.Xlength++]=[1,0,"xqx:itemType"],e.XQueryXNames[1][e.XQueryX.javascriptImport=e.Xlength++]=[1,0,"xqx:javascriptImport"],e.XQueryXNames[1][e.XQueryX.kindTest=e.Xlength++]=[1,0,"xqx:kindTest"],e.XQueryXNames[1][e.XQueryX.leOp=e.Xlength++]=[1,0,"xqx:leOp"],e.XQueryXNames[1][e.XQueryX.lessThanOp=e.Xlength++]=[1,0,"xqx:lessThanOp"],e.XQueryXNames[1][e.XQueryX.lessThanOrEqualOp=e.Xlength++]=[1,0,"xqx:lessThanOrEqualOp"],e.XQueryXNames[1][e.XQueryX.letClause=e.Xlength++]=[1,0,"xqx:letClause"],e.XQueryXNames[1][e.XQueryX.letClauseItem=e.Xlength++]=[1,0,"xqx:letClauseItem"],e.XQueryXNames[1][e.XQueryX.letExpr=e.Xlength++]=[1,0,"xqx:letExpr"],e.XQueryXNames[1][e.XQueryX.libraryModule=e.Xlength++]=[1,0,"xqx:libraryModule"],e.XQueryXNames[1][e.XQueryX.logicalOp=e.Xlength++]=[1,0,"xqx:logicalOp"],e.XQueryXNames[1][e.XQueryX.lookup=e.Xlength++]=[1,0,"xqx:lookup"],e.XQueryXNames[1][e.XQueryX.ltOp=e.Xlength++]=[1,0,"xqx:ltOp"],e.XQueryXNames[1][e.XQueryX.mainModule=e.Xlength++]=[1,0,"xqx:mainModule"],e.XQueryXNames[1][e.XQueryX.mapConstructor=e.Xlength++]=[1,0,"xqx:mapConstructor"],e.XQueryXNames[1][e.XQueryX.mapConstructorEntry=e.Xlength++]=[1,0,"xqx:mapConstructorEntry"],e.XQueryXNames[1][e.XQueryX.mapKeyExpr=e.Xlength++]=[1,0,"xqx:mapKeyExpr"],e.XQueryXNames[1][e.XQueryX.mapTest=e.Xlength++]=[1,0,"xqx:mapTest"],e.XQueryXNames[1][e.XQueryX.mapValueExpr=e.Xlength++]=[1,0,"xqx:mapValueExpr"],e.XQueryXNames[1][e.XQueryX.modOp=e.Xlength++]=[1,0,"xqx:modOp"],e.XQueryXNames[1][e.XQueryX.module=e.Xlength++]=[1,0,"xqx:module"],e.XQueryXNames[1][e.XQueryX.moduleDecl=e.Xlength++]=[1,0,"xqx:moduleDecl"],e.XQueryXNames[1][e.XQueryX.moduleImport=e.Xlength++]=[1,0,"xqx:moduleImport"],e.XQueryXNames[1][e.XQueryX.multidimExpr=e.Xlength++]=[1,0,"xqx:multidimExpr"],e.XQueryXNames[1][e.XQueryX.multiplyOp=e.Xlength++]=[1,0,"xqx:multiplyOp"],e.XQueryXNames[1][e.XQueryX.name=e.Xlength++]=[1,0,"xqx:name"],e.XQueryXNames[1][e.XQueryX.nameTest=e.Xlength++]=[1,0,"xqx:nameTest"],e.XQueryXNames[1][e.XQueryX.namedFunctionRef=e.Xlength++]=[1,0,"xqx:namedFunctionRef"],e.XQueryXNames[1][e.XQueryX.namespaceDecl=e.Xlength++]=[1,0,"xqx:namespaceDecl"],e.XQueryXNames[1][e.XQueryX.namespaceDeclaration=e.Xlength++]=[1,0,"xqx:namespaceDeclaration"],e.XQueryXNames[1][e.XQueryX.namespacePrefix=e.Xlength++]=[1,0,"xqx:namespacePrefix"],e.XQueryXNames[1][e.XQueryX.namespaceTest=e.Xlength++]=[1,0,"xqx:namespaceTest"],e.XQueryXNames[1][e.XQueryX.neOp=e.Xlength++]=[1,0,"xqx:neOp"],e.XQueryXNames[1][e.XQueryX.nextItem=e.Xlength++]=[1,0,"xqx:nextItem"],e.XQueryXNames[1][e.XQueryX.nillable=e.Xlength++]=[1,0,"xqx:nillable"],e.XQueryXNames[1][e.XQueryX.nodeAfterOp=e.Xlength++]=[1,0,"xqx:nodeAfterOp"],e.XQueryXNames[1][e.XQueryX.nodeBeforeOp=e.Xlength++]=[1,0,"xqx:nodeBeforeOp"],e.XQueryXNames[1][e.XQueryX.nodeComparisonOp=e.Xlength++]=[1,0,"xqx:nodeComparisonOp"],e.XQueryXNames[1][e.XQueryX.notEqualOp=e.Xlength++]=[1,0,"xqx:notEqualOp"],e.XQueryXNames[1][e.XQueryX.occurrenceIndicator=e.Xlength++]=[1,0,"xqx:occurrenceIndicator"],e.XQueryXNames[1][e.XQueryX.operand=e.Xlength++]=[1,0,"xqx:operand"],e.XQueryXNames[1][e.XQueryX.operatorExpr=e.Xlength++]=[1,0,"xqx:operatorExpr"],e.XQueryXNames[1][e.XQueryX.optionContents=e.Xlength++]=[1,0,"xqx:optionContents"],e.XQueryXNames[1][e.XQueryX.optionDecl=e.Xlength++]=[1,0,"xqx:optionDecl"],e.XQueryXNames[1][e.XQueryX.optionName=e.Xlength++]=[1,0,"xqx:optionName"],e.XQueryXNames[1][e.XQueryX.optional=e.Xlength++]=[1,0,"xqx:optional"],e.XQueryXNames[1][e.XQueryX.orOp=e.Xlength++]=[1,0,"xqx:orOp"],e.XQueryXNames[1][e.XQueryX.orderByClause=e.Xlength++]=[1,0,"xqx:orderByClause"],e.XQueryXNames[1][e.XQueryX.orderByExpr=e.Xlength++]=[1,0,"xqx:orderByExpr"],e.XQueryXNames[1][e.XQueryX.orderBySpec=e.Xlength++]=[1,0,"xqx:orderBySpec"],e.XQueryXNames[1][e.XQueryX.orderComparisonOp=e.Xlength++]=[1,0,"xqx:orderComparisonOp"],e.XQueryXNames[1][e.XQueryX.orderModifier=e.Xlength++]=[1,0,"xqx:orderModifier"],e.XQueryXNames[1][e.XQueryX.orderedExpr=e.Xlength++]=[1,0,"xqx:orderedExpr"],e.XQueryXNames[1][e.XQueryX.orderingKind=e.Xlength++]=[1,0,"xqx:orderingKind"],e.XQueryXNames[1][e.XQueryX.orderingModeDecl=e.Xlength++]=[1,0,"xqx:orderingModeDecl"],e.XQueryXNames[1][e.XQueryX.param=e.Xlength++]=[1,0,"xqx:param"],e.XQueryXNames[1][e.XQueryX.paramList=e.Xlength++]=[1,0,"xqx:paramList"],e.XQueryXNames[1][e.XQueryX.paramTypeList=e.Xlength++]=[1,0,"xqx:paramTypeList"],e.XQueryXNames[1][e.XQueryX.parenthesizedItemType=e.Xlength++]=[1,0,"xqx:parenthesizedItemType"],e.XQueryXNames[1][e.XQueryX.pathExpr=e.Xlength++]=[1,0,"xqx:pathExpr"],e.XQueryXNames[1][e.XQueryX.piTarget=e.Xlength++]=[1,0,"xqx:piTarget"],e.XQueryXNames[1][e.XQueryX.piTargetExpr=e.Xlength++]=[1,0,"xqx:piTargetExpr"],e.XQueryXNames[1][e.XQueryX.piTest=e.Xlength++]=[1,0,"xqx:piTest"],e.XQueryXNames[1][e.XQueryX.piValueExpr=e.Xlength++]=[1,0,"xqx:piValueExpr"],e.XQueryXNames[1][e.XQueryX.positionalVariableBinding=e.Xlength++]=[1,0,"xqx:positionalVariableBinding"],e.XQueryXNames[1][e.XQueryX.pragma=e.Xlength++]=[1,0,"xqx:pragma"],e.XQueryXNames[1][e.XQueryX.pragmaContents=e.Xlength++]=[1,0,"xqx:pragmaContents"],e.XQueryXNames[1][e.XQueryX.pragmaName=e.Xlength++]=[1,0,"xqx:pragmaName"],e.XQueryXNames[1][e.XQueryX.predicate=e.Xlength++]=[1,0,"xqx:predicate"],e.XQueryXNames[1][e.XQueryX.predicateExpr=e.Xlength++]=[1,0,"xqx:predicateExpr"],e.XQueryXNames[1][e.XQueryX.predicates=e.Xlength++]=[1,0,"xqx:predicates"],e.XQueryXNames[1][e.XQueryX.prefixElt=e.Xlength++]=[1,0,"xqx:prefix"],e.XQueryXNames[1][e.XQueryX.prefixExpr=e.Xlength++]=[1,0,"xqx:prefixExpr"],e.XQueryXNames[1][e.XQueryX.preserveMode=e.Xlength++]=[1,0,"xqx:preserveMode"],e.XQueryXNames[1][e.XQueryX.previousItem=e.Xlength++]=[1,0,"xqx:previousItem"],e.XQueryXNames[1][e.XQueryX.prolog=e.Xlength++]=[1,0,"xqx:prolog"],e.XQueryXNames[1][e.XQueryX.prologPartOneItem=e.Xlength++]=[1,0,"xqx:prologPartOneItem"],e.XQueryXNames[1][e.XQueryX.prologPartTwoItem=e.Xlength++]=[1,0,"xqx:prologPartTwoItem"],e.XQueryXNames[1][e.XQueryX.quantifiedExpr=e.Xlength++]=[1,0,"xqx:quantifiedExpr"],e.XQueryXNames[1][e.XQueryX.quantifiedExprInClause=e.Xlength++]=[1,0,"xqx:quantifiedExprInClause"],e.XQueryXNames[1][e.XQueryX.quantifier=e.Xlength++]=[1,0,"xqx:quantifier"],e.XQueryXNames[1][e.XQueryX.queryBody=e.Xlength++]=[1,0,"xqx:queryBody"],e.XQueryXNames[1][e.XQueryX.rangeSequenceExpr=e.Xlength++]=[1,0,"xqx:rangeSequenceExpr"],e.XQueryXNames[1][e.XQueryX.resultExpr=e.Xlength++]=[1,0,"xqx:resultExpr"],e.XQueryXNames[1][e.XQueryX.returnClause=e.Xlength++]=[1,0,"xqx:returnClause"],e.XQueryXNames[1][e.XQueryX.rootExpr=e.Xlength++]=[1,0,"xqx:rootExpr"],e.XQueryXNames[1][e.XQueryX.schemaAttributeTest=e.Xlength++]=[1,0,"xqx:schemaAttributeTest"],e.XQueryXNames[1][e.XQueryX.schemaElementTest=e.Xlength++]=[1,0,"xqx:schemaElementTest"],e.XQueryXNames[1][e.XQueryX.schemaImport=e.Xlength++]=[1,0,"xqx:schemaImport"],e.XQueryXNames[1][e.XQueryX.secondOperand=e.Xlength++]=[1,0,"xqx:secondOperand"],e.XQueryXNames[1][e.XQueryX.sequenceExpr=e.Xlength++]=[1,0,"xqx:sequenceExpr"],e.XQueryXNames[1][e.XQueryX.sequenceType=e.Xlength++]=[1,0,"xqx:sequenceType"],e.XQueryXNames[1][e.XQueryX.sequenceTypeUnion=e.Xlength++]=[1,0,"xqx:sequenceTypeUnion"],e.XQueryXNames[1][e.XQueryX.setOp=e.Xlength++]=[1,0,"xqx:setOp"],e.XQueryXNames[1][e.XQueryX.simpleMapExpr=e.Xlength++]=[1,0,"xqx:simpleMapExpr"],e.XQueryXNames[1][e.XQueryX.singleType=e.Xlength++]=[1,0,"xqx:singleType"],e.XQueryXNames[1][e.XQueryX.slidingWindowClause=e.Xlength++]=[1,0,"xqx:slidingWindowClause"],e.XQueryXNames[1][e.XQueryX.sourceExpr=e.Xlength++]=[1,0,"xqx:sourceExpr"],e.XQueryXNames[1][e.XQueryX.stable=e.Xlength++]=[1,0,"xqx:stable"],e.XQueryXNames[1][e.XQueryX.star=e.Xlength++]=[1,0,"xqx:star"],e.XQueryXNames[1][e.XQueryX.startExpr=e.Xlength++]=[1,0,"xqx:startExpr"],e.XQueryXNames[1][e.XQueryX.stepExpr=e.Xlength++]=[1,0,"xqx:stepExpr"],e.XQueryXNames[1][e.XQueryX.stringConcatenateOp=e.Xlength++]=[1,0,"xqx:stringConcatenateOp"],e.XQueryXNames[1][e.XQueryX.stringConstantExpr=e.Xlength++]=[1,0,"xqx:stringConstantExpr"],e.XQueryXNames[1][e.XQueryX.stringOp=e.Xlength++]=[1,0,"xqx:stringOp"],e.XQueryXNames[1][e.XQueryX.subtractOp=e.Xlength++]=[1,0,"xqx:subtractOp"],e.XQueryXNames[1][e.XQueryX.switchCaseExpr=e.Xlength++]=[1,0,"xqx:switchCaseExpr"],e.XQueryXNames[1][e.XQueryX.switchExpr=e.Xlength++]=[1,0,"xqx:switchExpr"],e.XQueryXNames[1][e.XQueryX.switchExprCaseClause=e.Xlength++]=[1,0,"xqx:switchExprCaseClause"],e.XQueryXNames[1][e.XQueryX.switchExprDefaultClause=e.Xlength++]=[1,0,"xqx:switchExprDefaultClause"],e.XQueryXNames[1][e.XQueryX.tagName=e.Xlength++]=[1,0,"xqx:tagName"],e.XQueryXNames[1][e.XQueryX.tagNameExpr=e.Xlength++]=[1,0,"xqx:tagNameExpr"],e.XQueryXNames[1][e.XQueryX.targetLocation=e.Xlength++]=[1,0,"xqx:targetLocation"],e.XQueryXNames[1][e.XQueryX.targetLocationExpr=e.Xlength++]=[1,0,"xqx:targetLocationExpr"],e.XQueryXNames[1][e.XQueryX.targetNamespace=e.Xlength++]=[1,0,"xqx:targetNamespace"],e.XQueryXNames[1][e.XQueryX.textTest=e.Xlength++]=[1,0,"xqx:textTest"],e.XQueryXNames[1][e.XQueryX.thenClause=e.Xlength++]=[1,0,"xqx:thenClause"],e.XQueryXNames[1][e.XQueryX.treatExpr=e.Xlength++]=[1,0,"xqx:treatExpr"],e.XQueryXNames[1][e.XQueryX.tryCatchExpr=e.Xlength++]=[1,0,"xqx:tryCatchExpr"],e.XQueryXNames[1][e.XQueryX.tryClause=e.Xlength++]=[1,0,"xqx:tryClause"],e.XQueryXNames[1][e.XQueryX.tumblingWindowClause=e.Xlength++]=[1,0,"xqx:tumblingWindowClause"],e.XQueryXNames[1][e.XQueryX.typeDeclaration=e.Xlength++]=[1,0,"xqx:typeDeclaration"],e.XQueryXNames[1][e.XQueryX.typeName=e.Xlength++]=[1,0,"xqx:typeName"],e.XQueryXNames[1][e.XQueryX.typedFunctionTest=e.Xlength++]=[1,0,"xqx:typedFunctionTest"],e.XQueryXNames[1][e.XQueryX.typedVariableBinding=e.Xlength++]=[1,0,"xqx:typedVariableBinding"],e.XQueryXNames[1][e.XQueryX.typeswitchExpr=e.Xlength++]=[1,0,"xqx:typeswitchExpr"],e.XQueryXNames[1][e.XQueryX.typeswitchExprCaseClause=e.Xlength++]=[1,0,"xqx:typeswitchExprCaseClause"],e.XQueryXNames[1][e.XQueryX.typeswitchExprDefaultClause=e.Xlength++]=[1,0,"xqx:typeswitchExprDefaultClause"],e.XQueryXNames[1][e.XQueryX.unaryMinusOp=e.Xlength++]=[1,0,"xqx:unaryMinusOp"],e.XQueryXNames[1][e.XQueryX.unaryPlusOp=e.Xlength++]=[1,0,"xqx:unaryPlusOp"],e.XQueryXNames[1][e.XQueryX.unionOp=e.Xlength++]=[1,0,"xqx:unionOp"],e.XQueryXNames[1][e.XQueryX.unorderedExpr=e.Xlength++]=[1,0,"xqx:unorderedExpr"],e.XQueryXNames[1][e.XQueryX.unaryLookup=e.Xlength++]=[1,0,"xqx:unaryLookup"],e.XQueryXNames[1][e.XQueryX.uri=e.Xlength++]=[1,0,"xqx:uri"],e.XQueryXNames[1][e.XQueryX.validateExpr=e.Xlength++]=[1,0,"xqx:validateExpr"],e.XQueryXNames[1][e.XQueryX.validationMode=e.Xlength++]=[1,0,"xqx:validationMode"],e.XQueryXNames[1][e.XQueryX.value=e.Xlength++]=[1,0,"xqx:value"],e.XQueryXNames[1][e.XQueryX.valueComparisonOp=e.Xlength++]=[1,0,"xqx:valueComparisonOp"],e.XQueryXNames[1][e.XQueryX.valueExpr=e.Xlength++]=[1,0,"xqx:valueExpr"],e.XQueryXNames[1][e.XQueryX.varDecl=e.Xlength++]=[1,0,"xqx:varDecl"],e.XQueryXNames[1][e.XQueryX.varName=e.Xlength++]=[1,0,"xqx:varName"],e.XQueryXNames[1][e.XQueryX.varRef=e.Xlength++]=[1,0,"xqx:varRef"],e.XQueryXNames[1][e.XQueryX.varValue=e.Xlength++]=[1,0,"xqx:varValue"],e.XQueryXNames[1][e.XQueryX.variableBinding=e.Xlength++]=[1,0,"xqx:variableBinding"],e.XQueryXNames[1][e.XQueryX.version=e.Xlength++]=[1,0,"xqx:version"],e.XQueryXNames[1][e.XQueryX.versionDecl=e.Xlength++]=[1,0,"xqx:versionDecl"],e.XQueryXNames[1][e.XQueryX.voidSequenceType=e.Xlength++]=[1,0,"xqx:voidSequenceType"],e.XQueryXNames[1][e.XQueryX.whereClause=e.Xlength++]=[1,0,"xqx:whereClause"],e.XQueryXNames[1][e.XQueryX.winEndExpr=e.Xlength++]=[1,0,"xqx:winEndExpr"],e.XQueryXNames[1][e.XQueryX.winStartExpr=e.Xlength++]=[1,0,"xqx:winStartExpr"],e.XQueryXNames[1][e.XQueryX.windowClause=e.Xlength++]=[1,0,"xqx:windowClause"],e.XQueryXNames[1][e.XQueryX.windowEndCondition=e.Xlength++]=[1,0,"xqx:windowEndCondition"],e.XQueryXNames[1][e.XQueryX.windowStartCondition=e.Xlength++]=[1,0,"xqx:windowStartCondition"],e.XQueryXNames[1][e.XQueryX.windowVars=e.Xlength++]=[1,0,"xqx:windowVars"],e.XQueryXNames[1][e.XQueryX.xpathAxis=e.Xlength++]=[1,0,"xqx:xpathAxis"],e.XQueryXNames[1][e.XQueryX.URI=e.Xlength++]=[2,0,"xqx:URI"],e.XQueryXNames[1][e.XQueryX.default=e.Xlength++]=[2,0,"xqx:default"],e.XQueryXNames[1][e.XQueryX.nondeterministic=e.Xlength++]=[2,0,"xqx:nondeterministic"],e.XQueryXNames[1][e.XQueryX.onlyEnd=e.Xlength++]=[2,0,"xqx:onlyEnd"],e.XQueryXNames[1][e.XQueryX.prefix=e.Xlength++]=[2,0,"xqx:prefix"],e.XQueryXNames[1][e.XQueryX.private=e.Xlength++]=[2,0,"xqx:private"],e.XQueryXNames[1][e.XQueryX.sequentialFunction=e.Xlength++]=[2,0,"xqx:sequentialFunction"],e.XQueryXNames[1][e.XQueryX.updatingFunction=e.Xlength++]=[2,0,"xqx:updatingFunction"],e.XQueryXNames[1][e.XQueryX.xqx=e.Xlength++]=[2,1,"xmlns:xqx"],e.XQueryXNames[1][e.XQueryX.xsi=e.Xlength++]=[2,1,"xmlns:xsi"],e.XQueryXNames[1][e.XQueryX.schemaLocation=e.Xlength++]=[2,2,"xsi:schemaLocation"],e.XQueryXNames[1][e.XQueryX.xqxuf=e.Xlength++]=[2,1,"xmlns:xqxuf"],e.XQueryXNames[1][e.XQueryX.copyModifyExpr=e.Xlength++]=[1,3,"xqxuf:copyModifyExpr"],e.XQueryXNames[1][e.XQueryX.copySource=e.Xlength++]=[1,3,"xqxuf:copySource"],e.XQueryXNames[1][e.XQueryX.deleteExpr=e.Xlength++]=[1,3,"xqxuf:deleteExpr"],e.XQueryXNames[1][e.XQueryX.insertAfter=e.Xlength++]=[1,3,"xqxuf:insertAfter"],e.XQueryXNames[1][e.XQueryX.insertAsFirst=e.Xlength++]=[1,3,"xqxuf:insertAsFirst"],e.XQueryXNames[1][e.XQueryX.insertAsLast=e.Xlength++]=[1,3,"xqxuf:insertAsLast"],e.XQueryXNames[1][e.XQueryX.insertBefore=e.Xlength++]=[1,3,"xqxuf:insertBefore"],e.XQueryXNames[1][e.XQueryX.insertExpr=e.Xlength++]=[1,3,"xqxuf:insertExpr"],e.XQueryXNames[1][e.XQueryX.insertInto=e.Xlength++]=[1,3,"xqxuf:insertInto"],e.XQueryXNames[1][e.XQueryX.modifyExpr=e.Xlength++]=[1,3,"xqxuf:modifyExpr"],e.XQueryXNames[1][e.XQueryX.newNameExpr=e.Xlength++]=[1,3,"xqxuf:newNameExpr"],e.XQueryXNames[1][e.XQueryX.renameExpr=e.Xlength++]=[1,3,"xqxuf:renameExpr"],e.XQueryXNames[1][e.XQueryX.replaceExpr=e.Xlength++]=[1,3,"xqxuf:replaceExpr"],e.XQueryXNames[1][e.XQueryX.replaceValue=e.Xlength++]=[1,3,"xqxuf:replaceValue"],e.XQueryXNames[1][e.XQueryX.replacementExpr=e.Xlength++]=[1,3,"xqxuf:replacementExpr"],e.XQueryXNames[1][e.XQueryX.returnExpr=e.Xlength++]=[1,3,"xqxuf:returnExpr"],e.XQueryXNames[1][e.XQueryX.revalidationDecl=e.Xlength++]=[1,3,"xqxuf:revalidationDecl"],e.XQueryXNames[1][e.XQueryX.sourceExprUf=e.Xlength++]=[1,3,"xqxuf:sourceExpr"],e.XQueryXNames[1][e.XQueryX.targetExpr=e.Xlength++]=[1,3,"xqxuf:targetExpr"],e.XQueryXNames[1][e.XQueryX.transformCopies=e.Xlength++]=[1,3,"xqxuf:transformCopies"],e.XQueryXNames[1][e.XQueryX.transformCopy=e.Xlength++]=[1,3,"xqxuf:transformCopy"],e.XQueryXNames[1][e.XQueryX.transformExpr=e.Xlength++]=[1,3,"xqxuf:transformExpr"],e.XPathEvaluator=function(){},e.XPathEvaluator._precedence="././/.:.as.&0.!.!!.&1.~+.~-.&2.cast as.&3.castable as.&4.treat as.&5.instance of.&6.intersect.except.&7.|.union.&8.div.mod.*.idiv.&9.+.-.&10.to.&11.||.&12.eq.ne.lt.le.gt.ge.<.>.<=.>=.is.<<.>>.=.!=.&13.and.&14.or.&15.allowing.&16.at.&17.:=.in.&18.after.before.into.with.value.&19.node.nodes.&20.~~ascending.~~descending.empty.&28.~,.&29.for.let.group by.order by.stable order by.count.where.some.every.&30.then.catch.&31.else.return.satisfies.&32.,.&50.;.&51.",e.XPathEvaluator._rightgrouping1=e.XPathEvaluator._precedence.substr(e.XPathEvaluator._precedence.indexOf(".then.")+6),e.XPathEvaluator._rightgrouping1=e.XPathEvaluator._rightgrouping1.substr(e.XPathEvaluator._rightgrouping1.indexOf("&")+1),e.XPathEvaluator._rightgrouping1=parseInt(e.XPathEvaluator._rightgrouping1.substr(0,e.XPathEvaluator._rightgrouping1.indexOf(".")),10),e.XPathEvaluator._rightgrouping2=e.XPathEvaluator._precedence.substr(e.XPathEvaluator._precedence.indexOf(".return.")+6),e.XPathEvaluator._rightgrouping2=e.XPathEvaluator._rightgrouping2.substr(e.XPathEvaluator._rightgrouping2.indexOf("&")+1),e.XPathEvaluator._rightgrouping2=parseInt(e.XPathEvaluator._rightgrouping2.substr(0,e.XPathEvaluator._rightgrouping2.indexOf(".")),10),e.XPathEvaluator._opcodes="./;stepExpr.|;unionOp.union;unionOp.div;divOp.mod;modOp.*;multiplyOp.idiv;idivOp.+;addOp.-;subtractOp.to;toOp.||;stringConcatenateOp.eq;eqOp.ne;neOp.lt;ltOp.le;leOp.gt;gtOp.ge;geOp.<;lessThanOp.>;greaterThanOp.<=;lessThanOrEqualOp.>=;greaterThanOrEqualOp.is;isOp.<<;nodeBeforeOp.>>;nodeAfterOp.=;equalOp.!=;notEqualOp.and;andOp.or;orOp.,;argExpr.",e.XPathEvaluator._skipComment=function(t,r){var s=r,o=t.charAt(s),n=t.charAt(s+1),l=t.length;do{if("("===o&&":"===n)s=e.XPathEvaluator._skipComment(t,s+2);else if(":"===o&&")"===n)return s+1;o=t.charAt(++s),n=t.charAt(s+1)}while(s<l)},e.XPathEvaluator._skipSpaces=function(t,r){var s=r,o=t.charAt(s),n=t.length;do{if("("===o&&":"===t.charAt(s+1))s=e.XPathEvaluator._skipComment(t,s+2);else if("\n"!==o&&"\r"!==o&&"\t"!==o&&" "!==o)return s;o=t.charAt(++s)}while(s<n);return s},e.XPathEvaluator._getName=function(e){for(var t=0,r=e.charAt(0),s="";""!==r&&-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:*{".indexOf(r);){if("*"===r){if(t>0&&(":"===e.charAt(t-1)||"}"===e.charAt(t-1))){t++;break}if(":"!==e.charAt(t+1)){0===t&&t++;break}}if("{"===r){if("Q"!==s)return e.substr(0,t);for(;""!==r&&"}"!==r;)r=e.charAt(++t)}s=r,r=e.charAt(++t)}if("#"===r)for(r=e.charAt(++t);""!==r&&-1!=="0123456789".indexOf(r);)r=e.charAt(++t);return e.substr(0,t)},e.XPathEvaluator._getNameStep=function(t,r){var s=e.XPathEvaluator._getName(t),o=s.indexOf("#");if(-1!==o){var n=s.indexOf(":");return-1===n?s.length+".[Fleur.XQueryX.namedFunctionRef,[[Fleur.XQueryX.functionName,['"+s.substr(0,o)+"']],[Fleur.XQueryX.integerConstantExpr,[[Fleur.XQueryX.value,['"+s.substr(o+1)+"']]]]]]":s.length+".[Fleur.XQueryX.namedFunctionRef,[[Fleur.XQueryX.functionName,['"+s.substr(0,o).substr(n+1)+"',[Fleur.XQueryX.prefix,['"+s.substr(0,n)+"']]]],[Fleur.XQueryX.integerConstantExpr,[[Fleur.XQueryX.value,['"+s.substr(o+1)+"']]]]]]"}var l=s.indexOf("::"),a=-1!==l?s.substr(0,l):r?"attribute":"child",i=-1!==l?s.substr(l+2):s,m="Q{"===i.substr(0,2),u=m?i.indexOf("}"):i.indexOf(":"),c=-1!==u?i.substr(u+1):i,d=m?i.substr(2,u-2):-1!==u?i.substr(0,u):"",h="*"===c||"*"===d?"[Fleur.XQueryX.Wildcard,["+("*"!==c?"[Fleur.XQueryX.star,[]],[Fleur.XQueryX.NCName,['"+c+"']]":"")+"]]":"[Fleur.XQueryX.nameTest,['"+c+"'"+(m||-1!==u?",["+(m?"Fleur.XQueryX.URI":"Fleur.XQueryX.prefix")+",['"+d+"']]":"")+"]]";return s.length+r+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['"+a+"']],"+h+"]]]]"},e.XPathEvaluator._pathExprFormat=function(e,t){return"[Fleur.XQueryX.pathExpr,["===e.substr(0,25)?e.substr(25,e.length-29)+t+"]]":"[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,["+e+"]]"+t+"]]"},e.XPathEvaluator._calc=function(t,r,s){var o=parseInt(r.split(".")[1],10);if(""===r||o>s||31===s||o>=s&&(o===e.XPathEvaluator._rightgrouping1||o===e.XPathEvaluator._rightgrouping2))return t.length+"."+t+r.length+"."+r;var n,l,a,i,m,u,c,d,h=r.substr(r.indexOf(".")+1,parseInt(r.split(".")[0],10)),p=h.substr(h.indexOf(".")+1),X=t.substr(0,t.indexOf(".")),f=t.substr(t.indexOf(".")+1).substr(0,parseInt(X,10));switch(p.startsWith("~~")?(a=t,i=X,m=f):(i=(a=t.substr(X.length+1+parseInt(X,10))).substr(0,a.indexOf(".")),m=a.substr(a.indexOf(".")+1).substr(0,parseInt(i,10))),p){case";":c="[Fleur.XQueryX.sequenceExpr,[[Fleur.XQueryX.multidimExpr,["===m.substr(0,58)?"[Fleur.XQueryX.sequenceExpr,[[Fleur.XQueryX.multidimExpr,["+m.substr(58,m.length-62)+","+f+"]]]]":"[Fleur.XQueryX.sequenceExpr,[[Fleur.XQueryX.multidimExpr,["+m+","+f+"]]]]";break;case",":c="4.50.,5.999.("===r.substr(0,13)?"[Fleur.XQueryX.arguments,["===m.substr(0,26)?m.substr(0,m.length-2)+","+f+"]]":"[Fleur.XQueryX.arguments,["+m+","+f+"]]":"4.50.,5.999.q"===r.substr(0,13)?m+","+f:r.startsWith("4.50.,")?"[Fleur.XQueryX.mapConstructorEntry,["===m.substr(0,36)?m+","+f:"[Fleur.XQueryX.sequenceExpr,["===m.substr(0,29)&&"[Fleur.XQueryX.sequenceExpr,[]]"!==m?m.substr(0,m.length-2)+","+f+"]]":"[Fleur.XQueryX.sequenceExpr,["+m+","+f+"]]":m+","+f;break;case"~,":"[Fleur.XQueryX.letClauseItem,"===m.substr(0,29)||"[Fleur.XQueryX.groupBySpec,"===m.substr(0,27)?c=m+","+f:"[Fleur.XQueryX.letClause,"===m.substr(0,25)?c="Fleur.XQueryX.letClause,"===f.substr(0,25)?m.substr(0,m.length-2)+","+f.substr(25):m.substr(0,m.length-2)+","+f+"]]":(c="[Fleur.XQueryX.orderBySpec,"!==m.substr(0,27)?"[Fleur.XQueryX.orderBySpec,[[Fleur.XQueryX.orderByExpr,["+m+"]]]]":m,c+=",","[Fleur.XQueryX.orderBySpec,"!==f.substr(0,27)?c+="[Fleur.XQueryX.orderBySpec,[[Fleur.XQueryX.orderByExpr,["+f+"]]]]":c+=f);break;case"//":c="[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(m,"")+",[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['descendant-or-self']],[Fleur.XQueryX.anyKindTest,[]]]],"+e.XPathEvaluator._pathExprFormat(f,"")+"]]";break;case"/":c="[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(m,"")+(""!==f?","+e.XPathEvaluator._pathExprFormat(f,""):"")+"]]";break;case"!!":c="[Fleur.XQueryX.doubleMapExpr,[[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(m,"")+"]],[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(f,"")+"]]]]";break;case"!":c="[Fleur.XQueryX.simpleMapExpr,[[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(m,"")+"]],[Fleur.XQueryX.pathExpr,["+e.XPathEvaluator._pathExprFormat(f,"")+"]]]]";break;case"|":r.startsWith("3.8.|8.31.catch")?("[Fleur.XQueryX.pathExpr,"===m.substr(0,24)&&(u=m.substr(86),m=u.substr(0,u.length-4)),"[Fleur.XQueryX.pathExpr,"===f.substr(0,24)?(n=f.substr(86),c=m+","+(f=n.substr(0,n.length-4))):c="[Fleur.XQueryX.catchErrorList,["+m+","+f.substr(f.indexOf("[Fleur.XQueryX.catchErrorList,[")+31)):c="[Fleur.XQueryX.unionOp,[[Fleur.XQueryX.firstOperand,["+m+"]],[Fleur.XQueryX.secondOperand,["+f+"]]]]";break;case":":c="[Fleur.XQueryX.mapConstructorEntry,[[Fleur.XQueryX.mapKeyExpr,["+m+"]],[Fleur.XQueryX.mapValueExpr,["+f+"]]]]";break;case"?":break;case"to":c="[Fleur.XQueryX.rangeSequenceExpr,[[Fleur.XQueryX.startExpr,["+m+"]],[Fleur.XQueryX.endExpr,["+f+"]]]]";break;case"~-":c="[Fleur.XQueryX.unaryMinusOp,[[Fleur.XQueryX.operand,["+f+"]]]]";break;case"~+":c="[Fleur.XQueryX.unaryPlusOp,[[Fleur.XQueryX.operand,["+f+"]]]]";break;case"allowing":c="[Fleur.XQueryX.typedVariableBinding,[[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]]]],[Fleur.XQueryX.allowingEmpty,[]]";break;case"at":c="[Fleur.XQueryX.typedVariableBinding,"===m.substr(0,36)?m+",[Fleur.XQueryX.positionalVariableBinding,["+f.substr(0,f.length-4).substr(44)+"]]":"[Fleur.XQueryX.typedVariableBinding,[[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]]]],[Fleur.XQueryX.positionalVariableBinding,["+f.substr(0,f.length-4).substr(44)+"]]";break;case"in":c="5.999.q"===r.substr(r.length-7)?"[Fleur.XQueryX.quantifiedExprInClause,[[Fleur.XQueryX.typedVariableBinding,[[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]]]],[Fleur.XQueryX.sourceExpr,["+f+"]]]]":"[Fleur.XQueryX.typedVariableBinding,"===m.substr(0,36)?"[Fleur.XQueryX.forClause,[[Fleur.XQueryX.forClauseItem,["+m+",[Fleur.XQueryX.forExpr,["+f+"]]]]]]":"[Fleur.XQueryX.forClause,[[Fleur.XQueryX.forClauseItem,[[Fleur.XQueryX.typedVariableBinding,[[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]]]],[Fleur.XQueryX.forExpr,["+f+"]]]]]]";break;case"as":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['last']]]]]]"===f?c="[Fleur.XQueryX.sourceExprUf,["+m+"]],[Fleur.XQueryX.insertInto,[[Fleur.XQueryX.insertAsLast,[]]]]":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['first']]]]]]"===f?c="[Fleur.XQueryX.sourceExprUf,["+m+"]],[Fleur.XQueryX.insertInto,[[Fleur.XQueryX.insertAsFirst,[]]]]":(l="[Fleur.XQueryX.atomicType,"+(n=f.substr(f.indexOf("[Fleur.XQueryX.nameTest,")+24)).substr(0,n.length-4),c="[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]],[Fleur.XQueryX.typeDeclaration,["+l+"]]");break;case":=":c=r.startsWith("5.18.:=11.30.group by")||r.startsWith("5.18.:=5.29.~,11.30.group by")?"[Fleur.XQueryX.groupingSpec,"===m.substr(0,28)?m.substr(0,m.length-2)+",[Fleur.XQueryX.groupVarInitialize,[[Fleur.XQueryX.varValue,["+f+"]]]]]]":"[Fleur.XQueryX.groupingSpec,[[Fleur.XQueryX.varName,["+m.substr(44,m.length-48)+"]],[Fleur.XQueryX.groupVarInitialize,[[Fleur.XQueryX.varValue,["+f+"]]]]]]":"[Fleur.XQueryX.varName,"===m.substr(0,23)?"[Fleur.XQueryX.letClause,[[Fleur.XQueryX.letClauseItem,[[Fleur.XQueryX.typedVariableBinding,["+m+"]],[Fleur.XQueryX.letExpr,["+f+"]]]]]]":"[Fleur.XQueryX.letClause,[[Fleur.XQueryX.letClauseItem,[[Fleur.XQueryX.typedVariableBinding,[[Fleur.XQueryX.varName,["+m.substr(0,m.length-4).substr(44)+"]]]],[Fleur.XQueryX.letExpr,["+f+"]]]]]]";break;case"return":c=m.substr(0,m.length-2)+",[Fleur.XQueryX.returnClause,["+f+"]]]]";break;case"satisfies":c=m.substr(0,m.length-2)+",[Fleur.XQueryX.predicateExpr,["+f+"]]]]";break;case"cast as":case"cast as?":d=p.charAt(7),c="[Fleur.XQueryX.castExpr,[[Fleur.XQueryX.argExpr,["+m+"]],[Fleur.XQueryX.singleType,["+(l="[Fleur.XQueryX.atomicType,"+(n=f.substr(f.indexOf("[Fleur.XQueryX.nameTest,")+24)).substr(0,n.length-4))+("?"===d?",[Fleur.XQueryX.optional,[]]":"")+"]]]]";break;case"castable as":case"castable as?":d=p.charAt(11),c="[Fleur.XQueryX.castableExpr,[[Fleur.XQueryX.argExpr,["+m+"]],[Fleur.XQueryX.singleType,["+(l="[Fleur.XQueryX.atomicType,"+(n=f.substr(f.indexOf("[Fleur.XQueryX.nameTest,")+24)).substr(0,n.length-4))+("?"===d?",[Fleur.XQueryX.optional,[]]":"")+"]]]]";break;case"treat as":case"treat as+":case"treat as?":case"treat as*":d=p.charAt(8),c="[Fleur.XQueryX.treatExpr,[[Fleur.XQueryX.argExpr,["+m+"]],[Fleur.XQueryX.sequenceType,["+(l=-1!==f.indexOf("[Fleur.XQueryX.nameTest,")?"[Fleur.XQueryX.atomicType,"+(n=f.substr(f.indexOf("[Fleur.XQueryX.nameTest,")+24)).substr(0,n.length-4):-1!==f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],")?(n=f.substr(f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],")+86)).substr(0,n.length-4):(n=f.substr(f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['attribute']],")+90)).substr(0,n.length-4))+(""!==d?",[Fleur.XQueryX.occurrenceIndicator,['"+d+"']]":"")+"]]]]";break;case"instance of":case"instance of+":case"instance of?":case"instance of*":d=p.charAt(11),c="[Fleur.XQueryX.instanceOfExpr,[[Fleur.XQueryX.argExpr,["+m+"]],[Fleur.XQueryX.sequenceType,["+(l=-1!==f.indexOf("[Fleur.XQueryX.nameTest,")?"[Fleur.XQueryX.atomicType,"+(n=f.substr(f.indexOf("[Fleur.XQueryX.nameTest,")+24)).substr(0,n.length-4):-1!==f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],")?(n=f.substr(f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],")+86)).substr(0,n.length-4):(n=f.substr(f.indexOf("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['attribute']],")+90)).substr(0,n.length-4))+(""!==d?",[Fleur.XQueryX.occurrenceIndicator,['"+d+"']]":"")+"]]]]";break;case"then":"[Fleur.XQueryX.functionCallExpr,[[Fleur.XQueryX.functionName,['if']],[Fleur.XQueryX.arguments,["===m.substr(0,95)&&(c="[Fleur.XQueryX.ifThenElseExpr,[[Fleur.XQueryX.ifClause,["+m.substr(0,m.length-4).substr(m.indexOf(",[Fleur.XQueryX.arguments,[")+27)+"]],[Fleur.XQueryX.thenClause,["+f+"]]]]"),s=-1;break;case"else":"[Fleur.XQueryX.ifThenElseExpr,"===m.substr(0,30)&&(c=m.substr(0,m.length-2)+",[Fleur.XQueryX.elseClause,["+f+"]]]]");break;case"catch":"[Fleur.XQueryX.tryCatchExpr,"===m.substr(0,28)&&(c=m.substr(0,m.length-2)+",[Fleur.XQueryX.catchClause,["+f+"]]]]");break;case"let":case"for":c=m+","+f;break;case"group by":c=m+",[Fleur.XQueryX.groupByClause,["+f+"]]";break;case"order by":c="[Fleur.XQueryX.orderBySpec,"===f.substr(0,27)?m+",[Fleur.XQueryX.orderByClause,["+f+"]]":m+",[Fleur.XQueryX.orderByClause,[[Fleur.XQueryX.orderBySpec,[[Fleur.XQueryX.orderByExpr,["+f+"]]]]]]";break;case"~~ascending":case"~~descending":c="[Fleur.XQueryX.orderBySpec,[[Fleur.XQueryX.orderByExpr,["+m+"]],[Fleur.XQueryX.orderModifier,[[Fleur.XQueryX.orderingKind,['"+p.substr(2)+"']]]]]]";break;case"empty":c="[Fleur.XQueryX.orderBySpec,"===m.substr(0,27)?m.endsWith(",[Fleur.XQueryX.orderModifier,[[Fleur.XQueryX.orderingKind,['ascending']]]]]]")||m.endsWith(",[Fleur.XQueryX.orderModifier,[[Fleur.XQueryX.orderingKind,['descending']]]]]]")?m.substr(0,m.length-4)+",[Fleur.XQueryX.emptyOrderingMode,['empty "+f.substr(112,f.length-119)+"']]]]]]":m.substr(0,m.length-2)+",[Fleur.XQueryX.orderModifier,[[Fleur.XQueryX.emptyOrderingMode,['empty "+f.substr(112,f.length-119)+"']]]]]]":"[Fleur.XQueryX.orderBySpec,[[Fleur.XQueryX.orderByExpr,["+m+"]],[Fleur.XQueryX.orderModifier,[[Fleur.XQueryX.emptyOrderingMode,['empty "+f.substr(112,f.length-119)+"']]]]]]";break;case"where":c=m+",[Fleur.XQueryX.whereClause,["+f+"]]";break;case"count":c=m+",[Fleur.XQueryX.countClause,["+f+"]]";break;case"nodes":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['delete']]]]]]"===m?c="[Fleur.XQueryX.deleteExpr,[[Fleur.XQueryX.targetExpr,["+f+"]]]]":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['insert']]]]]]"===m&&(c="[Fleur.XQueryX.insertExpr,["+f+"]]");break;case"node":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['delete']]]]]]"===m?c="[Fleur.XQueryX.deleteExpr,[[Fleur.XQueryX.targetExpr,["+f+"]]]]":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['insert']]]]]]"===m?c="[Fleur.XQueryX.insertExpr,["+f+"]]":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['replace']]]]]]"===m?c="[Fleur.XQueryX.replaceExpr,["+f+"]]":"[Fleur.XQueryX.replaceValue,[]]"===m&&(c="[Fleur.XQueryX.replaceExpr,[[Fleur.XQueryX.replaceValue,[]],"+f+"]]");break;case"into":c="[Fleur.XQueryX.sourceExprUf,"===m.substr(0,28)?m+",[Fleur.XQueryX.targetExpr,["+f+"]]":"[Fleur.XQueryX.sourceExprUf,["+m+"]],[Fleur.XQueryX.insertInto,[]],[Fleur.XQueryX.targetExpr,["+f+"]]";break;case"after":c="[Fleur.XQueryX.sourceExprUf,["+m+"]],[Fleur.XQueryX.insertAfter,[]],[Fleur.XQueryX.targetExpr,["+f+"]]";break;case"before":c="[Fleur.XQueryX.sourceExprUf,["+m+"]],[Fleur.XQueryX.insertBefore,[]],[Fleur.XQueryX.targetExpr,["+f+"]]";break;case"value":"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['replace']]]]]]"===m&&"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['of']]]]]]"===f&&(c="[Fleur.XQueryX.replaceValue,[]]");break;case"with":c="[Fleur.XQueryX.targetExpr,["+m+"]],[Fleur.XQueryX.replacementExpr,["+f+"]]";break;default:var g=e.XPathEvaluator._opcodes.substr(e.XPathEvaluator._opcodes.indexOf("."+p+";")+p.length+2);c="[Fleur.XQueryX."+g.substr(0,g.indexOf("."))+",[[Fleur.XQueryX.firstOperand,["+m+"]],[Fleur.XQueryX.secondOperand,["+f+"]]]]"}var x=c.length+"."+c+a.substr(i.length+1+parseInt(i,10));return e.XPathEvaluator._calc(x,r.substr(r.indexOf(".")+1).substr(parseInt(r.substr(0,r.indexOf(".")),10)),s)},e.XPathEvaluator._testFormat=function(e,t){var r,s,o,n;if(""===e)return"";-1!==e.indexOf(",[Fleur.XQueryX.pathExpr,[")?(r=e.substr(0,e.indexOf(",[Fleur.XQueryX.pathExpr,[")),s=",[Fleur.XQueryX.typeName,["+(n=(o=e.substr(e.indexOf(",[Fleur.XQueryX.pathExpr,[")+1)).substr(o.indexOf("[Fleur.XQueryX.nameTest,['")+25)).substr(0,n.length-6)+"]]"):(r=e,s="");var l=-1!==r.indexOf("[Fleur.XQueryX.nameTest,['")?r.substr(r.indexOf("[Fleur.XQueryX.nameTest,['")+25):"[Fleur.XQueryX.star,[]]";return"["+t+",["+("[Fleur.XQueryX.star,[]]"===l?l:"[Fleur.XQueryX.QName,["+l.substr(0,l.length-6)+"]]")+"]]"+s},e.XPathEvaluator._getNodeConstructor=function(t){for(var r,s,o,n,l,a,i,m,u,c,d,h,p,X,f,g,x,b,F,_=0,y=t.length,w=[],v="",E={},N={},A="",T="";_!==y;){for(s="",o=[],p=" ",d=t.charAt(_),f=0;("<"!==d||0!==f)&&_!==y;){if("{"===d)0===f&&""!==s&&(/\S/.test(s.replace("\\n","\n").replace("\\r","\r"))&&o.push([0,s]),s=""),0!==f&&(s+="{"),p===d?0===--f&&(s=(o.length>0?o.pop()[1]:"")+"{"):f++;else if("}"===d)1===f&&""!==s&&(o.push([1,s]),s=""),1!==f&&-1!==f&&(s+="}"),p===d?f++:f--;else if("&"===d){for(d=t.charAt(++_),n="";";"!==d&&_!==y;)n+=d,d=t.charAt(++_);if(_===y)break;"#"===n.charAt(0)?s+=String.fromCharCode(parseInt("x"===n.charAt(1).toLowerCase()?"0"+n.substr(1).toLowerCase():n.substr(1),"x"===n.charAt(1).toLowerCase()?16:10)):s+=e.encchars[n]}else s+=0===f&&"\n"===d?"\\n":0===f&&"\r"===d?"\\r":d;p=d,d=t.charAt(++_)}if(/\S/.test(s.replace("\\n","\n").replace("\\r","\r"))&&0===o.length?(A+=T+"[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+s.replace(/'/gm,"\\'")+"']]]]",T=","):o.length>0&&(/\S/.test(s.replace("\\n","\n").replace("\\r","\r"))&&o.push([0,s]),o.forEach(function(t){A+=T,0===t[0]?A+="[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+t[1].replace(/'/gm,"\\'")+"']]]]":A+=e.XPathEvaluator._xp2js(t[1],"",""),T=","})),_===y)break;if(_++,"!"===t.charAt(_)){if(_++,"--"===t.substr(_,2)){if(_+=2,(l=t.indexOf("--\x3e",_))!==_){for(-1===l&&(l=y),s="",r=_;r<l;)s+=t.charAt(r++);if(s=s.replace(/\x01/gm,"<"),F="[Fleur.XQueryX.computedCommentConstructor,[[Fleur.XQueryX.argExpr,[[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+s+"']]]]]]]]",""===A)return _+"."+F;if(A+=T+F,T=",",l===y)break;_=l}_+=3}else if("[CDATA["===t.substr(_,7)){if(_+=7,(l=t.indexOf("]]>",_))!==_){for(-1===l&&(l=y),s="",r=_;r<l;)s+=t.charAt(r++);if(""!==(s=s.replace(/\x01/gm,"<"))&&(A+=T+"[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+s+"']]]]",T=","),l===y)break;_=l}_+=3}}else if("?"===t.charAt(_)){for(_++,d=t.charAt(_++),a="";-1===" \t\n\r?".indexOf(d);)a+=d,d=t.charAt(_++);if(-1===(l=t.indexOf("?>",_-1))&&(l=y),"xml"===a.toLowerCase())throw Error("Invalid processing instruction");if(""!==a){for(s="",r=_;r<l;)s+=t.charAt(r++);if(s=s.replace(/\x01/gm,"<"),F="[Fleur.XQueryX.computedPIConstructor,[[Fleur.XQueryX.piTarget,['"+a+"']],[Fleur.XQueryX.piValueExpr,[[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+s+"']]]]]]]]",""===A)return String(l+2)+"."+F;A+=T+F,T=","}if(l===y)break;_=l+2}else if("/"===t.charAt(_)){for(_++,d=t.charAt(_++),a="";-1===" \t\n\r>".indexOf(d)&&_<=y;)a+=d,d=t.charAt(_++);if(a!==v)throw Error("Malformed XML fragment");if(A+=","!==T?"]]":"]]]]",T=",",1===w.length)return _+"."+A;if(v=w.pop(),0===(_=t.indexOf(">",_-1)+1))break}else{for(d=t.charAt(_++),a="";-1===" \t\n\r/>".indexOf(d)&&_<=y;)a+=d,d=t.charAt(_++);if(l=t.indexOf(">",_-1),""===a)throw Error("Invalid element name");for(x in N={},E)E.hasOwnProperty(x)&&(N[x]=E[x]);for(c={};_<=y;){for(;-1!==" \t\n\r".indexOf(d)&&_<=y;)d=t.charAt(_++);if("/"===d||">"===d||_===y)break;for(i="";-1===" \t\n\r=/<>".indexOf(d)&&_<=y;)i+=d,d=t.charAt(_++);if(""===i)throw new Error("Invalid character: "+d);for(;-1!==" \t\n\r".indexOf(d)&&_<=y;)d=t.charAt(_++);if("="===d){for(d=t.charAt(_++);-1!==" \t\n\r".indexOf(d)&&_<=y;)d=t.charAt(_++);if(m="",u=[],"'"===d||'"'===d){for(h=d,p=d,d=t.charAt(_++),X=t.charAt(_),f=0,m="",r=_;(d!==h||X===h||0!==f)&&_<=y;){if("{"===d)0===f&&""!==m&&(u.push([0,m]),m=""),p===d?0===--f&&(m=(u.length>0?u.pop()[1]:"")+"{"):f++;else if("}"===d)1===f&&""!==m&&(u.push([1,m]),m=""),p===d?0===++f&&(m+="}"):f--;else{if(d===X&&d===h){m+=d,p=d,d=t.charAt(++_),X=t.charAt(++_);continue}m+=d}p=d,d=X,X=t.charAt(++_)}""!==m&&u.push([0,m]),d=X,_++}else{for(;-1===" \t\n\r/>".indexOf(d)&&_<=y;)m+=d,d=t.charAt(_++);u=[[0,m]]}}else u=[[0,i]];x=-1!==(g=i.indexOf(":"))?i.substr(0,g):" ",b=-1!==g?i.substr(g+1):i,c[x]||(c[x]={}),c[x][b]=u,"xmlns"===x?N[b]=u:" "===x&&"xmlns"===b&&(N[" "]=u)}if(g=a.indexOf(":"),F=-1===g?T+"[Fleur.XQueryX.elementConstructor,[[Fleur.XQueryX.tagName,['"+a+"']]":T+"[Fleur.XQueryX.elementConstructor,[[Fleur.XQueryX.tagName,['"+a.substr(g+1)+"',[Fleur.XQueryX.prefix,['"+a.substr(0,g)+"']]]]",Object.keys(c).length){for(i in T=",[Fleur.XQueryX.attributeList,[",c[" "]&&c[" "].xmlns&&(F+=T+"[Fleur.XQueryX.namespaceDeclaration,[[Fleur.XQueryX.uri,["+(0!==c[" "].xmlns.length?"'"+c[" "].xmlns[0][1]+"'":"")+"]]]]",T=",",delete c[" "].xmlns),c.xmlns)c.xmlns.hasOwnProperty(i)&&(F+=T+"[Fleur.XQueryX.namespaceDeclaration,[[Fleur.XQueryX.prefixElt,['"+i+"']],[Fleur.XQueryX.uri,['"+c.xmlns[i][0][1]+"']]]]",T=",");for(x in delete c.xmlns,c)if(c.hasOwnProperty(x))for(i in c[x])c[x].hasOwnProperty(i)&&(F+=T+"[Fleur.XQueryX.attributeConstructor,[[Fleur.XQueryX.attributeName,['"+i+"'"," "!==x&&(F+=",[Fleur.XQueryX.prefix,['"+x+"']]"),F+="]],",0===c[x][i].length?(F+="[Fleur.XQueryX.attributeValue,[]]",T=","):1===c[x][i].length&&0===c[x][i][0][0]?(F+="[Fleur.XQueryX.attributeValue,['"+e.DocumentType.resolveEntities(null,c[x][i][0][1]).replace(/'/gm,"\\'").replace(/\x01/gm,"<")+"']]",T=","):(T="[Fleur.XQueryX.attributeValueExpr,[",c[x][i].forEach(function(t){F+=T,0===t[0]?F+="[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,['"+e.DocumentType.resolveEntities(null,t[1]).replace(/'/gm,"\\'")+"']]]]":F+=e.XPathEvaluator._xp2js(t[1],"",""),T=","}),F+="]]"),F+="]]");F+="]]"}if("/"!==t.charAt(_-1))T=",[Fleur.XQueryX.elementContent,[",w.push(v),v=a,A+=F;else{if(""===A)return String(_+1)+"."+F+"]]";A+=F+"]]",T=","}if(0===(_=l+1))break}}},e.XPathEvaluator._getPredParam=function(t,r,s,o,n,l,a,i){var m,u,c,d,h;s=s||0;var p=!1;if("?"===t){var X,f,g=e.XPathEvaluator._skipSpaces(r,0),x=r.charAt(g),b=r.substr(g+1);""!==x&&-1!=="0123456789".indexOf(x)?(X="[Fleur.XQueryX.lookup,[[Fleur.XQueryX.integerConstantExpr,[[Fleur.XQueryX.value,['"+(f=e.XPathEvaluator._getNumber(x+b)).replace(/e\+/,"e")+"']]]]]]",m=f.length+1+"."+X,c=f.length+1):""!==x&&-1!=="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(x)?(X="[Fleur.XQueryX.lookup,[[Fleur.XQueryX.NCName,['"+(f=e.XPathEvaluator._getName(x+b))+"']]]]",m=f.length+1+"."+X,c=f.length+1):"*"===x?(m="2.[Fleur.XQueryX.lookup,[[Fleur.XQueryX.star,[]]]]",c=2):"("===x&&(m=e.XPathEvaluator._xp2js(r.substr(g+1),"","5.999.("),c=r.length-parseInt(m.substr(0,m.indexOf(".")),10)+1+g,m=String(c)+".[Fleur.XQueryX.lookup,[[Fleur.XQueryX.expr,["+m.substr(m.indexOf(".")+1)+"]]]]")}else{var F="";if(-1!==o.indexOf("[Fleur.XQueryX.nameTest,['")){var _=o.substr(o.indexOf("[Fleur.XQueryX.nameTest,['")+25);F=_.substr(0,_.length-6)}"'function'"===F?(m="function",c=r.length):(m=e.XPathEvaluator._xp2js(r,"",0===s?"":"[Fleur.XQueryX.quantifiedExpr,[[Fleur.XQueryX.quantifier,"===o.substr(0,57)?"5.999.q":"5.999.("),c=r.length-parseInt(m.substr(0,m.indexOf(".")),10)+1)}if(-1!==m.indexOf("~~~~")){var y=m+"~#~#";throw u=c+"."+('"~~~~'+(y=(y=y.substr(0,y.indexOf("~#~#"))).replace('"',"")).substr(y.indexOf("~~~~")+4)+"in '"+r+"'~#~#\""),Error(y.substr(y.indexOf("~~~~")+4)+"in '"+r+"'")}if(""===m)throw u=c+"."+("\"~~~~Unrecognized expression '"+r+"'~#~#\""),Error("Unrecognized expression '"+r+"'");if("{"===t){var w=m.substr(m.indexOf(".")+1);if("[Fleur.XQueryX.arguments,"===w.substr(0,25)&&(w="[Fleur.XQueryX.sequenceExpr,"+w.substr(25)),"[Fleur.XQueryX.computedEntryConstructor,"===o.substr(0,40)||"[Fleur.XQueryX.computedElementConstructor,"===o.substr(0,42)||"[Fleur.XQueryX.computedAttributeConstructor,"===o.substr(0,44))u=c+"."+o.substr(0,o.length-2)+",[Fleur.XQueryX.valueExpr,["+w+"]]]]";else if("[Fleur.XQueryX.computedPIConstructor,"===o.substr(0,37))u=c+"."+o.substr(0,o.length-2)+",[Fleur.XQueryX.piValueExpr,["+w+"]]]]";else{var v=o.substr(o.indexOf("[Fleur.XQueryX.nameTest,['")+25);switch(v.substr(0,v.length-6)){case"'document'":u=c+".[Fleur.XQueryX.computedDocumentConstructor,[[Fleur.XQueryX.argExpr,["+w+"]]]]";break;case"'comment'":u=c+".[Fleur.XQueryX.computedCommentConstructor,[[Fleur.XQueryX.argExpr,["+w+"]]]]";break;case"'map'":u=c+".[Fleur.XQueryX.mapConstructor,["+("[Fleur.XQueryX.arguments,["===w.substr(0,26)?w.substr(26,w.length-28):w)+"]]";break;case"'array'":u=c+".[Fleur.XQueryX.arrayConstructor,["+("[Fleur.XQueryX.arguments,["===w.substr(0,26)?w.substr(26,w.length-28):w)+"]]";break;case"'entry'":u=c+".[Fleur.XQueryX.computedEntryConstructor,[[Fleur.XQueryX.tagNameExpr,["+w+"]]]]";break;case"'element'":u=c+".[Fleur.XQueryX.computedElementConstructor,[[Fleur.XQueryX.tagNameExpr,["+w+"]]]]";break;case"'attribute'":u=c+".[Fleur.XQueryX.computedAttributeConstructor,[[Fleur.XQueryX.tagNameExpr,["+w+"]]]]";break;case"'processing-instruction'":u=c+".[Fleur.XQueryX.computedPIConstructor,[[Fleur.XQueryX.piTargetExpr,["+w+"]]]]";break;case"'text'":u=c+".[Fleur.XQueryX.computedTextConstructor,[[Fleur.XQueryX.argExpr,["+w+"]]]]";break;case"'try'":u=c+".[Fleur.XQueryX.tryCatchExpr,[[Fleur.XQueryX.tryClause,["+w+"]]]]";break;default:(i.startsWith("8.31.catch")||i.startsWith("3.8.|8.31.catch"))&&(u=c+".[Fleur.XQueryX.catchErrorList,["+(h=(d=o.substr(86)).substr(0,d.length-4))+"]],[Fleur.XQueryX.catchExpr,["+w+"]]")}}}else if("("===t)if("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['"===o.substr(0,77)){var E,N,A=o.substr(o.indexOf("[Fleur.XQueryX.nameTest,['")+25),T=A.substr(0,A.length-6),C=m.substr(m.indexOf(".")+1),Q="[Fleur.XQueryX.arguments,["===C.substr(0,26)?C.substr(26,C.length-28):C;switch(T){case"'array'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['array']]]]"))+"[Fleur.XQueryX.arrayTest,[]]]]]]";break;case"'attribute'":u=c+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['attribute']],[Fleur.XQueryX.attributeTest,["+(N=e.XPathEvaluator._testFormat(Q,"Fleur.XQueryX.attributeName"))+"]]]]]]";break;case"'comment'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['comment']]]]"))+"[Fleur.XQueryX.commentTest,[]]]]]]";break;case"'document-node'":N=""!==Q?(E=Q.substr(Q.indexOf("[Fleur.XQueryX.elementTest,["))).substr(0,E.length-4):"",u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['document-node']]]]"))+"[Fleur.XQueryX.documentTest,["+N+"]]]]]]";break;case"'element'":N=e.XPathEvaluator._testFormat(Q,"Fleur.XQueryX.elementName"),u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['element']]]]"))+"[Fleur.XQueryX.elementTest,["+N+"]]]]]]";break;case"'entry'":u=c+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['entry']],[Fleur.XQueryX.entryTest,["+(N=e.XPathEvaluator._testFormat(Q,"Fleur.XQueryX.entryName"))+"]]]]]]";break;case"'function'":var O,D,M=-1,I=r,S=0,L="[Fleur.XQueryX.paramList,[",k=I.length;do{if(M=e.XPathEvaluator._skipSpaces(I,M+1),")"!==(t=I.charAt(M))){if("$"!==t)throw Error("Unexpected char at '"+I.substr(M)+"'");if(M++,t=I.charAt(M),b=I.substr(M+1),-1==="abcdefghijklmnopqrstuvwxyz".indexOf(t))throw Error("Unexpected char at '"+I.substr(M)+"'");var q=e.XPathEvaluator._getName(t+b);M=e.XPathEvaluator._skipSpaces(I,M+q.length),t=I.charAt(M);var R="";if(-1!=="abcdefghijklmnopqrstuvwxyz".indexOf(t)&&(b=I.substr(M+1),"as"===(X=e.XPathEvaluator._getName(t+b))&&(M=e.XPathEvaluator._skipSpaces(I,M+X.length),t=I.charAt(M),-1!=="abcdefghijklmnopqrstuvwxyz".indexOf(t)))){b=I.substr(M+1);var B=e.XPathEvaluator._getName(t+b);D=-1===(O=B.indexOf(":"))?"'"+B+"'":"'"+B.substr(O+1)+"',[Fleur.XQueryX.prefix,['"+B.substr(0,O)+"']]",t=I.charAt(M+B.length),R=",[Fleur.XQueryX.typeDeclaration,[[Fleur.XQueryX.atomicType,["+D+"]]",-1!=="?+*".indexOf(t)&&(R+=",[Fleur.XQueryX.occurrenceIndicator,['"+t+"']]",M++),R+="]]",M=e.XPathEvaluator._skipSpaces(I,M+B.length),t=I.charAt(M)}0!==S&&(L+=","),L+="[Fleur.XQueryX.param,[[Fleur.XQueryX.varName,['"+q+"']]"+R+"]]",S++}}while(","===t);if(")"!==t)throw Error("Unexpected char at '"+I.substr(M)+"'");if(L+="]]",M=e.XPathEvaluator._skipSpaces(I,M+1),"a"===(t=I.charAt(M))&&(b=I.substr(M+1),"as"===(X=e.XPathEvaluator._getName(t+b))&&(M=e.XPathEvaluator._skipSpaces(I,M+X.length),t=I.charAt(M),-1!=="abcdefghijklmnopqrstuvwxyz".indexOf(t)&&(b=I.substr(M+1),D=-1===(O=(B=e.XPathEvaluator._getName(t+b)).indexOf(":"))?"'"+B+"'":"'"+B.substr(O+1)+"',[Fleur.XQueryX.prefix,['"+B.substr(0,O)+"']]",t=I.charAt(M+B.length),L+=",[Fleur.XQueryX.typeDeclaration,[[Fleur.XQueryX.atomicType,["+D+"]]",-1!=="?+*".indexOf(t)&&(L+=",[Fleur.XQueryX.occurrenceIndicator,['"+t+"']]",M++),L+="]]",M=e.XPathEvaluator._skipSpaces(I,M+B.length),t=I.charAt(M)))),"{"!==t)throw Error("Unexpected char at '"+I.substr(M)+"'");L+=",[Fleur.XQueryX.functionBody,[";for(var P=1,V="";("}"!==t||0!==P)&&M!==k;)"{"===(t=I.charAt(++M))?P++:"}"===t&&P--,0!==P&&(V+=t);""!==V&&(L+=e.XPathEvaluator._xp2js(V,"","")),u=(c=M+2)+".[Fleur.XQueryX.inlineFunctionExpr,["+(L+="]]")+"]]";break;case"'item'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['item']]]]"))+"[Fleur.XQueryX.anyItemType,[]]]]]]";break;case"'map'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['map']]]]"))+"[Fleur.XQueryX.mapTest,[]]]]]]";break;case"'namespace-node'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['namespace-node']]]]"))+"[Fleur.XQueryX.namespaceTest,[]]]]]]";break;case"'node'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['node']]]]"))+"[Fleur.XQueryX.anyKindTest,[]]]]]]";break;case"'processing-instruction'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['processing-instruction']]]]"))+"[Fleur.XQueryX.piTest,["+(Q?"[Fleur.XQueryX.piTarget,["+Q.substr(57):"]]")+"]]]]";break;case"'schema-attribute'":N=(E=C.substr(C.indexOf("[Fleur.XQueryX.nameTest,['")+25)).substr(0,E.length-6),u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['schema-attribute']]]]"))+"[Fleur.XQueryX.schemaAttributeTest,["+N+"]]]]]]";break;case"'schema-element'":N=(E=C.substr(C.indexOf("[Fleur.XQueryX.nameTest,['")+25)).substr(0,E.length-6),u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['schema-element']]]]"))+"[Fleur.XQueryX.schemaElementTest,["+N+"]]]]]]";break;case"'text'":u=c+"."+o.substr(0,o.indexOf("[Fleur.XQueryX.nameTest,['text']]]]"))+"[Fleur.XQueryX.textTest,[]]]]]]";break;default:u=c+".[Fleur.XQueryX.functionCallExpr,[[Fleur.XQueryX.functionName,["+T+"]],[Fleur.XQueryX.arguments,["+Q+"]]]]"}}else if("[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,["===o.substr(0,77)){var U,j=!1;-1!==o.indexOf(",[Fleur.XQueryX.predicates,[")?(U=o.substr(0,o.indexOf(",[Fleur.XQueryX.predicates,[")).substr(77),h=(d=o.substr(o.indexOf(",[Fleur.XQueryX.predicates,[")+28)).substr(0,d.length-6)):-1!==o.indexOf(",[Fleur.XQueryX.lookup,[")?(j=!0,U=o.substr(0,o.indexOf(",[Fleur.XQueryX.lookup,[")).substr(77),h=(d=o.substr(o.indexOf(",[Fleur.XQueryX.lookup,[")+24)).substr(0,d.length-6)):(U=o.substr(0,o.length-8).substr(77),h=""),u=c+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,[[Fleur.XQueryX.dynamicFunctionInvocationExpr,[[Fleur.XQueryX.functionItem,["+U+(""===h?"":(j?",[Fleur.XQueryX.lookup,[":",[Fleur.XQueryX.predicates,[")+h+"]]")+(""===(Q="[Fleur.XQueryX.arguments,["===(C=m.substr(m.indexOf(".")+1)).substr(0,26)?C.substr(26,C.length-28):C)?"":",[Fleur.XQueryX.arguments,["+Q+"]]")+"]]]]]]]]"}else"[Fleur.XQueryX.namedFunctionRef,"===o.substr(0,32)?u=c+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,[[Fleur.XQueryX.dynamicFunctionInvocationExpr,[[Fleur.XQueryX.functionItem,["+o+"]]]]]]]]]]":"[Fleur.XQueryX.flworExpr,[]]"===o?(u=c+".[Fleur.XQueryX.flworExpr,["+(Q="[Fleur.XQueryX.arguments,["===(C=m.substr(m.indexOf(".")+1)).substr(0,26)?C.substr(26,C.length-28):C)+"]]",p=!0):"[Fleur.XQueryX.quantifiedExpr,[[Fleur.XQueryX.quantifier,"===o.substr(0,57)?(Q="[Fleur.XQueryX.arguments,["===(C=m.substr(m.indexOf(".")+1)).substr(0,26)?C.substr(26,C.length-28):C,u=c+"."+o.substr(0,o.length-2)+","+Q+"]]",p=!0):u=""!==o?c+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,[[Fleur.XQueryX.dynamicFunctionInvocationExpr,[[Fleur.XQueryX.functionItem,["+o+"]]"+(""===(Q="[Fleur.XQueryX.arguments,["===(C=m.substr(m.indexOf(".")+1)).substr(0,26)?C.substr(26,C.length-28):C)?"":",[Fleur.XQueryX.arguments,["+Q+"]]")+"]]]]]]]]":c+"."+m.substr(m.indexOf(".")+1);else"[Fleur.XQueryX.pathExpr,["!==o.substr(0,25)&&(o="[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.filterExpr,["+o+"]]]]]]"),"?"===t?(u=-1===o.indexOf(",[Fleur.XQueryX.predicates,[")?c+"."+o.substr(0,o.length-4)+","+m.substr(m.indexOf(".")+1)+"]]]]":c+"."+o.substr(0,l)+a.reduce(function(e,t){return e+",[Fleur.XQueryX.predicate,["+t+"]]"},"")+","+m.substr(m.indexOf(".")+1)+"]]]]",n=!1):-1===o.indexOf(",[Fleur.XQueryX.predicates,[")?(n&&((a=[]).push(m.substr(m.indexOf(".")+1)),l=o.length-4),u=c+"."+o.substr(0,o.length-4)+",["+(n?"Fleur.XQueryX.predicates":"Fleur.XQueryX.predicate")+",["+m.substr(m.indexOf(".")+1)+"]]]]]]"):(n&&a.push(m.substr(m.indexOf(".")+1)),u=c+"."+o.substr(0,o.length-6)+","+m.substr(m.indexOf(".")+1)+"]]]]]]");if(!p){var z=e.XPathEvaluator._skipSpaces(r,c-1),H=r.charAt(z);if("("===H||"["===H||"{"===H||"?"===H)return e.XPathEvaluator._getPredParam(H,r.substr(z+1),s+z+1,u.substr(u.indexOf(".")+1),n,l,a,i)}return s+c+"."+u.substr(u.indexOf(".")+1)},e.XPathEvaluator._getPredParams=function(t,r,s,o){var n=e.XPathEvaluator._skipSpaces(t,0);return"("===t.charAt(n)||"["===t.charAt(n)||"{"===t.charAt(n)||"?"===t.charAt(n)&&"13.6.instance of"!==o.substr(0,16)&&"9.3.cast as"!==o.substr(0,16)&&"13.4.castable as"!==o.substr(0,16)?e.XPathEvaluator._getPredParam(t.charAt(n),t.substr(n+1),r+n,s,!0,0,[],o):r+n+"."+s},e.XPathEvaluator._getStringLiteral=function(t){var r=e.XPathEvaluator._skipSpaces(t,0),s=t.substr(r+1);if("'"===t.charAt(r)){for(var o=s.indexOf("'"),n=s.substr(0,s.indexOf("'"));"'"===s.substr(o+1,1);){var l=s.substr(o+2);n+="\\'"+l.substr(0,l.indexOf("'")),o+=2+l.indexOf("'")}var a="'"+e.DocumentType.resolveEntities(null,n)+"'";return"''"===a&&(a=""),o+2+"."+a}if('"'===t.charAt(r)){for(var i=s.indexOf('"'),m=s.substr(0,s.indexOf('"'));'"'===s.substr(i+1,1);){var u=s.substr(i+2);m+='\\"'+u.substr(0,u.indexOf('"')),i+=2+u.indexOf('"')}var c='"'+e.DocumentType.resolveEntities(null,m)+'"';return'""'===c&&(c=""),i+2+"."+c}},e.XPathEvaluator._getNumber=function(t,r){if(r=r||"",""===t)return r;var s=t.charAt(0);return"E"===s&&(s="e"),-1!=="0123456789".indexOf(s)||("."===s||"e"===s)&&-1===r.indexOf(s)||("-"===s||"+"===s)&&r.endsWith("e")?e.XPathEvaluator._getNumber(t.substr(1),r+s):r},e.XPathEvaluator._xp2js=function(t,r,s){var o,n=e.XPathEvaluator._skipSpaces(t,0),l=t.charAt(n),a=t.substr(n+1),i="";if("."!==l||""!==a&&-1!=="0123456789".indexOf(a.charAt(0)))if(")"===l||"}"===l)i="0.";else if("/"===l){var m=e.XPathEvaluator._skipSpaces(a,0);i=(""===a.charAt(0)||-1==="/@*.(_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(a.charAt(m))?"1":"0")+".[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.rootExpr,[]]]]"}else if("@"===l)i=e.XPathEvaluator._getNameStep(a,1);else if("'"===l){for(var u=a.indexOf("'"),c=e.DocumentType.resolveEntities(null,a.substr(0,a.indexOf("'"))).replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t");"'"===a.substr(u+1,1);)o=a.substr(u+2),c+="\\'"+e.DocumentType.resolveEntities(null,o.substr(0,o.indexOf("'"))).replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"),u+=2+o.indexOf("'");var d="'"+c+"'";"''"===d&&(d=""),i=u+2+".[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,["+d+"]]]]"}else if('"'===l){for(var h=a.indexOf('"'),p=e.DocumentType.resolveEntities(null,a.substr(0,a.indexOf('"'))).replace(/[\\]/g,"\\\\").replace(/[\']/g,"\\'").replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t");'"'===a.substr(h+1,1);){var X=a.substr(h+2);p+='\\"'+e.DocumentType.resolveEntities(null,X.substr(0,X.indexOf('"'))).replace(/[\\]/g,"\\\\").replace(/[\']/g,"\\'").replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"),h+=2+X.indexOf('"')}var f='"'+p+'"';'""'===f&&(f=""),i=h+2+".[Fleur.XQueryX.stringConstantExpr,[[Fleur.XQueryX.value,["+f+"]]]]"}else if("("===l){var g=e.XPathEvaluator._skipSpaces(a,0);i=")"===a.charAt(g)?String(2+g)+".[Fleur.XQueryX.sequenceExpr,[]]":"0."}else if("-"===l||"+"===l)l="~"+l,i="0.";else if(""!==l&&-1!==".0123456789".indexOf(l)){var x=e.XPathEvaluator._getNumber(l+a);i=x.length+".["+(-1!==x.indexOf("e")?"Fleur.XQueryX.doubleConstantExpr":-1!==x.indexOf(".")?"Fleur.XQueryX.decimalConstantExpr":"Fleur.XQueryX.integerConstantExpr")+",[[Fleur.XQueryX.value,['"+x.replace(/e\+/,"e")+"']]]]"}else if("$"===l){var b,F=e.XPathEvaluator._getName(a),_=(-1===F.indexOf(":")?":":"")+F;b=s.startsWith("11.30.group by")||s.startsWith("5.29.~,11.30.group by")?"[Fleur.XQueryX.groupingSpec,[[Fleur.XQueryX.varName,[":"[Fleur.XQueryX.varRef,[[Fleur.XQueryX.name,[",i=F.length+1+"."+b+"'"+_.substr(_.indexOf(":")+1)+"'"+(":"===_.charAt(0)?"":",[Fleur.XQueryX.prefix,['"+_.substr(0,_.indexOf(":"))+"']]")+"]]]]"}else if("?"===l){var y,w=a.charAt(0);if(a=a.substr(1),""!==w&&-1!=="0123456789".indexOf(w))y=e.XPathEvaluator._getNumber(w+a),i=String(y.length)+".[Fleur.XQueryX.unaryLookup,[[Fleur.XQueryX.integerConstantExpr,[[Fleur.XQueryX.value,['"+y.replace(/e\+/,"e")+"']]]]]]";else if(""!==w&&-1!=="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(w))y=e.XPathEvaluator._getName(w+a),i=String(y.length)+".[Fleur.XQueryX.unaryLookup,[[Fleur.XQueryX.NCName,['"+y+"']]]]";else if("*"===w)i="1.[Fleur.XQueryX.unaryLookup,[[Fleur.XQueryX.star,[]]]]";else if("("===w){y=e.XPathEvaluator._xp2js(a,"","5.999.(");var v=a.length-parseInt(y.substr(0,y.indexOf(".")),10)+1;i=String(v)+".[Fleur.XQueryX.unaryLookup,[[Fleur.XQueryX.expr,["+y.substr(y.indexOf(".")+1)+"]]]]"}}else if(""!==l&&-1!=="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz*".indexOf(l)){var E=e.XPathEvaluator._getName(l+a);if(-1!==["element","attribute","entry","processing-instruction"].indexOf(E)){var N=e.XPathEvaluator._skipSpaces(t,n+E.length),A=t.charAt(N);if(""!==A&&-1!=="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(A)){var T=t.substr(N+1),C=e.XPathEvaluator._getName(A+T);switch(E){case"element":i=String(N-n+C.length)+".[Fleur.XQueryX.computedElementConstructor,[[Fleur.XQueryX.tagName,['"+C+"']]]]";break;case"attribute":i=String(N-n+C.length)+".[Fleur.XQueryX.computedAttributeConstructor,[[Fleur.XQueryX.tagName,['"+C+"']]]]";break;case"processing-instruction":i=String(N-n+C.length)+".[Fleur.XQueryX.computedPIConstructor,[[Fleur.XQueryX.piTarget,['"+C+"']]]]";break;case"entry":i=String(N-n+C.length)+".[Fleur.XQueryX.computedEntryConstructor,[[Fleur.XQueryX.tagName,['"+C+"']]]]"}}else i=e.XPathEvaluator._getNameStep(l+a,0)}else i=e.XPathEvaluator._getNameStep(l+a,0)}else{if("<"!==l)throw i="~~~~Unexpected char at '"+l+a+"'~#~#",Error("Unexpected char at '"+l+a+"'");i=e.XPathEvaluator._getNodeConstructor(l+a)}else i="."===a.charAt(0)?"2.[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['parent']],[Fleur.XQueryX.anyKindTest,[]]]]]]":"1.[Fleur.XQueryX.contextItemExpr,[]]";if(-1!==i.indexOf("~~~~"))return i;var Q=parseInt(i.substr(0,i.indexOf(".")),10),O=i.substr(i.indexOf(".")+1);o=0===Q?l+a:a.substr(Q-1),i=e.XPathEvaluator._getPredParams(o,Q,O,s),Q=parseInt(i.substr(0,i.indexOf(".")),10);var D=(O=i.substr(i.indexOf(".")+1)).length+"."+O+r,M=0===Q?l+a:a.substr(Q-1),I=e.XPathEvaluator._skipSpaces(M,0),S=M.charAt(I),L=M.substr(M.indexOf(S)),k="null",q="null";if(("ascending"===L.substr(0,9)||"descending"===L.substr(0,10))&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt("a"===S?9:10))){var R=e.XPathEvaluator._precedence.substr(e.XPathEvaluator._precedence.indexOf(".~~"+("a"===S?"ascending":"descending")+".")+("a"===S?13:14)),B=R.substr(R.indexOf("&")+1),P=B.substr(0,B.indexOf(".")),V=e.XPathEvaluator._calc(D,s,parseInt(P,10)),U=V.substr(0,V.indexOf("."));D=V.substr(V.indexOf(".")+1).substr(0,parseInt(U,10));var j=V.substr(U.length+1+parseInt(U,10)),z=j.substr(0,j.indexOf("."));s=P.length+1+("a"===S?11:12)+"."+P+".~~"+("a"===S?"ascending":"descending")+j.substr(j.indexOf(".")+1).substr(0,parseInt(z,10)),M=M.substr(I+("a"===S?9:10)),I=e.XPathEvaluator._skipSpaces(M,0),S=M.charAt(I),L=M.substr(M.indexOf(S))}if("13.6.instance of"===s.substr(0,16)?"+"!==S&&"?"!==S&&"*"!==S||(s="14.6.instance of"+S+s.substr(16),I=e.XPathEvaluator._skipSpaces(M,1),S=M.charAt(I),L=M.substr(M.indexOf(S))):"10.5.treat as"===s.substr(0,13)?"+"!==S&&"?"!==S&&"*"!==S||(s="11.5.treat as"+S+s.substr(13),I=e.XPathEvaluator._skipSpaces(M,1),S=M.charAt(I),L=M.substr(M.indexOf(S))):"9.3.cast as"===s.substr(0,11)?"?"===S&&(s="10.3.cast as"+S+s.substr(11),I=e.XPathEvaluator._skipSpaces(M,1),S=M.charAt(I),L=M.substr(M.indexOf(S))):"13.4.castable as"===s.substr(0,16)&&"?"===S&&(s="14.4.castable as"+S+s.substr(16),I=e.XPathEvaluator._skipSpaces(M,1),S=M.charAt(I),L=M.substr(M.indexOf(S))),""===S){var H=e.XPathEvaluator._calc(D,s,9999999),$=H.substr(H.indexOf(".")+1),W=$.substr(0,$.indexOf(".")),Y=H.substr(H.indexOf(".")+1);return Y.substr(Y.indexOf(".")+1).substr(0,parseInt(W,10))}if("]"===S||")"===S||"}"===S||"return"===L.substr(0,6)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(6))||"satisfies"===L.substr(0,9)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(9))){var Z=e.XPathEvaluator._calc(D,s,998),J=Z.substr(Z.indexOf(".")+1),G=J.substr(0,J.indexOf(".")),K=Z.substr(Z.indexOf(".")+1);return M.substr(M.indexOf(S)+1).length-("r"===S?5:"s"===S?8:0)+"."+K.substr(K.indexOf(".")+1).substr(0,parseInt(G,10))}if("$"===S){switch(O){case"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['for']]]]]]":O="[Fleur.XQueryX.flworExpr,[]]",k="for";break;case"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['let']]]]]]":O="[Fleur.XQueryX.flworExpr,[]]",k="let";break;case"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['every']]]]]]":O="[Fleur.XQueryX.quantifiedExpr,[[Fleur.XQueryX.quantifier,['every']]]]",k="every";break;case"[Fleur.XQueryX.pathExpr,[[Fleur.XQueryX.stepExpr,[[Fleur.XQueryX.xpathAxis,['child']],[Fleur.XQueryX.nameTest,['some']]]]]]":O="[Fleur.XQueryX.quantifiedExpr,[[Fleur.XQueryX.quantifier,['some']]]]",k="some"}"null"!==k&&(i=e.XPathEvaluator._getPredParams("("+M,Q,O),Q=parseInt(i.substr(0,i.indexOf(".")),10),D=(O=i.substr(i.indexOf(".")+1)).length+"."+O+r,k="for"===k||"let"===k?"return":"satisfies",L=(M=a.substr(Q-2-k.length)).substr(1))}else if("intersect"===L.substr(0,9)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(9)))k=L.substr(0,9);else if("allowing"===L.substr(0,8)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(8)))k=L.substr(0,8);else if("instance"===L.substr(0,8)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(8)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,8)+2),q="instance of";else if("castable"===L.substr(0,8)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(8)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,8)+2),q="castable as";else if("except"!==L.substr(0,6)&&"before"!==L.substr(0,6)||-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(6)))if("treat"===L.substr(0,5)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(5)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,5)+2),q="treat as";else if("group"===L.substr(0,5)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(5)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,5)+2),q="group by";else if("order"===L.substr(0,5)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(5)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,5)+2),q="order by";else if("union"!==L.substr(0,5)&&"every"!==L.substr(0,5)&&"nodes"!==L.substr(0,5)&&"after"!==L.substr(0,5)&&"value"!==L.substr(0,5)&&"count"!==L.substr(0,5)&&"where"!==L.substr(0,5)&&"empty"!==L.substr(0,5)&&"catch"!==L.substr(0,5)||-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(5)))if("cast"===L.substr(0,4)&&-1==="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(4)))k=L.substr(0,e.XPathEvaluator._skipSpaces(L,4)+2),q="cast as";else if("idiv"!==L.substr(0,4)&&"some"!==L.substr(0,4)&&"then"!==L.substr(0,4)&&"else"!==L.substr(0,4)&&"node"!==L.substr(0,4)&&"with"!==L.substr(0,4)&&"into"!==L.substr(0,4)||-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(4)))if("div"!==L.substr(0,3)&&"and"!==L.substr(0,3)&&"mod"!==L.substr(0,3)&&"let"!==L.substr(0,3)&&"for"!==L.substr(0,3)||-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(3)))if("or"!==L.substr(0,2)&&"eq"!==L.substr(0,2)&&"ne"!==L.substr(0,2)&&"lt"!==L.substr(0,2)&&"le"!==L.substr(0,2)&&"gt"!==L.substr(0,2)&&"ge"!==L.substr(0,2)&&"is"!==L.substr(0,2)&&"to"!==L.substr(0,2)&&"in"!==L.substr(0,2)&&"as"!==L.substr(0,2)&&"at"!==L.substr(0,2)&&"by"!==L.substr(0,2)||-1!=="_.-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz:".indexOf(L.charAt(2))){if("!="===L.substr(0,2)||"<="===L.substr(0,2)||">="===L.substr(0,2)||"<<"===L.substr(0,2)||">>"===L.substr(0,2)||"//"===L.substr(0,2)||"~+"===L.substr(0,2)||"~-"===L.substr(0,2)||":="===L.substr(0,2)||"||"===L.substr(0,2)||"!!"===L.substr(0,2))k=L.substr(0,2);else if(-1!=="+-*=|,;<>/!{:".indexOf(S)&&","===(k=S))if(s.startsWith("5.18.:=")||s.startsWith("11.30.group by")||s.startsWith("5.29.~,11.30.group by"))q="~,";else for(var ee=s;""!==ee;){if(ee.startsWith("11.30.order by")){q="~,";break}var te=parseInt(ee.substr(0,ee.indexOf(".")),10),re=ee.substring(ee.indexOf(".")+1,te);if(parseInt(re.substr(0,re.indexOf(".")),10)>30)break;ee=ee.substr(ee.indexOf(".")+1+te)}}else k=L.substr(0,2);else k=L.substr(0,3);else k=L.substr(0,4);else k=L.substr(0,5);else k=L.substr(0,6);if("null"!==k){var se=e.XPathEvaluator._precedence.substr(e.XPathEvaluator._precedence.indexOf("."+("null"!==q?q:k)+".")+("null"!==q?q:k).length+2),oe=se.substr(se.indexOf("&")+1),ne=oe.substr(0,oe.indexOf(".")),le=e.XPathEvaluator._calc(D,s,parseInt(ne,10)),ae=le.substr(0,le.indexOf(".")),ie=le.substr(le.indexOf(".")+1).substr(0,parseInt(ae,10)),me=le.substr(ae.length+1+parseInt(ae,10)),ue=me.substr(0,me.indexOf(".")),ce=me.substr(me.indexOf(".")+1).substr(0,parseInt(ue,10)),de=L.substr(k.length);return e.XPathEvaluator._xp2js(de,ie,ne.length+1+("null"!==q?q:k).length+"."+ne+"."+("null"!==q?q:k)+ce)}throw Error("Unknown operator at '"+M+"'")},e.XPathEvaluator._getVersion=function(t){var r,s,o=e.XPathEvaluator._skipSpaces(t,0),n=t.charAt(o),l=t.substr(o+1),a="";if(""===n||-1==="abcdefghijklmnopqrstuvwxyz".indexOf(n))return o+".";if("xquery"===(a=e.XPathEvaluator._getName(n+l))){var i=e.XPathEvaluator._skipSpaces(t,o+a.length);if(n=t.charAt(i),l=t.substr(i+1),""===n||-1==="abcdefghijklmnopqrstuvwxyz".indexOf(n))return o+".";if("version"===(a=e.XPathEvaluator._getName(n+l))){if(i=e.XPathEvaluator._skipSpaces(t,i+a.length),n=t.charAt(i),l=t.substr(i+1),"'"!==n&&'"'!==n)return o+".";var m=(a=e.XPathEvaluator._getStringLiteral(n+l)).substr(0,a.indexOf("."));if(r=a.substr(m.length+1),i=e.XPathEvaluator._skipSpaces(t,i+parseInt(m,10)),";"===(n=t.charAt(i)))return i+1+".[Fleur.XQueryX.versionDecl,[[Fleur.XQueryX.version,["+r+"]]]],";l=t.substr(i+1),a=e.XPathEvaluator._getName(n+l)}if("encoding"===a){if(i=e.XPathEvaluator._skipSpaces(t,i+a.length),n=t.charAt(i),l=t.substr(i+1),"'"!==n&&'"'!==n)return o+".";var u=(a=e.XPathEvaluator._getStringLiteral(n+l)).substr(0,a.indexOf("."));if(s=a.substr(u.length+1),i=e.XPathEvaluator._skipSpaces(t,i+parseInt(u,10)),";"===(n=t.charAt(i)))return i+1+".[Fleur.XQueryX.versionDecl,["+(r?"[Fleur.XQueryX.version,["+r+"]],":"")+"[Fleur.XQueryX.encoding,["+s+"]]]],"}}return o+"."}}("undefined"==typeof exports?this.Fleur={}:exports));var XsltForms_xpathAxis={ANCESTOR_OR_SELF:"ancestor-or-self",ANCESTOR:"ancestor",ATTRIBUTE:"attribute",CHILD:"child",DESCENDANT_OR_SELF:"descendant-or-self",DESCENDANT:"descendant",ENTRY:"entry",FOLLOWING_SIBLING:"following-sibling",FOLLOWING:"following",NAMESPACE:"namespace",PARENT:"parent",PRECEDING_SIBLING:"preceding-sibling",PRECEDING:"preceding",SELF:"self"},XsltForms_context;console.info('XSLTForms 1.6 (663), XForms 1.1+ Engine, copyright (C) 2022 agenceXML - Alain Couthures, contact at xsltforms@agencexml.com\nYou can use fleur() Javascript function to evaluate an expression. Example: fleur("instance()")');var XsltForms_globals={fileVersion:"1.6",fileVersionNumber:663,language:"navigator",debugMode:!1,debugButtons:[{label:"Profiler",name:"profiler"},{label:"Trace Log",name:"tracelog"}],cont:0,ready:!1,body:null,models:[],changes:[],newChanges:[],building:!1,posibleBlur:!1,bindErrMsgs:[],transformtime:"unknown",htmltime:0,creatingtime:0,inittime:0,refreshtime:0,refreshcount:0,validationError:!0,counters:{component:0,group:0,input:0,item:0,itemset:0,label:0,output:0,repeat:0,select:0,trigger:0,upload:0,xvar:0},nbsubforms:0,componentLoads:[],jslibraries:{},htmlversion:"4",debugging:function(){if(8===document.documentElement.childNodes[0].nodeType||XsltForms_browser.isIE&&document.documentElement.childNodes[0].childNodes[1]&&8===document.documentElement.childNodes[0].childNodes[1].nodeType){XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0];this.debugMode?XsltForms_debugger.open():XsltForms_debugger.close()}},xmlrequest:function(e,t,r){if("string"!=typeof e)return'<error xmlns="">Invalid method "'+e+'"</error>';var s,o;switch(e=e.toLowerCase()){case"get":switch(t){case"xsltforms-profiler":return XsltForms_globals.profiling_data();case"xsltforms-tracelog":try{return XsltForms_browser.saveDoc(XsltForms_browser.debugConsole.doc_,"application/xml",!0)}catch(e){return XsltForms_browser.debugConsole.write("ERROR: Could not open xsltforms-tracelog "+e.message),'<error xmlns="">Could not open xsltforms-tracelog "'+e.message+'"</error>'}break;default:var n=t.indexOf("/");if(-1===n)return(s=document.getElementById(t))?XsltForms_browser.saveDoc(s.xfElement.doc,"application/xml",!0):'<error xmlns="">Unknown resource "'+t+'" for method "'+e+'"</error>';var l=t.substr(n+1);if(!(s=document.getElementById(t.substr(0,n))))return'<error xmlns="">Unknown resource "'+t+'" for method "'+e+'"</error>';var a=s.xfElement.archive[l];return a?(a.doc||(a.doc=XsltForms_browser.createXMLDocument("<dummy/>"),o=XsltForms_browser.getDocMeta(s.xfElement.doc,"model"),XsltForms_browser.loadDoc(a.doc,XsltForms_browser.utf8decode(zip_inflate(a.compressedFileData))),XsltForms_browser.setDocMeta(a.doc,"instance",idRef),XsltForms_browser.setDocMeta(a.doc,"model",o)),XsltForms_browser.saveDoc(a.doc,"application/xml",!0)):'<error xmlns="">Unknown resource "'+t+'" for method "'+e+'"</error>'}case"put":return(s=document.getElementById(t))?(s.xfElement.setDoc(r,!1,!0),o=XsltForms_browser.getDocMeta(s.xfElement.doc,"model"),XsltForms_globals.addChange(o),XsltForms_globals.closeChanges(),'<ok xmlns=""/>'):'<error xmlns="">Unknown resource "'+t+'" for method "'+e+'"</error>';default:return'<error xmlns="">Unknown method "'+e+'"</error>'}},countdesc:function(e){var t=0;if(e.attributes&&(t=e.attributes.length),e.childNodes){t+=e.childNodes.length;for(var r=0,s=e.childNodes.length;r<s;r++)t+=XsltForms_globals.countdesc(e.childNodes[r])}return t},profiling_data:function(){var e='<xsltforms:dump xmlns:xsltforms="http://www.agencexml.com/xsltforms">';e+="<xsltforms:date>"+XsltForms_browser.i18n.format(new Date,"yyyy-MM-ddThh:mm:ssz",!0)+"</xsltforms:date>",e+="<xsltforms:location>"+XsltForms_browser.escape(window.location.href)+"</xsltforms:location>",e+="<xsltforms:appcodename>"+navigator.appCodeName+"</xsltforms:appcodename>",e+="<xsltforms:appname>"+navigator.appName+"</xsltforms:appname>",e+="<xsltforms:appversion>"+navigator.appVersion+"</xsltforms:appversion>",e+="<xsltforms:platform>"+navigator.platform+"</xsltforms:platform>",e+="<xsltforms:useragent>"+navigator.userAgent+"</xsltforms:useragent>",e+="<xsltforms:xsltengine>"+this.xsltEngine+"</xsltforms:xsltengine>";e+="<xsltforms:xsltengine2>"+XsltForms_browser.transformText("<dummy/>","<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\">  <xsl:output method=\"xml\"/>  <xsl:template match=\"/\">    <xsl:variable name=\"version\">      <xsl:if test=\"system-property('xsl:vendor')='Microsoft'\">        <xsl:value-of select=\"system-property('msxsl:version')\"/>      </xsl:if>    </xsl:variable>    <properties><xsl:value-of select=\"concat('|',system-property('xsl:vendor'),' ',system-property('xsl:vendor-url'),' ',$version,'|')\"/></properties>  </xsl:template></xsl:stylesheet>",!0).split("|")[1]+"</xsltforms:xsltengine2>",e+="<xsltforms:version>"+this.fileVersion+"</xsltforms:version>",e+="<xsltforms:instances>";for(var t=0,r=XsltForms_globals.models.length;t<r;t++)if(XsltForms_globals.models[t].element.id!==XsltForms_browser.idPf+"model-config")for(var s in XsltForms_globals.models[t].instances)if(XsltForms_globals.models[t].instances.hasOwnProperty(s)){var o=1+XsltForms_globals.countdesc(XsltForms_globals.models[t].instances[s].doc);if(e+='<xsltforms:instance id="'+s+'">'+o+"</xsltforms:instance>",XsltForms_globals.models[t].instances[s].archive)for(var n in XsltForms_globals.models[t].instances[s].archive)XsltForms_globals.models[t].instances[s].archive.hasOwnProperty(n)&&(XsltForms_globals.models[t].instances[s].archive[n].doc||(XsltForms_globals.models[t].instances[s].archive[n].doc=XsltForms_browser.createXMLDocument("<dummy/>"),XsltForms_browser.loadDoc(XsltForms_globals.models[t].instances[s].archive[n].doc,XsltForms_browser.utf8decode(zip_inflate(XsltForms_globals.models[t].instances[s].archive[n].compressedFileData))),XsltForms_browser.setDocMeta(XsltForms_globals.models[t].instances[s].archive[n].doc,"instance",s),XsltForms_browser.setDocMeta(XsltForms_globals.models[t].instances[s].archive[n].doc,"model",t)),e+='<xsltforms:instance id="'+s+"/"+n+'">'+(o=1+XsltForms_globals.countdesc(XsltForms_globals.models[t].instances[s].archive[n].doc))+"</xsltforms:instance>");0}e+="</xsltforms:instances>",e+="<xsltforms:controls>",e+='<xsltforms:control type="group">'+XsltForms_globals.counters.group+"</xsltforms:control>",e+='<xsltforms:control type="input">'+XsltForms_globals.counters.input+"</xsltforms:control>",e+='<xsltforms:control type="item">'+XsltForms_globals.counters.item+"</xsltforms:control>",e+='<xsltforms:control type="itemset">'+XsltForms_globals.counters.itemset+"</xsltforms:control>",e+='<xsltforms:control type="output">'+XsltForms_globals.counters.output+"</xsltforms:control>",e+='<xsltforms:control type="repeat">'+XsltForms_globals.counters.repeat+"</xsltforms:control>",e+='<xsltforms:control type="select">'+XsltForms_globals.counters.select+"</xsltforms:control>",e+='<xsltforms:control type="trigger">'+XsltForms_globals.counters.trigger+"</xsltforms:control>",e+="</xsltforms:controls>";for(var l=/<\w/g,a=0,i=document.documentElement.innerHTML;l.exec(i);)a++;e+="<xsltforms:htmlelements>"+a+"</xsltforms:htmlelements>",e+="<xsltforms:transformtime>"+this.transformtime+"</xsltforms:transformtime>",e+="<xsltforms:htmltime>"+this.htmltime+"</xsltforms:htmltime>",e+="<xsltforms:creatingtime>"+this.creatingtime+"</xsltforms:creatingtime>",e+="<xsltforms:inittime>"+this.inittime+"</xsltforms:inittime>",e+="<xsltforms:refreshcount>"+this.refreshcount+"</xsltforms:refreshcount>",e+="<xsltforms:refreshtime>"+this.refreshtime+"</xsltforms:refreshtime>";var m=[];for(var u in XsltForms_xpath.expressions)XsltForms_xpath.expressions.hasOwnProperty(u)&&XsltForms_xpath.expressions[u]&&(m[m.length]={expr:u,evaltime:XsltForms_xpath.expressions[u].evaltime});m.sort(function(e,t){return t.evaltime-e.evaltime});var c=0;if(e+="<xsltforms:xpaths>",m.length>0){for(var d=0;d<m.length&&d<20;d++)e+='<xsltforms:xpath expr="'+XsltForms_browser.escape(m[d].expr).replace(/\"/g,"&quot;")+'">'+m[d].evaltime+"</xsltforms:xpath>",c+=m[d].evaltime;if(m.length>20){for(var h=0,p=20;p<m.length;p++)h+=m[p].evaltime;e+='<xsltforms:others count="'+(m.length-20)+'">'+h+"</xsltforms:others>",c+=h}e+="<xsltforms:total>"+c+"</xsltforms:total>"}return e+="</xsltforms:xpaths>",e+="</xsltforms:dump>"},opentab:function(e){var t=XsltForms_browser.openRequest("GET",XsltForms_browser.debugROOT+"xsltforms_"+e+(XsltForms_browser.debugROOT===XsltForms_browser.ROOT?".xhtml":".xml"),!1);t.overrideMimeType&&t.overrideMimeType("application/xml");try{t.send(null)}catch(t){alert("File not found: "+XsltForms_browser.debugROOT+"xsltforms_"+e+(XsltForms_browser.debugROOT===XsltForms_browser.ROOT?".xhtml":".xml"))}if(200===t.status||0===t.status){var r="";try{r=XsltForms_browser.transformText(t.responseText,XsltForms_browser.xslROOT+"xsltforms.xsl",!1,"xsltforms_debug","false","baseuri",XsltForms_browser.xslROOT)}catch(e){XsltForms_browser.debugConsole.write("ERROR: Could not get contents of xsltforms_debug - "+e.message)}'<?xml version="1.0"?>'===r.substring(0,21)&&(r='<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'+r.substring(21));var s=window.open("about:blank","_blank");s.document.write(r),s.document.close()}else XsltForms_browser.debugConsole.write("File not found ("+t.status+"): "+XsltForms_browser.ROOT+"xsltforms_"+e+".xhtml")},init:function(){XsltForms_browser.setValue(document.getElementById("xsltforms-status-panel"),XsltForms_browser.i18n.get("status")),XsltForms_globals.htmlversion=XsltForms_browser.i18n.get("html");var amval=XsltForms_browser.i18n.get("format.time.AM"),pmval=XsltForms_browser.i18n.get("format.time.PM"),now=XsltForms_browser.isEdge||XsltForms_browser.isIE||XsltForms_browser.isChrome?(new Date).toLocaleTimeString():(new Date).toLocaleTimeString(navigator.language);XsltForms_globals.AMPM=""!==amval&&(-1!==now.indexOf(amval)||-1!==now.indexOf(pmval));var b=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0];XsltForms_globals.body=b,document.onhelp=function(){return!1},window.onhelp=function(){return!1},XsltForms_browser.events.attach(document,"keydown",function(e){if(112===e.keyCode)return XsltForms_globals.debugMode=!XsltForms_globals.debugMode,XsltForms_globals.debugging(),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):e.cancelBubble=!0,!1},!1),XsltForms_browser.events.attach(b,"click",function(e){for(var t=XsltForms_browser.events.getTarget(e),r=t;r&&r.nodeType===Fleur.Node.ELEMENT_NODE;)"xforms-repeat-item"!==r.localName.toLowerCase()&&"repeat-item"!==r.getAttribute("xforms-name")||XsltForms_repeat.selectItem(r),r=r.parentNode;for(r=t;r&&r.nodeType===Fleur.Node.ELEMENT_NODE;){var s=r.xfElement;if(s){if(void 0!==r.node&&r.node&&s.focus&&!XsltForms_browser.getBoolMeta(r.node,"readonly")){var o=t.nodeName.toLowerCase();s.focus("input"===o||"textarea"===o,e)}if(s.click&&s.input&&!s.input.disabled){s.click(t,e);break}}r=r.parentNode}},!1),XsltForms_browser.events.onunload=function(){XsltForms_globals.close()},XsltForms_globals.openAction("XsltForms_globals.init"),XsltForms_xmlevents.dispatchList(XsltForms_globals.models,"xforms-model-construct");for(var i=0,l=XsltForms_globals.componentLoads.length;i<l;i++)eval(XsltForms_globals.componentLoads[i]);XsltForms_globals.refresh(),XsltForms_globals.closeAction("XsltForms_globals.init"),XsltForms_globals.ready=!0,XsltForms_browser.dialog.hide("xsltforms-status-panel",!1)},close:function(){if(XsltForms_globals.body){this.openAction("XsltForms_globals.close");for(var e=0,t=XsltForms_listener.destructs.length;e<t;e++)XsltForms_listener.destructs[e].callback({target:XsltForms_listener.destructs[e].observer});this.closeAction("XsltForms_globals.close"),XsltForms_idManager.clear(),this.defaultModel=null,this.changes=[],this.models=[],this.body=null,this.cont=0,this.dispose(document.documentElement),XsltForms_listener.destructs=[],XsltForms_schema.all={},XsltForms_typeDefs.initAll(),XsltForms_calendar.INSTANCE=null,this.ready=!1,this.building=!1,XsltForms_globals.posibleBlur=!1}},openActions:[],openAction:function(e){this.openActions.push(e),0==this.cont++&&XsltForms_browser.debugConsole.clear()},closeAction:function(e){this.openActions.pop();1===this.cont&&this.closeChanges(),this.cont--},closeChanges:function(e){for(var t=this.changes,r=0,s=t.length;r<s;r++){var o=t[r];o&&o.instances&&(o.rebuilded?XsltForms_xmlevents.dispatch(o,"xforms-rebuild"):XsltForms_xmlevents.dispatch(o,"xforms-recalculate"))}(t.length>0||e)&&(this.refresh(),this.changes.length>0&&this.closeChanges())},error:function(e,t,r,s){throw XsltForms_browser.dialog.hide("xsltforms-status-panel",!1),XsltForms_browser.setValue(document.getElementById("xsltforms-status-panel"),r),XsltForms_browser.dialog.show("xsltforms-status-panel",null,!1),e&&XsltForms_xmlevents.dispatch(e,t),s&&(r+=" : "+s),XsltForms_browser.debugConsole.write("Error: "+r),t},refresh:function(){var e=new Date;this.building=!0,this.build(this.body,this.defaultModel.getInstanceDocument()?this.defaultModel.getInstanceDocument().documentElement:null,!0),this.newChanges.length>0?(this.changes=this.newChanges,this.newChanges=[]):this.changes.length=0;for(var t=0,r=this.models.length;t<r;t++){var s=this.models[t];s.newNodesChanged.length>0||s.newRebuilded?(s.nodesChanged=s.newNodesChanged,s.newNodesChanged=[],s.rebuilded=s.newRebuilded,s.newRebuilded=!1,XsltForms_globals.ready&&XsltForms_xmlevents.dispatch(s,"xforms-recalculate")):(s.nodesChanged.length=0,s.rebuilded=!1)}this.building=!1,this.bindErrMsgs.length&&(this.error(this.defaultModel,"xforms-binding-exception","Binding Errors: \n"+this.bindErrMsgs.join("\n  ")),this.bindErrMsgs=[]);var o=new Date;this.refreshtime+=o-e,this.refreshcount++},build:function(e,t,r,s){if(e.nodeType!==Fleur.Node.ELEMENT_NODE||"xsltforms-console"===e.id||!1===e.hasXFElement)return{ctx:t,hasXFElement:!1};var o=e.xfElement,n=Boolean(o);if("true"===e.getAttribute("mixedrepeat")&&(r=e.selected),o)if(o instanceof Array)for(var l=0,a=o.length;l<a;l++)o[l].build(t,s);else o.build(t,s),o.isRepeat&&o.refresh(r);var i=e.node||t,m=e.children||e.childNodes,u=e.selected;if(void 0!==u&&(r=u),!o||o instanceof Array||!o.isRepeat||o.nodes.length>0){for(var c=1,d=1,h=[],p=0,X=0,f=0;f<m.length&&this.building;f++){var g;if(m[f].nodeType!==Fleur.Node.TEXT_NODE)if(1!==d?(g=h[X],d--):0!==p?(p--,g=h[++X],d=c):g=i,!m[f].getAttribute("cloned")){var x=m[f],b=this.build(m[f],g,r,s);m[f]!==x?f--:(m[f].xfElement&&m[f].xfElement.nbsiblings&&m[f].xfElement.nbsiblings>1&&(c=m[f].xfElement.nbsiblings,p=(h=m[f].xfElement.nodes).length,X=0,d=c),n=b.hasXFElement||n)}}e.varScope=null}if(this.building){if(o instanceof Array)for(var F=0,_=o.length;F<_;F++)o[F]&&o[F].changed&&(o[F].refresh(r),o[F].changed=!1);else o&&o.changed&&(o.refresh(r),o.changed=!1);e.hasXFElement||(e.hasXFElement=n)}return{ctx:i,hasXFElement:n}},addChange:function(e){var t=this.building?this.newChanges:this.changes;XsltForms_browser.inArray(e,t)||t.push(e)},dispose:function(e){if(e.nodeType===Fleur.Node.ELEMENT_NODE&&"xsltforms-console"!==e.id){var t=e.xfElement;t&&void 0!==t.dispose&&t.dispose(),e.listeners=null,e.node=null,e.hasXFElement=null;for(var r=e.childNodes,s=0;s<r.length;s++)this.dispose(r[s])}},blur:function(e){if((e||this.posibleBlur)&&this.focus){if(this.focus.element){this.openAction("XsltForms_globals.blur"),XsltForms_xmlevents.dispatch(this.focus,"DOMFocusOut"),this.focus.element.removeAttribute("xf-focus");try{this.focus.blur()}catch(e){}this.closeAction("XsltForms_globals.blur")}this.posibleBlur=!1,this.focus=null}},add32:function(e,t){var r=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(r>>>16)&65535)<<16|65535&r},str2msg:function(e){var t,r={length:e.length,arr:[]};for(t=0;t<r.length;t++)r.arr[t>>2]|=(255&e.charCodeAt(t))<<(3-t%4<<3);return r},crypto:function(e,t){var r,s,o,n,l,a,i,m,u,c,d,h,p,X,f,g=XsltForms_globals.add32;switch(t){case"SHA-1":X=8*e.length,e.arr[X>>5]|=128<<24-X%32,e.arr[15+(X+65>>9<<4)]=X,p=e.arr.length,f=[],r=[1732584193,4023233417,2562383102,271733878,3285377520];var x=function(e,t){return e<<t|e>>>32-t};for(s=0;s<p;s+=16){for(n=r[0],l=r[1],a=r[2],i=r[3],m=r[4],o=0;o<20;o++)h=g(g(g(g(x(n,5),l&a^~l&i),m),1518500249),f[o]=o<16?e.arr[o+s]:x(f[o-3]^f[o-8]^f[o-14]^f[o-16],1)),m=i,i=a,a=x(l,30),l=n,n=h;for(o=20;o<40;o++)h=g(g(g(g(x(n,5),l^a^i),m),1859775393),f[o]=x(f[o-3]^f[o-8]^f[o-14]^f[o-16],1)),m=i,i=a,a=x(l,30),l=n,n=h;for(o=40;o<60;o++)h=g(g(g(g(x(n,5),l&a^l&i^a&i),m),2400959708),f[o]=x(f[o-3]^f[o-8]^f[o-14]^f[o-16],1)),m=i,i=a,a=x(l,30),l=n,n=h;for(o=60;o<80;o++)h=g(g(g(g(x(n,5),l^a^i),m),3395469782),f[o]=x(f[o-3]^f[o-8]^f[o-14]^f[o-16],1)),m=i,i=a,a=x(l,30),l=n,n=h;r[0]=g(n,r[0]),r[1]=g(l,r[1]),r[2]=g(a,r[2]),r[3]=g(i,r[3]),r[4]=g(m,r[4])}return{length:20,arr:r};case"MD5":var b=e.length,F=function(e,t,r,s,o,n){return t=g(g(t,e),g(s,n)),g(t<<o|t>>>32-o,r)},_=function(e,t,r,s,o,n,l){return F(t&r|~t&s,e,t,o,n,l)},y=function(e,t,r,s,o,n,l){return F(t&s|r&~s,e,t,o,n,l)},w=function(e,t,r,s,o,n,l){return F(t^r^s,e,t,o,n,l)},v=function(e,t,r,s,o,n,l){return F(r^(t|~s),e,t,o,n,l)},E=function(e,t){n=e[0],l=e[1],a=e[2],i=e[3],n=_(n,l,a,i,t[0],7,-680876936),i=_(i,n,l,a,t[1],12,-389564586),a=_(a,i,n,l,t[2],17,606105819),l=_(l,a,i,n,t[3],22,-1044525330),n=_(n,l,a,i,t[4],7,-176418897),i=_(i,n,l,a,t[5],12,1200080426),a=_(a,i,n,l,t[6],17,-1473231341),l=_(l,a,i,n,t[7],22,-45705983),n=_(n,l,a,i,t[8],7,1770035416),i=_(i,n,l,a,t[9],12,-1958414417),a=_(a,i,n,l,t[10],17,-42063),l=_(l,a,i,n,t[11],22,-1990404162),n=_(n,l,a,i,t[12],7,1804603682),i=_(i,n,l,a,t[13],12,-40341101),a=_(a,i,n,l,t[14],17,-1502002290),l=_(l,a,i,n,t[15],22,1236535329),n=y(n,l,a,i,t[1],5,-165796510),i=y(i,n,l,a,t[6],9,-1069501632),a=y(a,i,n,l,t[11],14,643717713),l=y(l,a,i,n,t[0],20,-373897302),n=y(n,l,a,i,t[5],5,-701558691),i=y(i,n,l,a,t[10],9,38016083),a=y(a,i,n,l,t[15],14,-660478335),l=y(l,a,i,n,t[4],20,-405537848),n=y(n,l,a,i,t[9],5,568446438),i=y(i,n,l,a,t[14],9,-1019803690),a=y(a,i,n,l,t[3],14,-187363961),l=y(l,a,i,n,t[8],20,1163531501),n=y(n,l,a,i,t[13],5,-1444681467),i=y(i,n,l,a,t[2],9,-51403784),a=y(a,i,n,l,t[7],14,1735328473),l=y(l,a,i,n,t[12],20,-1926607734),n=w(n,l,a,i,t[5],4,-378558),i=w(i,n,l,a,t[8],11,-2022574463),a=w(a,i,n,l,t[11],16,1839030562),l=w(l,a,i,n,t[14],23,-35309556),n=w(n,l,a,i,t[1],4,-1530992060),i=w(i,n,l,a,t[4],11,1272893353),a=w(a,i,n,l,t[7],16,-155497632),l=w(l,a,i,n,t[10],23,-1094730640),n=w(n,l,a,i,t[13],4,681279174),i=w(i,n,l,a,t[0],11,-358537222),a=w(a,i,n,l,t[3],16,-722521979),l=w(l,a,i,n,t[6],23,76029189),n=w(n,l,a,i,t[9],4,-640364487),i=w(i,n,l,a,t[12],11,-421815835),a=w(a,i,n,l,t[15],16,530742520),l=w(l,a,i,n,t[2],23,-995338651),n=v(n,l,a,i,t[0],6,-198630844),i=v(i,n,l,a,t[7],10,1126891415),a=v(a,i,n,l,t[14],15,-1416354905),l=v(l,a,i,n,t[5],21,-57434055),n=v(n,l,a,i,t[12],6,1700485571),i=v(i,n,l,a,t[3],10,-1894986606),a=v(a,i,n,l,t[10],15,-1051523),l=v(l,a,i,n,t[1],21,-2054922799),n=v(n,l,a,i,t[8],6,1873313359),i=v(i,n,l,a,t[15],10,-30611744),a=v(a,i,n,l,t[6],15,-1560198380),l=v(l,a,i,n,t[13],21,1309151649),n=v(n,l,a,i,t[4],6,-145523070),i=v(i,n,l,a,t[11],10,-1120210379),a=v(a,i,n,l,t[2],15,718787259),l=v(l,a,i,n,t[9],21,-343485551),e[0]=g(n,e[0]),e[1]=g(l,e[1]),e[2]=g(a,e[2]),e[3]=g(i,e[3])};for(r=[1732584193,-271733879,-1732584194,271733878],s=0;s<=b-64;){o=[];do{o.push((4278190080&e.arr[s>>2])>>>24|(16711680&e.arr[s>>2])>>>8|(65280&e.arr[s>>2])<<8|(255&e.arr[s>>2])<<24),s+=4}while(s%64!=0);E(r,o)}o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(var N,A=0;s<b;)o[A>>2]=(4278190080&e.arr[s>>2])>>>24|(16711680&e.arr[s>>2])>>>8|(65280&e.arr[s>>2])<<8|(255&e.arr[s>>2])<<24,s++,A++;for(o[A>>2]|=128<<(A%4<<3),A>55&&(E(r,o),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o[14]=8*b,E(r,o),N=0,p=r.length;N<p;N++)r[N]=(255&r[N])<<24|(r[N]>>8&255)<<16|(r[N]>>16&255)<<8|r[N]>>24&255;return{length:16,arr:r};case"SHA-256":X=8*e.length,e.arr[X>>5]|=128<<24-X%32,e.arr[15+(X+65>>9<<4)]=X;var T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];for(f=[],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],p=e.arr.length,s=0;s<p;s+=16){for(n=r[0],l=r[1],a=r[2],i=r[3],m=r[4],u=r[5],c=r[6],d=r[7],o=0;o<64;o++){if(o<16)f[o]=e.arr[s+o];else{var C=f[o-15],Q=f[o-2];f[o]=g(g(g((C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3,f[o-7]),(Q<<15|Q>>>17)^(Q<<13|Q>>>19)^Q>>>10),f[o-16])}var O=g(g(g(g(d,(m<<26|m>>>6)^(m<<21|m>>>11)^(m<<7|m>>>25)),m&u^~m&c),T[o]),f[o]),D=g((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),n&l^n&a^l&a);d=c,c=u,u=m,m=g(i,O),i=a,a=l,l=n,n=g(O,D)}r[0]=g(n,r[0]),r[1]=g(l,r[1]),r[2]=g(a,r[2]),r[3]=g(i,r[3]),r[4]=g(m,r[4]),r[5]=g(u,r[5]),r[6]=g(c,r[6]),r[7]=g(d,r[7])}return{length:32,arr:r};case"BASE64":var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=(e=e.replace(/\r\n/g,"\n")).length,S="";for(s=0;s<I;s++){var L=e.charCodeAt(s);S+=L<128?e.charAt(s):L>127&&L<2048?String.fromCharCode(L>>6|192,63&L|128):String.fromCharCode(L>>12|224,L>>6&63|128,63&L|128)}for(I=S.length,r="",s=0;s<I;s+=3){var k=S.charCodeAt(s),q=s+1<I?S.charCodeAt(s+1):0,R=s+2<I?S.charCodeAt(s+2):0;r+=M.charAt(k>>2)+M.charAt((3&k)<<4|q>>4)+(s+1<I?M.charAt((15&q)<<2|R>>6):"=")+(s+2<I?M.charAt(63&R):"=")}return r}},hex32:function(e){var t=e>>>16,r=65535&e;return(t>=4096?"":t>=256?"0":t>=16?"00":"000")+t.toString(16)+(r>=4096?"":r>=256?"0":r>=16?"00":"000")+r.toString(16)},encode:function(e,t){var r,s,o,n,l,a="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if("base64"===t){for(s=0,r=e.length;s<r;s+=3)o=e.arr[s>>2]>>24-s%4*8&255,n=s+1<r?e.arr[s+1>>2]>>24-(s+1)%4*8&255:0,l=s+2<r?e.arr[s+2>>2]>>24-(s+2)%4*8&255:0,a+=i.charAt(o>>2)+i.charAt((3&o)<<4|n>>4)+(s+1<r?i.charAt((15&n)<<2|l>>6):"=")+(s+2<r?i.charAt(63&l):"=");return a}for(a="",s=0,r=e.length>>2;s<r;s++)a+=XsltForms_globals.hex32(e.arr[s]);return e.length%4!=0&&(a+=(e.arr[e.length>>2]>>>8*(4-e.length%4)).toString(16)),a}},XsltForms_browser={jsFileName:"xsltforms.js",isOpera:null!==navigator.userAgent.match(/\bOpera\b/),isIE:null!==navigator.userAgent.match(/\bMSIE\b/)&&null===navigator.userAgent.match(/\bOpera\b/),isIE9:null!==navigator.userAgent.match(/\bMSIE\b/)&&null===navigator.userAgent.match(/\bOpera\b/)&&window.addEventListener,isIE6:null!==navigator.userAgent.match(/\bMSIE 6\.0/),isIE11:null!==navigator.userAgent.match(/\bTrident\/7\.0/),isMozilla:null!==navigator.userAgent.match(/\bGecko\b/),isSafari:null!==navigator.userAgent.match(/\bAppleWebKit/)&&null===navigator.userAgent.match(/\bEdge/)&&!window.FileReader,isChrome:null!==navigator.userAgent.match(/\bAppleWebKit/)&&null===navigator.userAgent.match(/\bEdge/),isEdge:null!==navigator.userAgent.match(/\bEdge/),isFF2:null!==navigator.userAgent.match(/\bFirefox[\/\s]2\.\b/),isXhtml:!1,setClass:function(e,t,r){XsltForms_browser.assert(e&&t),r?this.hasClass(e,t)||("string"==typeof e.className?e.className=(e.className+" "+t).trim():e.className.baseVal=(e.className.baseVal+" "+t).trim()):e.className&&("string"==typeof e.className?e.className=e.className.replace(t,"").replace(/ +/g," ").trim():e.className.baseVal=e.className.baseVal.replace(t,"").replace(/ +/g," ").trim())},hasClass:function(e,t){var r=e.className,s="string"==typeof r?r:r.baseVal;return XsltForms_browser.inArray(t,s&&s.split(" ")||[])},initHover:function(e){XsltForms_browser.events.attach(e,"mouseover",function(e){XsltForms_browser.setClass(XsltForms_browser.events.getTarget(e),"xsltforms-listHover",!0)}),XsltForms_browser.events.attach(e,"mouseout",function(e){XsltForms_browser.setClass(XsltForms_browser.events.getTarget(e),"xsltforms-listHover",!1)})},getEventPos:function(e){return{x:(e=e||window.event).pageX||e.clientX+window.document.body.scrollLeft||0,y:e.pageY||e.clientY+window.document.body.scrollTop||0}},getAbsolutePos:function(e){var t=XsltForms_browser.getPos(e);if(e.offsetParent){var r=XsltForms_browser.getAbsolutePos(e.offsetParent);t.x+=r.x,t.y+=r.y}return t},getPos:function(e){var t=/^div$/i.test(e.tagName);return{x:e.offsetLeft-(t&&e.scrollLeft?e.scrollLeft:0),y:e.offsetTop-(t&&e.scrollTop?e.scrollTop:0)}},setPos:function(e,t,r){if(e.offsetParent){var s=XsltForms_browser.getAbsolutePos(e.offsetParent);t-=s.x,r-=s.y}e.style.top=r+"px",e.style.left=t+"px"},loadProperties:function(e,t){var r=this.ROOT+e,s=!t,o=XsltForms_browser.openRequest("GET",r,!s),n=function(){if(s||4===o.readyState){try{1223===o.status&&(o.status=204,o.statusText="No Content");for(var e=(0!==o.status&&(o.status<200||o.status>=300)?XsltForms_browser.createXMLDocument(XsltForms_browser.configElt.children[0].textContent):XsltForms_browser.createXMLDocument(o.responseText)).documentElement;e&&"properties"!==e.nodeName;)if(e.firstChild)e=e.firstChild;else{for(;e&&!e.nextSibling;)e=e.parentNode;e&&e.nextSibling&&(e=e.nextSibling)}XsltForms_browser.config||(XsltForms_browser.configElt.xfElement||(XsltForms_browser.configElt.parentNode.xfElement||(XsltForms_browser.configElt.parentNode.xfElement=new XsltForms_model(XsltForms_subform.subforms["xsltforms-mainform"],XsltForms_browser.configElt.parentNode)),XsltForms_browser.configElt.xfElement=new XsltForms_instance(XsltForms_subform.subforms["xsltforms-mainform"],XsltForms_browser.configElt),XsltForms_browser.configElt.xfElement.construct(XsltForms_subform.subforms["xsltforms-mainform"])),XsltForms_browser.config=XsltForms_browser.configElt.xfElement.doc.documentElement);var r=XsltForms_browser.config.ownerDocument.importNode(e,!0);XsltForms_browser.config.parentNode.replaceChild(r,XsltForms_browser.config);var n=XsltForms_browser.configElt.xfElement;XsltForms_browser.config=n.doc.documentElement,n.srcDoc=XsltForms_browser.saveDoc(n.doc,"application/xml"),XsltForms_browser.setDocMeta(n.doc,"instance","xsltforms-instance-config"),XsltForms_browser.setDocMeta(n.doc,"model","xsltforms-model-config"),XsltForms_globals.language=XsltForms_browser.selectSingleNodeText("language",XsltForms_browser.config),XsltForms_globals.valuesSeparator=XsltForms_browser.selectSingleNodeText("valuesseparator",XsltForms_browser.config," "),XsltForms_globals.loadingMsg=XsltForms_browser.selectSingleNodeText("status",XsltForms_browser.config)}catch(e){}s||t()}};s||(o.onreadystatechange=n),o.overrideMimeType&&o.overrideMimeType("application/xml"),o.send(null),s&&n()},constructURI:function(e){if(e.match(/^[a-zA-Z0-9+\.\-]+:\/\//))return e;if("/"===e.charAt(0))return document.location.href.substr(0,document.location.href.replace(/:\/\//,":\\\\").indexOf("/"))+e;var t=document.location.href,r=t.indexOf("?");return r=(t=-1===r?t:t.substr(0,r)).replace(/:\/\//,":\\\\").lastIndexOf("/"),t.length>r+1?(-1===r?t:t.substr(0,r))+"/"+e:t+e},createElement:function(e,t,r,s){var o=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e);return s&&(o.className=s),t&&t.appendChild(o),r&&o.appendChild(document.createTextNode(r)),o},getWindowSize:function(){var e=0,t=0,r=0,s=0,o=0,n=0;return XsltForms_browser.isIE||XsltForms_browser.isIE11?document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)&&(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,r=Math.max(document.documentElement.clientWidth,document.body.clientWidth),s=Math.max(document.documentElement.clientHeight,document.body.clientHeight),o=document.body.parentNode.scrollLeft,n=document.body.parentNode.scrollTop):(e=document.body?document.body.clientWidth:document.documentElement.clientWidth,t=document.documentElement.clientHeight,r=document.body?Math.max(document.documentElement.clientWidth,document.body.clientWidth):document.documentElement.clientWidth,s=document.body?Math.max(document.documentElement.clientHeight,document.body.clientHeight):document.documentElement.clientHeight,o=window.scrollX,n=window.scrollY),{height:t,width:e,offsetX:r,offsetY:s,scrollX:o,scrollY:n}},addLoadListener:function(e){if(window.addEventListener)window.addEventListener("load",e,!1);else if(document.addEventListener)document.addEventListener("load",e,!1);else if(window.attachEvent)window.attachEvent("onload",e);else if("function"!=typeof window.onload)window.onload=e;else{var t=window.onload;window.onload=function(){t(),e()}}}};if(XsltForms_browser.isIE||XsltForms_browser.isIE11){try{var xmlDoc0=new ActiveXObject("Msxml2.DOMDocument.6.0");xmlDoc0&&(xmlDoc0=null,XsltForms_browser.MSXMLver="6.0")}catch(e){XsltForms_browser.MSXMLver="3.0"}document.write("<script type='text/vbscript'>Function XsltForms_browser_BinaryToArray_ByteStr(Binary)\r\nXsltForms_browser_BinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction XsltForms_browser_BinaryToArray_ByteStr_Last(Binary)\r\nDim lastIndex\r\nlastIndex = LenB(Binary)\r\nif lastIndex mod 2 Then\r\nXsltForms_browser_BinaryToArray_ByteStr_Last = Chr(AscB(MidB(Binary,lastIndex,1)))\r\nElse\r\nXsltForms_browser_BinaryToArray_ByteStr_Last = \"\"\r\nEnd If\r\nEnd Function\r\n<\/script>\r\n")}if(XsltForms_browser.isIE){if(!window.ActiveXObject)throw new Error("This browser does not support XHRs(Ajax)! \n Enable Javascript or ActiveX controls (on IE) or lower security restrictions.");XsltForms_browser.openRequest=function(e,t,r){var s;try{s=new XMLHttpRequest}catch(e){try{s=new ActiveXObject("Msxml2.XMLHTTP."+XsltForms_browser.MSXMLver)}catch(e){try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){throw new Error("This browser does not support XHRs(Ajax)! \n Cause: "+(e.message||e.description||e)+" \n Enable Javascript or ActiveX controls (on IE) or lower security restrictions.")}}}return s.open(e,XsltForms_browser.constructURI(t),r),s},XsltForms_browser.StringToBinary=function(e){for(var t=function(e){return String.fromCharCode(e>9?e+55:e+48)},r="",s=0,o=e.length;s<o;s++)r+=t((240&e.charCodeAt(s))>>4)+t(15&e.charCodeAt(s));var n=new ActiveXObject("Msxml2.DOMDocument."+XsltForms_browser.MSXMLver).createElement("dummy");return n.dataType="bin.hex",n.text=r,n.nodeTypedValue}}else XsltForms_browser.openRequest=function(e,t,r){var s=new XMLHttpRequest;try{s.open(e,XsltForms_browser.constructURI(t),r)}catch(e){throw new Error("This browser does not support XHRs(Ajax)! \n Cause: "+(e.message||e.description||e)+" \n Enable Javascript or ActiveX controls (on IE) or lower security restrictions.")}return XsltForms_browser.isMozilla&&s.overrideMimeType("text/xml"),s};XsltForms_browser.isIE||XsltForms_browser.isIE11?XsltForms_browser.transformText=function(e,t,r){var s=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver);s.setProperty("AllowDocumentFunction",!0),s.preserveWhiteSpace=!0,s.validateOnParse=!1,s.setProperty("ProhibitDTD",!1),s.loadXML(e);var o=new ActiveXObject("MSXML2.FreeThreadedDOMDocument."+XsltForms_browser.MSXMLver);o.setProperty("AllowDocumentFunction",!0),o.preserveWhiteSpace=!0,o.validateOnParse=!1,o.setProperty("ProhibitDTD",!1),r?o.loadXML(t):(o.async=!1,o.load(t));var n=new ActiveXObject("MSXML2.XSLTemplate."+XsltForms_browser.MSXMLver);n.stylesheet=o;var l=n.createProcessor();l.input=s;for(var a=3,i=arguments.length-1;a<i;a+=2)l.addParameter(arguments[a],arguments[a+1],"");return l.transform(),l.output}:XsltForms_browser.transformText=function(e,t,r){var s,o=new DOMParser,n=new XMLSerializer,l=o.parseFromString(e,"text/xml");if(r)s=o.parseFromString(t,"text/xml");else{var a=new XMLHttpRequest;a.open("GET",t,!1),a.send(""),a.responseXML&&""!==a.responseXML.xml?s=a.responseXML:(t=a.responseText,s=o.parseFromString(t,"text/xml"))}var i=new XSLTProcessor;XsltForms_browser.isMozilla||XsltForms_browser.isOpera||i.setParameter(null,"xsltforms_caller","true");try{i.setParameter(null,"xsltforms_lang",XsltForms_globals.language),i.setParameter(null,"xsltforms_replacement_for","xsltforms-replacement-for-")}catch(e){}for(var m=3,u=arguments.length-1;m<u;m+=2)i.setParameter(null,arguments[m],arguments[m+1]);try{i.importStylesheet(s);var c=i.transformToDocument(l);if(!c)return alert("transformToDocument: null return value"),"";return(XsltForms_browser.isMozilla&&"transformiix:result"===c.documentElement.nodeName||XsltForms_browser.isOpera&&"result"===c.documentElement.nodeName?c.documentElement.textContent:(XsltForms_browser.isChrome||XsltForms_browser.isEdge)&&"html"===c.documentElement.nodeName.toLowerCase()&&"pre"===c.documentElement.children[1].children[0].nodeName.toLowerCase()?c.documentElement.children[1].children[0].textContent:n.serializeToString(c)).replace(/xsltforms-replacement-for-/gm,"")}catch(e){return alert(e),""}},XsltForms_browser.scripts=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"):document.getElementsByTagName("script");for(var __i=0,__len=XsltForms_browser.scripts.length;__i<__len;__i++){var __src=XsltForms_browser.scripts[__i].src;if(-1!==__src.indexOf(XsltForms_browser.jsFileName)){XsltForms_browser.ROOT=__src.replace(XsltForms_browser.jsFileName,""),-1!==XsltForms_browser.ROOT.indexOf("?")&&(XsltForms_browser.ROOT=XsltForms_browser.ROOT.substring(0,XsltForms_browser.ROOT.indexOf("?"))),XsltForms_browser.imgROOT="js/"===XsltForms_browser.ROOT.substr(XsltForms_browser.ROOT.length-3,3)?XsltForms_browser.ROOT+"../img/":XsltForms_browser.ROOT,XsltForms_browser.xslROOT="js/"===XsltForms_browser.ROOT.substr(XsltForms_browser.ROOT.length-3,3)?XsltForms_browser.ROOT+"../xsl/":XsltForms_browser.ROOT,XsltForms_browser.debugROOT="js/"===XsltForms_browser.ROOT.substr(XsltForms_browser.ROOT.length-3,3)?XsltForms_browser.ROOT+"../debug/":XsltForms_browser.ROOT;break}}if(XsltForms_browser.MIME2extensions={"application/javascript":[".js",".mjs"],"application/xhtml+xml":[".xhtml",".xht",".xhtm"],"application/xml":[".xml"],"text/css":[".css"],"text/html":[".html",".htm",".shtml",".shtm"],"text/plain":[".txt",".text"]},XsltForms_browser.readFile=function(e,t,r){var s=document.createElement("input");return s.type="file",s.click(),!0},XsltForms_browser.writeFile=async function(e,t,r,s){const o=new Blob([s],{type:r+";charset="+t});if(window.showSaveFilePicker){const e={types:[{accept:{}}]};e.types[0].accept[r]=XsltForms_browser.MIME2extensions[r];try{const t=await window.showSaveFilePicker(e),r=await t.createWritable();await r.write(o),await r.close()}catch(e){}}else{const t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(o),t.click()}return!0},XsltForms_browser.xsltsrc='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">',XsltForms_browser.xsltsrc+='  <xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltsrc+="  <xsl:template match=\"@*[starts-with(translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'xsltforms_')]\" priority=\"1\"/>",XsltForms_browser.xsltsrc+='  <xsl:template match="@*|node()" priority="0">',XsltForms_browser.xsltsrc+="    <xsl:copy>",XsltForms_browser.xsltsrc+='      <xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltsrc+="    </xsl:copy>",XsltForms_browser.xsltsrc+="  </xsl:template>",XsltForms_browser.xsltsrc+="</xsl:stylesheet>",XsltForms_browser.xsltsrcanyuri='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0">',XsltForms_browser.xsltsrcanyuri+='  <xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltsrcanyuri+="  <xsl:template match=\"*[(substring-after(@xsltforms_type,':') = 'anyURI' or substring-after(@xsi:type,':') = 'anyURI') and . != '']\" priority=\"2\">",XsltForms_browser.xsltsrcanyuri+="    <xsl:copy>",XsltForms_browser.xsltsrcanyuri+='      <xsl:apply-templates select="@*"/>',XsltForms_browser.xsltsrcanyuri+="      <xsl:text>$!$!$!$!$!</xsl:text>",XsltForms_browser.xsltsrcanyuri+='      <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcanyuri+="      <xsl:text>%!%!%!%!%!</xsl:text>",XsltForms_browser.xsltsrcanyuri+="    </xsl:copy>",XsltForms_browser.xsltsrcanyuri+="  </xsl:template>",XsltForms_browser.xsltsrcanyuri+="  <xsl:template match=\"@*[starts-with(translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'xsltforms_')]\" priority=\"1\"/>",XsltForms_browser.xsltsrcanyuri+='  <xsl:template match="@*" priority="0">',XsltForms_browser.xsltsrcanyuri+="    <xsl:choose>",XsltForms_browser.xsltsrcanyuri+="      <xsl:when test=\"parent::*/attribute::*[local-name() = concat('xsltforms_',local-name(current()),'_type') and substring-after(.,':') = 'anyURI'] and . != ''\">",XsltForms_browser.xsltsrcanyuri+="        <xsl:copy>",XsltForms_browser.xsltsrcanyuri+="          <xsl:text>$!$!$!$!$!</xsl:text>",XsltForms_browser.xsltsrcanyuri+='          <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcanyuri+="          <xsl:text>%!%!%!%!%!</xsl:text>",XsltForms_browser.xsltsrcanyuri+="        </xsl:copy>",XsltForms_browser.xsltsrcanyuri+="      </xsl:when>",XsltForms_browser.xsltsrcanyuri+="      <xsl:otherwise>",XsltForms_browser.xsltsrcanyuri+="        <xsl:copy>",XsltForms_browser.xsltsrcanyuri+='          <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcanyuri+="        </xsl:copy>",XsltForms_browser.xsltsrcanyuri+="      </xsl:otherwise>",XsltForms_browser.xsltsrcanyuri+="    </xsl:choose>",XsltForms_browser.xsltsrcanyuri+="  </xsl:template>",XsltForms_browser.xsltsrcanyuri+='  <xsl:template match="node()" priority="0">',XsltForms_browser.xsltsrcanyuri+="    <xsl:copy>",XsltForms_browser.xsltsrcanyuri+='      <xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltsrcanyuri+="    </xsl:copy>",XsltForms_browser.xsltsrcanyuri+="  </xsl:template>",XsltForms_browser.xsltsrcanyuri+="</xsl:stylesheet>",XsltForms_browser.xsltsrcindent='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">',XsltForms_browser.xsltsrcindent+='  <xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltsrcindent+="  <xsl:template match=\"@*[starts-with(translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'xsltforms_')]\" priority=\"1\"/>",XsltForms_browser.xsltsrcindent+='  <xsl:template match="@*" priority="0">',XsltForms_browser.xsltsrcindent+="    <xsl:copy/>",XsltForms_browser.xsltsrcindent+="  </xsl:template>",XsltForms_browser.xsltsrcindent+='  <xsl:template match="text()" priority="0">',XsltForms_browser.xsltsrcindent+='    <xsl:value-of select="normalize-space(.)"/>',XsltForms_browser.xsltsrcindent+="  </xsl:template>",XsltForms_browser.xsltsrcindent+='  <xsl:template match="*" priority="0">',XsltForms_browser.xsltsrcindent+='    <xsl:param name="offset"/>',XsltForms_browser.xsltsrcindent+="    <xsl:text>&#10;</xsl:text>",XsltForms_browser.xsltsrcindent+='    <xsl:value-of select="$offset"/>',XsltForms_browser.xsltsrcindent+="    <xsl:copy>",XsltForms_browser.xsltsrcindent+='      <xsl:apply-templates select="@*|node()">',XsltForms_browser.xsltsrcindent+='        <xsl:with-param name="offset" select="concat($offset,\'    \')"/>',XsltForms_browser.xsltsrcindent+="      </xsl:apply-templates>",XsltForms_browser.xsltsrcindent+="    </xsl:copy>",XsltForms_browser.xsltsrcindent+='    <xsl:if test="not(following-sibling::*)">',XsltForms_browser.xsltsrcindent+="      <xsl:text>&#10;</xsl:text>",XsltForms_browser.xsltsrcindent+='      <xsl:value-of select="substring($offset,5)"/>',XsltForms_browser.xsltsrcindent+="    </xsl:if>",XsltForms_browser.xsltsrcindent+="  </xsl:template>",XsltForms_browser.xsltsrcindent+="</xsl:stylesheet>",XsltForms_browser.xsltsrcrelevant='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">',XsltForms_browser.xsltsrcrelevant+='  <xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltsrcrelevant+='  <xsl:template match="*[@xsltforms_notrelevant = \'true\']" priority="1"/>',XsltForms_browser.xsltsrcrelevant+="  <xsl:template match=\"@*[starts-with(translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'xsltforms_')]\" priority=\"1\"/>",XsltForms_browser.xsltsrcrelevant+='  <xsl:template match="@*" priority="0">',XsltForms_browser.xsltsrcrelevant+="    <xsl:choose>",XsltForms_browser.xsltsrcrelevant+="      <xsl:when test=\"parent::*/attribute::*[local-name() = concat('xsltforms_',local-name(current()),'_notrelevant')] = 'true'\"/>",XsltForms_browser.xsltsrcrelevant+="      <xsl:otherwise>",XsltForms_browser.xsltsrcrelevant+="        <xsl:copy>",XsltForms_browser.xsltsrcrelevant+='          <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcrelevant+="        </xsl:copy>",XsltForms_browser.xsltsrcrelevant+="      </xsl:otherwise>",XsltForms_browser.xsltsrcrelevant+="    </xsl:choose>",XsltForms_browser.xsltsrcrelevant+="  </xsl:template>",XsltForms_browser.xsltsrcrelevant+='  <xsl:template match="node()" priority="0">',XsltForms_browser.xsltsrcrelevant+="    <xsl:copy>",XsltForms_browser.xsltsrcrelevant+='      <xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltsrcrelevant+="    </xsl:copy>",XsltForms_browser.xsltsrcrelevant+="  </xsl:template>",XsltForms_browser.xsltsrcrelevant+="</xsl:stylesheet>",XsltForms_browser.xsltsrcrelevany='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0">',XsltForms_browser.xsltsrcrelevany+='  <xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltsrcrelevany+='  <xsl:template match="*[@xsltforms_notrelevant = \'true\']" priority="2"/>',XsltForms_browser.xsltsrcrelevany+="  <xsl:template match=\"*[(substring-after(@xsltforms_type,':') = 'anyURI' or substring-after(@xsi:type,':') = 'anyURI') and . != '']\" priority=\"2\">",XsltForms_browser.xsltsrcrelevany+="    <xsl:copy>",XsltForms_browser.xsltsrcrelevany+='      <xsl:apply-templates select="@*"/>',XsltForms_browser.xsltsrcrelevany+="      <xsl:text>$!$!$!$!$!</xsl:text>",XsltForms_browser.xsltsrcrelevany+='      <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcrelevany+="      <xsl:text>%!%!%!%!%!</xsl:text>",XsltForms_browser.xsltsrcrelevany+="    </xsl:copy>",XsltForms_browser.xsltsrcrelevany+="  </xsl:template>",XsltForms_browser.xsltsrcrelevany+="  <xsl:template match=\"@*[starts-with(translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'xsltforms_')]\" priority=\"1\"/>",XsltForms_browser.xsltsrcrelevany+='  <xsl:template match="@*" priority="0">',XsltForms_browser.xsltsrcrelevany+="    <xsl:choose>",XsltForms_browser.xsltsrcrelevany+="      <xsl:when test=\"parent::*/attribute::*[local-name() = concat('xsltforms_',local-name(current()),'_notrelevant')] = 'true'\"/>",XsltForms_browser.xsltsrcrelevany+="      <xsl:when test=\"parent::*/attribute::*[local-name() = concat('xsltforms_',local-name(current()),'_type') and substring-after(.,':') = 'anyURI'] and . != ''\">",XsltForms_browser.xsltsrcrelevany+="        <xsl:copy>",XsltForms_browser.xsltsrcrelevany+="          <xsl:text>$!$!$!$!$!</xsl:text>",XsltForms_browser.xsltsrcrelevany+='          <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcrelevany+="          <xsl:text>%!%!%!%!%!</xsl:text>",XsltForms_browser.xsltsrcrelevany+="        </xsl:copy>",XsltForms_browser.xsltsrcrelevany+="      </xsl:when>",XsltForms_browser.xsltsrcrelevany+="      <xsl:otherwise>",XsltForms_browser.xsltsrcrelevany+="        <xsl:copy>",XsltForms_browser.xsltsrcrelevany+='          <xsl:apply-templates select="node()"/>',XsltForms_browser.xsltsrcrelevany+="        </xsl:copy>",XsltForms_browser.xsltsrcrelevany+="      </xsl:otherwise>",XsltForms_browser.xsltsrcrelevany+="    </xsl:choose>",XsltForms_browser.xsltsrcrelevany+="  </xsl:template>",XsltForms_browser.xsltsrcrelevany+='  <xsl:template match="node()" priority="0">',XsltForms_browser.xsltsrcrelevany+="    <xsl:copy>",XsltForms_browser.xsltsrcrelevany+='      <xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltsrcrelevany+="    </xsl:copy>",XsltForms_browser.xsltsrcrelevany+="  </xsl:template>",XsltForms_browser.xsltsrcrelevany+="</xsl:stylesheet>",XsltForms_browser.loadTextNode=function(e,t){if(e.nodeType===Fleur.Node.ATTRIBUTE_NODE)e.value=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(e.ownerDocument.createTextNode(t))}},Fleur.DOMParser||!XsltForms_browser.isIE&&!XsltForms_browser.isIE11){XsltForms_browser.createXMLDocument=function(e){return XsltForms_browser.parser.parseFromString(e,"text/xml")},XsltForms_browser.setAttributeNS=function(e,t,r,s){try{e.setAttributeNS(t,r,s)}catch(o){XsltForms_browser.debugConsole.write("ERROR: Could not set "+(""!==t?"Q{"+t+"}":"")+r+" with value "+s+" on "+XsltForms_browser.name2string(e))}},XsltForms_browser.selectSingleNode=function(e,t){try{return t.evaluate?t.evaluate(e,t,t.createNSResolver(t.documentElement),XPathResult.ANY_TYPE,null).iterateNext():t.ownerDocument.evaluate(e,t,t.ownerDocument.createNSResolver(t),XPathResult.ANY_TYPE,null).iterateNext()}catch(e){return null}},XsltForms_browser.selectSingleNodeText=function(e,t,r){if(Fleur.minimal)try{return t.evaluate?t.evaluate(e,t,t.createNSResolver(t.documentElement),XPathResult.ANY_TYPE,null).iterateNext().textContent:t.ownerDocument.evaluate(e,t,t.ownerDocument.createNSResolver(t),XPathResult.ANY_TYPE,null).iterateNext().textContent}catch(n){if("properties"===t.nodeName)for(var s=0,o=t.childNodes.length;s<o;s++)if(t.childNodes[s].nodeName===e)return t.childNodes[s].textContent;return r||""}if("properties"===t.nodeName)for(s=0,o=t.childNodes.length;s<o;s++)if(t.childNodes[s].nodeName===e)return t.childNodes[s].textContent;return r||""},XsltForms_browser.selectNodesLength=function(e,t){try{if(!Fleur.minimal)throw Error();return t.evaluate?t.evaluate(e,t,t.createNSResolver(t.documentElement),XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:t.ownerDocument.evaluate(e,t,t.ownerDocument.createNSResolver(t),XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(l){var r=0;switch(e){case"preceding::* | ancestor::*":for(;t;)t.previousSibling?(r+=t.nodeType===Fleur.Node.ELEMENT_NODE?1:0,t=t.previousSibling):t.parentNode?(r++,t=t.parentNode):t=null;break;case"descendant::node() | descendant::*/@*[not(starts-with(local-name(),'xsltforms_'))]":var s=t.firstChild;if(s)for(;s!==t;){if(r++,s.attributes)for(var o=0,n=s.attributes.length;o<n;o++)r+="xsltforms_"!==s.attributes[o].name.substring(0,10)?1:0;if(s.firstChild)s=s.firstChild;else{for(;!s.nextSibling&&s!==t;)s=s.parentNode;s!==t&&(s=s.nextSibling)}}}return r}},XsltForms_browser.selectNodes=function(e,t){try{return t.evaluate?t.evaluate(e,t,t.createNSResolver(t.documentElement),XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null):t.ownerDocument.evaluate(e,t,t.ownerDocument.createNSResolver(t),XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null)}catch(e){}};try{XsltForms_browser.parser=Fleur.DOMParser?new Fleur.DOMParser:new DOMParser}catch(e){}Fleur.DOMParser?(XsltForms_browser.serializer=new Fleur.Serializer,XsltForms_browser.loadNode=function(e,t,r){var s,o,n;try{var l=XsltForms_browser.parser.parseFromString(t,r);switch(e.nodeType){case Fleur.Node.ELEMENT_NODE:for(s=0,o=l.childNodes.length;s<o;s++)n=e.ownerDocument.importNode(l.childNodes[s],!0),e.parentNode.insertBefore(n,e);e.parentNode.removeChild(e);break;case Fleur.Node.DOCUMENT_NODE:for(s=0,o=e.childNodes.length;s<o;s++)e.removeChild(e.childNodes[0]);for(s=0,o=l.childNodes.length;s<o;s++)n=e.importNode(l.childNodes[s],!0),e.appendChild(n)}}catch(t){XsltForms_globals.error(document.getElementById(XsltForms_browser.getDocMeta(e.ownerDocument,"model")).xfElement,"xforms-link-exception","Unable to parse source")}},XsltForms_browser.loadDoc=XsltForms_browser.loadNode,XsltForms_browser.saveNode=function(e,t,r,s,o,n){return XsltForms_browser.serializer.serializeToString(e,t,"yes"===s)},XsltForms_browser.saveDoc=XsltForms_browser.saveNode,XsltForms_browser.selectMeta=function(e,t){return t}):(XsltForms_browser.serializer=new XMLSerializer,XsltForms_browser.loadNode=function(e,t){var r=XsltForms_browser.parser.parseFromString(t,"text/xml");if("parsererror"===r.documentElement.localName||r.documentElement.textContent&&"This page contains the following errors:"===r.documentElement.textContent.substring(0,40))XsltForms_globals.error(document.getElementById(XsltForms_browser.getDocMeta(e.ownerDocument,"model")).xfElement,"xforms-link-exception","Unable to parse XML");else{var s=e.ownerDocument.importNode(r.documentElement,!0);e.parentNode.replaceChild(s,e)}},XsltForms_browser.loadDoc=function(e,t){XsltForms_browser.loadNode(e.documentElement,t)},XsltForms_browser.saveNode=function(e,t,r,s,o,n){if(e.nodeType===Fleur.Node.ATTRIBUTE_NODE)return e.nodeValue;if(e.nodeType===Fleur.Node.TEXT_NODE){for(var l="";e&&e.nodeType===Fleur.Node.TEXT_NODE;)l+=e.nodeValue,e=e.nextSibling;return l}var a,i=XsltForms_browser.createXMLDocument(XsltForms_browser.serializer.serializeToString(e));if(r&&i.selectNodes){for(var m=i.selectNodes("descendant::*[@xsltforms_notrelevant = 'true']",!1,i.documentElement),u=0,c=m.length;u<c;u++){var d=m[u];try{d.parentNode.removeChild(d)}catch(e){}}for(u=0,c=(m=i.selectNodes("descendant::*[@*[. = 'true' and starts-with(local-name(),'xsltforms_') and substring(local-name(), string-length(local-name()) - 11, 12) = '_notrelevant']]",!1,i.documentElement)).length;u<c;u++){d=m[u];try{for(var h=[],p=0,X=d.attributes.length;p<X;p++){var f=d.attributes[p];if("true"===f.nodeValue&&f.nodeName.startsWith("xsltforms_")&&f.nodeName.endsWith("_notrelevant")){var g=f.nodeName.substr(10);g=g.substr(0,g.indexOf("_notrelevant")),h.push(g)}}for(p=0,X=h.length;p<X;p++)d.removeAttribute(h[p])}catch(e){}}}if(o){for(var x=i.selectNodes("descendant::*[(substring-after(@xsltforms_type,':') = 'anyURI' or substring-after(@*[local-name() = 'type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance'],':') = 'anyURI') and . != '']",!1,i.documentElement),b=0,F=x.length;b<F;b++){var _=x[b];try{_.insertBefore(_.ownerDocument.createTextNode("$!$!$!$!$!"),_.firstChild),_.appendChild(_.ownerDocument.createTextNode("%!%!%!%!%!"))}catch(e){}}for(var y=i.selectNodes("descendant::*[@*[starts-with(local-name(), 'xsltforms_') and substring(local-name(), string-length(local-name()) - 4, 5) = '_type' and local-name() != 'xsltforms_type' and substring-after(.,':') = 'anyURI']]",!1,i.documentElement),w=0,v=y.length;w<v;w++)for(var E=y[w],N=0;N<E.attributes.length;){var A=E.attributes[N].name,T=E.getAttribute(A);if("xsltforms_"===A.substring(0,10)&&"_type"===A.substr(A.length-5,5)&&"xsltforms_type"!==A&&"anyURI"===T.substr(T.indexOf(":")+1))try{var C=A.substr(10,A.length-15);""!==E.getAttribute(C)&&E.setAttribute(C,"$!$!$!$!$!"+E.getAttribute(C)+"%!%!%!%!%!")}catch(e){}else N++}}for(p=0,X=(a=i.selectNodes?i.selectNodes("descendant-or-self::*[@*[starts-with(name(),'xsltforms_')]]",!1,i.documentElement):XsltForms_browser.selectMeta(i.documentElement,[])).length;p<X;p++)for(var Q=a[p],O=0;O<Q.attributes.length;)"xsltforms_"===Q.attributes[O].name.substring(0,10)?Q.removeAttribute(Q.attributes[O].name):O++;if(o){for(var D=XsltForms_browser.serializer.serializeToString(i),M=[],I=D.indexOf("$!$!$!$!$!");-1!==I;){var S=D.indexOf("%!%!%!%!%!",I+10),L=D.substring(I+10,S);""!==L&&(L=L.substr(L.indexOf("?id=")+4),M.push(L),L="cid:"+L),I=(D=D.substr(0,I)+L+D.substr(S+10)).indexOf("$!$!$!$!$!")}var k="xsltformsrev"+XsltForms_globals.fileVersionNumber;D="--"+k+"\r\nContent-Type: application/xml; charset=UTF-8\r\nContent-ID: <xsltforms_main>\r\n\r\n"+D+"\r\n--"+k+"\r\n";for(var q=0,R=M.length;q<R;q++){var B="";if(XsltForms_browser.isSafari)for(var P=XsltForms_upload.contents[M[q]],V=0,U=P.length;V<U;V++){var j=P.charCodeAt(V);B+=j<128?String.fromCharCode(j):j>191&&j<224?String.fromCharCode((31&j)<<6|63&P.charCodeAt(++V)):String.fromCharCode((15&j)<<12|(63&P.charCodeAt(++V))<<6|63&P.charCodeAt(++V))}else for(var z=new Uint8Array(XsltForms_upload.contents[M[q]]),H=0,$=z.length;H<$;H++)B+=String.fromCharCode(z[H]);D+="Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\nContent-ID: <"+M[q]+">\r\n\r\n"+B+"\r\n--"+k+(q===R-1?"--\r\n":"\r\n")}for(var W=[],Y=0,Z=D.length;Y<Z;Y++)W.push(255&D.charCodeAt(Y));try{return new Uint8Array(W).buffer}catch(e){return XsltForms_browser.StringToBinary(D)}}else if(s||n){return(new Fleur.XMLSerializer).serializeToString(i,s,n)}return XsltForms_browser.serializer.serializeToString(i)},XsltForms_browser.saveDoc=function(e,t,r,s,o,n){return XsltForms_browser.saveNode(e.documentElement,t,r,s,o,n)},XsltForms_browser.selectMeta=function(e,t){var r,s;for(r=0,s=e.attributes.length;r<s;){if(0===e.attributes[r].nodeName.indexOf("xsltforms_")){t.push(e);break}r++}for(r=0,s=e.children.length;r<s;)XsltForms_browser.selectMeta(e.children[r++],t);return t})}else XsltForms_browser.createXMLDocument=function(e){var t=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver);return t.setProperty("SelectionLanguage","XPath"),t.validateOnParse=!1,t.setProperty("ProhibitDTD",!1),t.loadXML(e),t},XsltForms_browser.setAttributeNS=function(e,t,r,s){try{e.setAttributeNode(e.ownerDocument.createNode(Fleur.Node.ATTRIBUTE_NODE,r,t)),e.setAttribute(r,s)}catch(o){XsltForms_browser.debugConsole.write("ERROR: Could not set @"+(""!==t?"Q{"+t+"}":"")+r+" with value "+s+" on "+XsltForms_browser.name2string(e))}},XsltForms_browser.selectSingleNode=function(e,t){try{return t.selectSingleNode(e)}catch(e){return null}},XsltForms_browser.selectSingleNodeText=function(e,t,r){try{return t.selectSingleNode(e).text}catch(e){return r||""}},XsltForms_browser.selectNodesLength=function(e,t){try{return t.selectNodes(e).length}catch(e){return 0}},XsltForms_browser.xsltDoc=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver),XsltForms_browser.xsltDoc.loadXML(XsltForms_browser.xsltsrc),XsltForms_browser.xsltDocAnyURI=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver),XsltForms_browser.xsltDocAnyURI.loadXML(XsltForms_browser.xsltsrcanyuri),XsltForms_browser.xsltDocRelevant=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver),XsltForms_browser.xsltDocRelevant.loadXML(XsltForms_browser.xsltsrcrelevant),XsltForms_browser.xsltDocRelevantAnyURI=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver),XsltForms_browser.xsltDocRelevantAnyURI.loadXML(XsltForms_browser.xsltsrcrelevany),XsltForms_browser.xsltDocIndent=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver),XsltForms_browser.xsltDocIndent.loadXML(XsltForms_browser.xsltsrcindent),XsltForms_browser.loadNode=function(e,t){var r=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver);if(r.setProperty("SelectionLanguage","XPath"),r.setProperty("ProhibitDTD",!1),r.validateOnParse=!1,r.loadXML(t)){var s=r.documentElement.cloneNode(!0);e.parentNode.replaceChild(s,e)}else XsltForms_globals.error(document.getElementById(XsltForms_browser.getDocMeta(e.ownerDocument,"model")).xfElement,"xforms-link-exception","Unable to parse XML")},XsltForms_browser.loadDoc=function(e,t){XsltForms_browser.loadNode(e.documentElement,t)},XsltForms_browser.saveNode=function(e,t,r,s,o,n){if(e.nodeType===Fleur.Node.ATTRIBUTE_NODE)return e.nodeValue;if(e.nodeType===Fleur.Node.TEXT_NODE){for(var l="";e&&e.nodeType===Fleur.Node.TEXT_NODE;)l+=e.nodeValue,e=e.nextSibling;return l}var a=new ActiveXObject("MSXML2.DOMDocument."+XsltForms_browser.MSXMLver);if(a.setProperty("SelectionLanguage","XPath"),a.appendChild(e.documentElement?e.documentElement.cloneNode(!0):e.cloneNode(!0)),n){if(r)for(var i=a.documentElement.selectNodes("descendant::*[@xsltforms_notrelevant = 'true']"),m=0,u=i.length;m<u;m++){var c=i[m];try{c.parentNode.removeChild(c)}catch(e){}}for(var d=a.documentElement.selectNodes("descendant-or-self::*[@*[starts-with(name(),'xsltforms_')]]"),h=0,p=d.length;h<p;h++)for(var X=d[h],f=0;f<X.attributes.length;)"xsltforms_"===X.attributes[f].name.substring(0,10)?X.removeAttribute(X.attributes[f].name):f++;return(new Fleur.XMLSerializer).serializeToString(a,s,n)}if(s)return a.transformNode(XsltForms_browser.xsltDocIndent);if(o){for(var g=r?a.transformNode(XsltForms_browser.xsltDocRelevantAnyURI):a.transformNode(XsltForms_browser.xsltDocAnyURI),x=[],b=g.indexOf("$!$!$!$!$!");-1!==b;){var F=g.indexOf("%!%!%!%!%!",b+10),_=g.substring(b+10,F);""!==_&&(_=_.substr(_.indexOf("?id=")+4),x.push(_),_="cid:"+_),b=(g=g.substr(0,b)+_+g.substr(F+10)).indexOf("$!$!$!$!$!")}var y="xsltformsrev"+XsltForms_globals.fileVersionNumber;g="--"+y+"\r\nContent-Type: application/xml; charset=UTF-8\r\nContent-ID: <xsltforms_main>\r\n\r\n"+g+"\r\n--"+y+"\r\n";for(var w=0,v=x.length;w<v;w++){if(g+="Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\nContent-ID: <"+x[w]+">\r\n\r\n",XsltForms_upload.contents[x[w]]instanceof ArrayBuffer)for(var E=new Uint8Array(XsltForms_upload.contents[x[w]]),N=0,A=E.length;N<A;N++)g+=String.fromCharCode(E[N]);else g+=XsltForms_upload.contents[x[w]];g+="\r\n--"+y+(w===v-1?"--\r\n":"\r\n")}for(var T=[],C=0,Q=g.length;C<Q;C++)T.push(255&g.charCodeAt(C));try{return new Uint8Array(T).buffer}catch(e){return XsltForms_browser.StringToBinary(g)}}return r?a.transformNode(XsltForms_browser.xsltDocRelevant):a.transformNode(XsltForms_browser.xsltDoc)},XsltForms_browser.saveDoc=XsltForms_browser.saveNode;if(XsltForms_browser.unescape=function(e){if(!e)return"";return e.match(/^\s*</)||(e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&")),e},XsltForms_browser.escape=function(e){return e?("string"==typeof e&&(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")),e):""},XsltForms_browser.escapeJS=function(e){return e?("string"==typeof e&&(e=(e=(e=(e=(e=e.replace(/\\/gm,"\\\\")).replace(/\t/gm,"\\t")).replace(/\n/gm,"\\n")).replace(/\r/gm,"\\r")).replace(/\"/gm,'\\"')),e):""},XsltForms_browser.utf8decode=function(e){for(var t="",r=0,s=e.length;r<s;){var o=e.charCodeAt(r);o<128?(t+=String.fromCharCode(o),r++):o>191&&o<224?(t+=String.fromCharCode((31&o)<<6|63&e.charCodeAt(r+1)),r+=2):(t+=String.fromCharCode((15&o)<<12|(63&e.charCodeAt(r+1))<<6|63&e.charCodeAt(r+2)),r+=3)}return t},XsltForms_browser.utf8encode=function(e){for(var t="",r=0,s=(e=e.replace(/\r\n/g,"\n")).length;r<s;r++){var o=e.charCodeAt(r);t+=o<128?String.fromCharCode(o):o>127&&o<2048?String.fromCharCode(o>>6|192)+String.fromCharCode(63&o|128):String.fromCharCode(o>>12|224)+String.fromCharCode(o>>6&63|128)+String.fromCharCode(63&o|128)}return t},XsltForms_browser.crc32_arr=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],XsltForms_browser.crc32=function(e){for(var t=-1,r=0,s=e.length;r<s;r++)t=t>>>8^XsltForms_browser.crc32_arr[255&(t^e.charCodeAt(r))];return-1^t},Fleur.DOMParser?(XsltForms_browser.getMeta=function(e,t){return e.getUserData(t)},XsltForms_browser.getDocMeta=XsltForms_browser.getMeta,XsltForms_browser.getBoolMeta=function(e,t){return Boolean(e.getUserData(t))},XsltForms_browser.getType=function(e){var t=e.getUserData("type");return t&&""!==t?t:e.getAttributeNS?e.getAttributeNS("http://www.w3.org/2001/XMLSchema-instance","type"):null},XsltForms_browser.setMeta=function(e,t,r){e.setUserData(t,r)},XsltForms_browser.setDocMeta=XsltForms_browser.setMeta,XsltForms_browser.clearMeta=function(e){if(e.clearUserData(),e.attributes)for(var t=0,r=e.attributes.length;t<r;t++)XsltForms_browser.clearMeta(e.attributes[t]);if(e.childNodes)for(var s=0,o=e.childNodes.length;s<o;s++)XsltForms_browser.clearMeta(e.childNodes[s])},XsltForms_browser.setBoolMeta=function(e,t,r){e&&e.setUserData(t,r)},XsltForms_browser.setTrueBoolMeta=function(e,t){e&&e.setUserData(t,!0)},XsltForms_browser.setFalseBoolMeta=function(e,t){e&&e.setUserData(t,!1)},XsltForms_browser.setType=function(e,t){e&&e.setUserData("type",t)}):(XsltForms_browser.getMeta=function(e,t){return!e.nodeType||e.nodeType!==Fleur.Node.ELEMENT_NODE&&e.nodeType!==Fleur.Node.ATTRIBUTE_NODE?null:e.nodeType===Fleur.Node.ELEMENT_NODE?e.getAttribute("xsltforms_"+t):e.ownerElement?e.ownerElement.getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t):e.oldOwnerElement?e.oldOwnerElement.getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t):e.selectSingleNode("..").getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t)},XsltForms_browser.getDocMeta=function(e,t){return XsltForms_browser.getMeta(e.documentElement,t)},XsltForms_browser.getBoolMeta=function(e,t){return Boolean(e.nodeType===Fleur.Node.ELEMENT_NODE?e.getAttribute("xsltforms_"+t):e.nodeType===Fleur.Node.ATTRIBUTE_NODE&&(e.ownerElement?e.ownerElement.getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t):e.selectSingleNode("..").getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t)))},XsltForms_browser.getType=function(e){if(e.nodeType===Fleur.Node.ELEMENT_NODE){var t=e.getAttribute("xsltforms_type");if(t&&""!==t)return t;if(e.getAttributeNS)return e.getAttributeNS("http://www.w3.org/2001/XMLSchema-instance","type");var r=e.selectSingleNode("@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']");return r&&""!==r.value?r.value:null}if(!e.nodeType||e.nodeType===Fleur.Node.DOCUMENT_NODE)return null;if(e.ownerElement)return e.ownerElement.getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_type");try{return e.selectSingleNode("..").getAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_type")}catch(e){return null}},XsltForms_browser.setMeta=function(e,t,r){e&&e.nodeType&&(e.nodeType===Fleur.Node.ELEMENT_NODE||e.nodeType===Fleur.Node.ATTRIBUTE_NODE)&&(e.nodeType===Fleur.Node.ELEMENT_NODE?e.setAttribute("xsltforms_"+t,r):e.ownerElement?e.ownerElement.setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,r):e.oldOwnerElement?e.oldOwnerElement.setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,r):e.selectSingleNode("..").setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,r))},XsltForms_browser.setDocMeta=function(e,t,r){XsltForms_browser.setMeta(e.documentElement,t,r)},XsltForms_browser.clearMeta=function(e){var t,r=0;if(e&&e.nodeType&&e.nodeType===Fleur.Node.ELEMENT_NODE){if(e.attributes)for(;e.attributes[r];)"xsltforms_"===(t=e.attributes[r].localName?e.attributes[r].localName:e.attributes[r].baseName).substr(0,10)?e.removeAttribute(t):r++;if(e.children)for(var s=0,o=e.children.length;s<o;s++)XsltForms_browser.clearMeta(e.children[s])}},XsltForms_browser.setBoolMeta=function(e,t,r){e&&(r?e.nodeType===Fleur.Node.ELEMENT_NODE?e.setAttribute("xsltforms_"+t,"true"):e.ownerElement?e.ownerElement.setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,"true"):e.selectSingleNode("..").setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,"true"):e.nodeType===Fleur.Node.ELEMENT_NODE?e.removeAttribute("xsltforms_"+t):e.ownerElement?e.ownerElement.removeAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t):e.selectSingleNode("..").removeAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t))},XsltForms_browser.setTrueBoolMeta=function(e,t){e&&(e.nodeType===Fleur.Node.ELEMENT_NODE?e.setAttribute("xsltforms_"+t,"true"):e.ownerElement?e.ownerElement.setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,"true"):e.selectSingleNode("..").setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t,"true"))},XsltForms_browser.setFalseBoolMeta=function(e,t){e&&(e.nodeType===Fleur.Node.ELEMENT_NODE?e.removeAttribute("xsltforms_"+t):e.ownerElement?e.ownerElement.removeAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t):e.selectSingleNode("..").removeAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_"+t))},XsltForms_browser.setType=function(e,t){e&&(e.nodeType===Fleur.Node.ELEMENT_NODE?e.setAttribute("xsltforms_type",t):e.ownerElement?e.ownerElement.setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_type",t):e.selectSingleNode("..").setAttribute("xsltforms_"+(e.localName?e.localName:e.baseName)+"_type",t))}),XsltForms_browser.getNil=function(e){if(e.nodeType===Fleur.Node.ELEMENT_NODE){if(e.getAttributeNS)return"true"===e.getAttributeNS("http://www.w3.org/2001/XMLSchema-instance","nil");var t=e.selectSingleNode("@*[local-name()='nil' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']");return t&&"true"===t.value}return!1},XsltForms_browser.rmValueMeta=function(e,t,r){if(e){var s=XsltForms_browser.getMeta(e,t);s||(s="");var o=" "+r+" ",n=s.indexOf(o);-1!==n&&XsltForms_browser.setMeta(e,t,s.substring(0,n)+s.substring(n+o.length))}},XsltForms_browser.addValueMeta=function(e,t,r){if(e){var s=XsltForms_browser.getMeta(e,t);s||(s="");var o=" "+r+" ";-1===s.indexOf(o)&&XsltForms_browser.setMeta(e,t,s+o)}},XsltForms_browser.inValueMeta=function(e,t,r){if(e){var s=" "+r+" ";return-1!==String(XsltForms_browser.getMeta(e,t)).indexOf(s)}},XsltForms_browser.md2string=function(e){for(var t=e.split("\n"),r=[],s=[],o=[],n="",l=0,a=t.length;l<a;l++)""!==t[l].trim()?(r.push(t[l]),s.push(0)):0!==s.length&&s[s.length-1]++;var i,m,u,c,d=function(e){for(var t=e.trim(),r=t.length-1;r>=0;r--)if("#"!==t.charAt(r))return t.substr(0,r+1).trim();return""},h=!0,p=!1,X=function(e){i=0;var t=e.charCodeAt(i);if(h||42!==t||43!==t||45!==t){for(;t>=48&&t<=57;)i++,t=e.charCodeAt(i);return 46===t&&0!==i&&32===e.charCodeAt(i+1)?i+2:-1}return 32===e.charCodeAt(1)?2:-1},f=!0,g=!1,x=function(e){u=0;var t=e.charCodeAt(u);if(42===t||43===t||45===t)return 32===e.charCodeAt(1)?2:-1;for(;t>=48&&t<=57;)u++,t=e.charCodeAt(u);return f||46!==t||0===u||32!==e.charCodeAt(u+1)?-1:u+2},b=function(e){for(var t="",r=!0,s=!0,o=!0,n=0,l=e.length;n<l;n++){var a=e.charAt(n);if("*"===a||"_"===a)e.charAt(n+1)===a?s&&-1!==e.substr(n+2).indexOf(a+a)||!s?(t+="<"+(s?"":"/")+"strong>",s=!s,n++):t+=a+a:r&&-1!==e.substr(n+1).replace(a+a,"").indexOf(a)||!r?(t+="<"+(r?"":"/")+"em>",r=!r):t+=a;else if("~"===a&&"~"===e.charAt(n+1))o&&-1!==e.substr(n+2).indexOf("~~")||!o?(t+="<"+(o?"":"/")+"del>",o=!o,n++):t+="~~";else if("["===a){var i="",m="";for(a=e.charAt(++n);n<l&&"]"!==a;)i+=a,a=e.charAt(++n);if("("===(a=e.charAt(++n))){for(a=e.charAt(++n);n<l&&")"!==a;)m+=a,a=e.charAt(++n);t+="<a href='"+m+"'>"+i+"</a>"}}else t+=a}return t},F=0;for(l=0,a=r.length;l<a;l++)r[l].startsWith("# ")?o.push(["h1",b(d(r[l].substr(2)))]):r[l].startsWith("## ")?o.push(["h2",b(d(r[l].substr(3)))]):r[l].startsWith("### ")?o.push(["h3",b(d(r[l].substr(4)))]):r[l].startsWith("#### ")?o.push(["h4",b(d(r[l].substr(5)))]):r[l].startsWith("##### ")?o.push(["h5",b(d(r[l].substr(6)))]):r[l].startsWith("###### ")?o.push(["h6",b(d(r[l].substr(7)))]):r[l].startsWith("---")&&r[l].trim()==="-".repeat(r[l].trim().length)?0===o.length||"p"!==o[o.length-1][0]||0!==s[l-1]?o.push(["hr"]):o[o.length-1][0]="h2":r[l].startsWith("===")&&r[l].trim()==="=".repeat(r[l].trim().length)&&0!==o.length&&"p"===o[o.length-1][0]&&0===s[l-1]?o[o.length-1][0]="h1":-1!==X(r[l])&&f?(h&&(p=!1),m=i,o.push(["",(h?"<ol><li>":"<li>")+(0!==s[l]&&l!==a-1&&-1!==X(r[l+1])||p?"<p>":"")+b(r[l].substr(m+1).trim())+(0!==s[l]&&l!==a-1&&-1!==X(r[l+1])||p?"</p>":"")+"</li></ol>"]),h||(o[F][1]=o[F][1].substr(0,o[F][1].length-5)),F=o.length-1,h=!1,p=0!==s[l]):-1!==x(r[l])?(f&&(g=!1),c=u,o.push(["",(f?"<ul><li>":"<li>")+(0!==s[l]&&l!==a-1&&-1!==x(r[l+1])||g?"<p>":"")+b(r[l].substr(c+1).trim())+(0!==s[l]&&l!==a-1&&-1!==x(r[l+1])||g?"</p>":"")+"</li></ul>"]),f||(o[F][1]=o[F][1].substr(0,o[F][1].length-5)),F=o.length-1,f=!1,g=0!==s[l]):0===o.length||"p"!==o[o.length-1][0]||0!==s[l-1]?o.push([1===t.length?"":"p",[b(r[l])]]):o[o.length-1][1].push(b(r[l]));for(l=0,a=o.length;l<a;l++){if(""!==o[l][0]&&(n+="<"+o[l][0]+">"),"p"===o[l][0])for(var _=0,y=o[l][1].length;_<y;_++)0!==_&&(n+="<br/>"),n+=o[l][1][_];else 2===o[l].length&&(n+=o[l][1]);""!==o[l][0]&&(n+="</"+o[l][0]+">")}return n},XsltForms_browser.name2string=function(e){var t="";if(!e.nodeType)return"#notanode ("+e+")";switch(e.nodeType){case Fleur.Node.ATTRIBUTE_NODE:t="@";case Fleur.Node.ELEMENT_NODE:return e.namespaceURI&&""!==e.namespaceURI&&(t+="Q{"+e.namespaceURI+"}"),t+(e.baseName||e.localName);case Fleur.Node.ENTRY_NODE:return"?"+(e.baseName||e.localName);case Fleur.Node.TEXT_NODE:return"#text";case Fleur.Node.CDATA_NODE:return"#cdata";case Fleur.Node.PROCESSING_INSTRUCTION_NODE:return"#processing-instruction";case Fleur.Node.COMMENT_NODE:return"#comment";case Fleur.Node.DOCUMENT_NODE:return"#document";case Fleur.Node.MAP_NODE:return"#map";case Fleur.Node.ARRAY_NODE:return"#array";case Fleur.Node.SEQUENCE_NODE:return"#sequence"}},!XsltForms_browser.isIE&&!XsltForms_browser.isIE11){if(void 0===XMLDocument)var XMLDocument=Document;XMLDocument.prototype.selectNodes=function(e,t,r){var s;try{var o=this.evaluate(e,r||this,this.createNSResolver(this.documentElement),t?XPathResult.FIRST_ORDERED_NODE_TYPE:XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(t)return o.singleNodeValue?o.singleNodeValue:null;for(var n=0,l=o.snapshotLength,a=[];n<l;n++)a.push(o.snapshotItem(n));return a}catch(t){var i=[];switch(e){case"@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']":for(var m=0,u=r.attributes.length;m<u;m++)if("type"===r.attributes[m].name&&"http://www.w3.org/2001/XMLSchema-instance"===r.attributes[m].namespaceURI){i.push(r.attributes[m]);break}break;case"@*[local-name()='nil' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']":for(var c=0,d=r.attributes.length;c<d;c++)if("nil"===r.attributes[c].name&&"http://www.w3.org/2001/XMLSchema-instance"===r.attributes[c].namespaceURI){i.push(r.attributes[c]);break}break;case"descendant::*[@xsltforms_notrelevant = 'true']":if(s=r.firstChild)for(;s!==r;)if(s.nodeType===Fleur.Node.ELEMENT_NODE&&"true"===s.getAttribute("xsltforms_notrelevant")&&i.push(s),s.firstChild)s=s.firstChild;else{for(;!s.nextSibling&&s!==r;)s=s.parentNode;s!==r&&(s=s.nextSibling)}break;case"descendant-or-self::*[@*[starts-with(name(),'xsltforms_')]]":if(s=(r=r.parentNode).firstChild)for(;s!==r;){if(s.nodeType===Fleur.Node.ELEMENT_NODE)for(var h=0,p=s.attributes.length;h<p;h++)if("xsltforms_"===s.attributes[h].name.substring(0,10)){i.push(s);break}if(s.firstChild)s=s.firstChild;else{for(;!s.nextSibling&&s!==r;)s=s.parentNode;s!==r&&(s=s.nextSibling)}}}return i}},XMLDocument.prototype.selectSingleNode=function(e){return this.selectNodes(e,!0)[0]},XMLDocument.prototype.createNode=function(e,t,r){switch(e){case Fleur.Node.ELEMENT_NODE:return this.createElementNS(r,t);case Fleur.Node.ATTRIBUTE_NODE:return this.createAttributeNS(r,t);default:return null}},Node.prototype.selectNodes=function(e){return this.ownerDocument.selectNodes(e,!1,this)},Node.prototype.selectSingleNode=function(e){return this.ownerDocument.selectNodes(e,!0,this)}}function XsltForms_numberList(e,t,r,s,o,n){this.element=XsltForms_browser.createElement("ul",e,null,t),this.move=0,this.input=r,this.min=s,this.max=o,this.minlength=n||1;var l=this;this.createChild("+",function(){l.start(1)},function(){l.stop()});for(var a=0;a<7;a++)this.createChild(" ",function(e){l.input.value=XsltForms_browser.events.getTarget(e).childNodes[0].nodeValue,l.close(),XsltForms_browser.events.dispatch(l.input,"change")});this.createChild("-",function(){l.start(-1)},function(){l.stop()})}function fleur(expression){let result,compiled;const current=XsltForms_globals.defaultModel.getInstanceDocument().documentElement;let ctx=new XsltForms_exprContext(XsltForms_subform.subforms["xsltforms-mainform"],current,null,null,null,Fleur.XPathNSResolver_default,current,null),arr;if(Fleur.minimal)try{compiled=Fleur.XPathEvaluator._xp2js(expression,"",""),eval("arr = "+compiled+";"),compiled=XsltForms_FleurConv[arr[0]](arr[1]),compiled=eval(compiled);let res=compiled.evaluate(ctx);switch(typeof res){case"number":result=String(res);break;case"boolean":result=String(res)+"()";break;case"string":result='"'+res+'"';break;case"object":if(0===res.length)result="()";else if(1===res.length)result=XsltForms_browser.saveNode(res[0],"application/xml");else{result="("+XsltForms_browser.saveNode(res[0],"application/xml");for(let e=1,t=res.length;e<t;e++)result+=","+XsltForms_browser.saveNode(res[e],"application/xml");result+=")"}}}catch(e){result="Error: "+(e.message.startsWith("~~~~")?e.message.substr(4,e.message.length-8):e.message)}else try{arr=Fleur.XQueryParser._xp2js(expression,[],[],0),compiled=new Fleur.Transpiler("ctx","  ").funcdef(arr),compiled=eval(compiled);let res=compiled(new Fleur.Context(ctx.node,{nsresolver:ctx.nsresolver},ctx.depsNodes,ctx.depsElements)).item;result=Fleur.Serializer._serializeNodeToXQuery(res,!1,"")}catch(e){result="Error "+e.localName+": "+e.description+" ["+(e.value.schemaTypeInfo?Fleur.Serializer._serializeNodeToXQuery(e.value,!1,""):e.value.data)+"]"}return result}XsltForms_browser.debugConsole={element_:null,doc_:null,isInit_:!1,time_:0,init_:function(){this.element_=document.getElementById("xsltforms-console"),this.isInit_=!0,this.time_=(new Date).getTime()},write:function(e){try{this.doc_||(this.doc_=XsltForms_browser.createXMLDocument('<tracelog xmlns=""/>'));var t=this.doc_.createElement("event");t.appendChild(this.doc_.createTextNode(XsltForms_browser.i18n.format(new Date,"yyyy-MM-ddThh:mm:ssz",!0)+" "+e)),this.doc_.documentElement.appendChild(t),200===this.doc_.documentElement.children.length&&this.doc_.documentElement.removeChild(this.doc_.documentElement.firstChild)}catch(e){}},clear:function(){if(this.isOpen()){for(;this.element_.firstChild;)this.element_.removeChild(this.element_.firstChild);this.time_=(new Date).getTime()}},isOpen:function(){return this.isInit_||this.init_(),this.element_}},XsltForms_browser.dialog={openPosition:{},dialogs:[],init:!1,initzindex:50,zindex:0,selectstack:[],dialogDiv:function(e){var t=null;if("string"!=typeof e){var r=e.getAttribute("id");t=r&&""!==r?XsltForms_idManager.find(r):e}else t=XsltForms_idManager.find(e);return t||XsltForms_browser.debugConsole.write("Unknown dialog("+e+")!"),t},show:function(e,t,r){if((e=this.dialogDiv(e))&&this.dialogs[this.dialogs.length-1]!==e){var s;if(this.dialogs=XsltForms_browser.removeArrayItem(this.dialogs,e),this.dialogs.push(e),r){var o=document.getElementsByTagName("xforms-dialog-surround")[0];o.style.display="block",o.style.zIndex=2*(this.zindex+this.initzindex),this.zindex++,s=XsltForms_browser.getWindowSize(),o.style.height=s.height+"px",o.style.width=s.width+"px",o.style.top=s.scrollY+"px",o.style.left=s.scrollX+"px";var n=function(){var e=document.getElementsByTagName("xforms-dialog-surround")[0],t=XsltForms_browser.getWindowSize();e.style.height=t.height+"px",e.style.width=t.width+"px",e.style.top=t.scrollY+"px",e.style.left=t.scrollX+"px"};window.onscroll=n,window.onresize=n}if(e.style.display="block",e.style.zIndex=2*(this.zindex+this.initzindex)-1,this.showSelects(e,!1,r),t){var l=XsltForms_browser.getAbsolutePos(t);XsltForms_browser.setPos(e,l.x,l.y+t.offsetHeight)}else{var a=(s=XsltForms_browser.getWindowSize()).scrollY+(s.height-e.offsetHeight)/2;XsltForms_browser.setPos(e,(s.width-e.offsetWidth)/2,a>0?a:100)}}},hide:function(e,t){if(e=this.dialogDiv(e)){var r=this.dialogs.length;this.dialogs=XsltForms_browser.removeArrayItem(this.dialogs,e),this.dialogs.length!==r&&(this.showSelects(e,!0,t),e.style.display="none",t&&(this.dialogs.length?(this.zindex--,document.getElementsByTagName("xforms-dialog-surround")[0].style.zIndex=2*(this.zindex+this.initzindex)-2,this.dialogs.length&&(this.dialogs[this.dialogs.length-1].style.zIndex=2*(this.zindex+this.initzindex)-1)):(this.zindex=0,document.getElementsByTagName("xforms-dialog-surround")[0].style.display="none",window.onscroll=null,window.onresize=null)))}},knownSelect:function(e){if(XsltForms_browser.isIE6)for(var t=0,r=this.zindex;t<r;t++)for(var s=0,o=this.selectstack[t].length;s<o;s++)if(this.selectstack[t][s].select===e)return!0;return!1},showSelects:function(e,t,r){if(XsltForms_browser.isIE6){for(var s=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","select"):document.getElementsByTagName("select"),o=XsltForms_browser.getAbsolutePos(e),n=e.offsetWidth,l=e.offsetHeight,a=[],i=0,m=s.length;i<m;i++){for(var u=s[i],c=u.parentNode;c&&c!==e;)c=c.parentNode;if(c!==e){var d=XsltForms_browser.getAbsolutePos(u),h=u.offsetWidth,p=u.offsetHeight,X=d.x+h>o.x&&d.x<o.x+n&&d.y+p>o.y&&d.y<o.y+l;if(r)if(t){for(var f=0,g=(a=this.selectstack[this.zindex]).length;f<g;f++)if(a[f].select===u){u.disabled=a[f].disabled,u.style.visibility=a[f].visibility;break}}else{var x={select:u,disabled:u.disabled,visibility:u.style.visibility};a[a.length]=x,X?u.style.visibility="hidden":u.disabled=!0}else X&&(u.style.visibility=t?"":"hidden")}}r&&!t&&(this.selectstack[this.zindex-1]=a)}}},XsltForms_browser.events={},XsltForms_browser.isIE&&!XsltForms_browser.isIE9?(XsltForms_browser.events.attach=function(e,t,r,s){e.attachEvent("on"+t,function(e){r.call(window.event.srcElement,e)})},XsltForms_browser.events.detach=function(e,t,r,s){e.detachEvent("on"+t,r)},XsltForms_browser.events.getTarget=function(){return window.event.srcElement},XsltForms_browser.events.dispatch=function(e,t){e.fireEvent("on"+t,document.createEventObject())}):(XsltForms_browser.events.attach=function(e,t,r,s){e!==window||window.addEventListener||(e=document),e.addEventListener(t,r,s)},XsltForms_browser.events.detach=function(e,t,r,s){e!==window||window.addEventListener||(e=document),e.removeEventListener(t,r,s)},XsltForms_browser.events.getTarget=function(e){return e.target},XsltForms_browser.events.dispatch=function(e,t){var r=document.createEvent("Event");r.initEvent(t,!0,!0),e.dispatchEvent(r)}),XsltForms_browser.i18n={messages:null,lang:null,langs:["cz","de","el","en","en_us","es","fr","gl","ko","it","ja","nb_no","nl","nn_no","pl","pt","ro","ru","si","sk","zh","zh_cn","zh_tw"],asyncinit:function(e){if(document.documentElement.lang&&(XsltForms_globals.language=document.documentElement.lang.replace("-","_").toLowerCase()),!(XsltForms_globals.standalone||"navigator"!==XsltForms_globals.language&&XsltForms_browser.config&&XsltForms_globals.language===XsltForms_browser.selectSingleNodeText("language",XsltForms_browser.config))){var t="navigator"===XsltForms_globals.language?navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"undefined":XsltForms_globals.language;t=t.replace("-","_").toLowerCase();var r=XsltForms_browser.inArray(t,XsltForms_browser.i18n.langs);if(!r){var s=t.indexOf("_");-1!==s&&(t=t.substring(0,s)),r=XsltForms_browser.inArray(t,XsltForms_browser.i18n.langs)}if(XsltForms_globals.language="default",r)return void XsltForms_browser.loadProperties("config_"+t+".xsl",e)}e()},config_data:{default:{"calendar.label":"...","calendar.day0":"Mon","calendar.day1":"Tue","calendar.day2":"Wed","calendar.day3":"Thu","calendar.day4":"Fri","calendar.day5":"Sat","calendar.day6":"Sun","calendar.initDay":"6","calendar.month0":"January","calendar.month1":"February","calendar.month2":"March","calendar.month3":"April","calendar.month4":"May","calendar.month5":"June","calendar.month6":"July","calendar.month7":"August","calendar.month8":"September","calendar.month9":"October","calendar.month10":"November","calendar.month11":"December","calendar.close":"Close","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":".",status:"... Loading ..."},cz:{"calendar.label":"...","calendar.day0":"Po","calendar.day1":"Út","calendar.day2":"St","calendar.day3":"Čt","calendar.day4":"Pá","calendar.day5":"So","calendar.day6":"Ne","calendar.initDay":"0","calendar.month0":"leden","calendar.month1":"únor","calendar.month2":"březen","calendar.month3":"duben","calendar.month4":"květen","calendar.month5":"červen","calendar.month6":"červenec","calendar.month7":"srpen","calendar.month8":"září","calendar.month9":"říjen","calendar.month10":"listopad","calendar.month11":"prosinec","calendar.close":"zavřít","format.date":"dd.MM. yyyy","format.datetime":"dd.MM. yyyy, hh.mm:ss","format.decimal":",",status:"... Nahrávám ..."},de:{"calendar.label":"...","calendar.day0":"Mo","calendar.day1":"Di","calendar.day2":"Mi","calendar.day3":"Do","calendar.day4":"Fr","calendar.day5":"Sa","calendar.day6":"So","calendar.initDay":"0","calendar.month0":"Januar","calendar.month1":"Februar","calendar.month2":"März","calendar.month3":"April","calendar.month4":"Mai","calendar.month5":"Juni","calendar.month6":"Juli","calendar.month7":"August","calendar.month8":"September","calendar.month9":"Oktober","calendar.month10":"November","calendar.month11":"Dezember","calendar.close":"Schließen","format.date":"dd.MM.yyyy","format.datetime":"dd.MM.yyyy hh:mm:ss","format.decimal":",",status:"... Lade ..."},el:{"calendar.label":"...","calendar.day0":"Δευ","calendar.day1":"Τρι","calendar.day2":"Τετ","calendar.day3":"Πεμ","calendar.day4":"Παρ","calendar.day5":"Σαβ","calendar.day6":"Κυρ","calendar.initDay":"0","calendar.month0":"Ιανουάριος","calendar.month1":"Φεβρουάριος","calendar.month2":"Μάρτιος","calendar.month3":"Απρίλιος","calendar.month4":"Μάιος","calendar.month5":"Ιούνιος","calendar.month6":"Ιούλιος","calendar.month7":"Αύγουστος","calendar.month8":"Σεπτέμβριος","calendar.month9":"Οκτώβριος","calendar.month10":"Νοέμβριος","calendar.month11":"Δεκέμβριος","calendar.close":"Κοντά","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":".",status:"... Φορτώνονται ..."},en:{"calendar.label":"...","calendar.day0":"Mon","calendar.day1":"Tue","calendar.day2":"Wed","calendar.day3":"Thu","calendar.day4":"Fri","calendar.day5":"Sat","calendar.day6":"Sun","calendar.initDay":"6","calendar.month0":"January","calendar.month1":"February","calendar.month2":"March","calendar.month3":"April","calendar.month4":"May","calendar.month5":"June","calendar.month6":"July","calendar.month7":"August","calendar.month8":"September","calendar.month9":"October","calendar.month10":"November","calendar.month11":"December","calendar.close":"Close","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":".",status:"... Loading ..."},en_us:{"calendar.label":"...","calendar.day0":"Mon","calendar.day1":"Tue","calendar.day2":"Wed","calendar.day3":"Thu","calendar.day4":"Fri","calendar.day5":"Sat","calendar.day6":"Sun","calendar.initDay":"6","calendar.month0":"January","calendar.month1":"February","calendar.month2":"March","calendar.month3":"April","calendar.month4":"May","calendar.month5":"June","calendar.month6":"July","calendar.month7":"August","calendar.month8":"September","calendar.month9":"October","calendar.month10":"November","calendar.month11":"December","calendar.close":"Close","format.date":"MM/dd/yyyy","format.datetime":"MM/dd/yyyy hh:mm:ss","format.decimal":".","format-number.decimal-separator-sign":".","format-number.exponent-separator-sign":"e","format-number.grouping-separator-sign":",","format-number.infinity":"Infinity","format-number.minus-sign":"-","format-number.NaN":"NaN","format-number.percent-sign":"%","format-number.per-mille-sign":"‰",status:"... Loading ..."},es:{"calendar.label":"...","calendar.day0":"Lun","calendar.day1":"Mar","calendar.day2":"Mie","calendar.day3":"Jue","calendar.day4":"Vie","calendar.day5":"Sab","calendar.day6":"Dom","calendar.initDay":"0","calendar.month0":"Enero","calendar.month1":"Febrero","calendar.month2":"Marzo","calendar.month3":"Abril","calendar.month4":"Mayo","calendar.month5":"Junio","calendar.month6":"Julio","calendar.month7":"Agosto","calendar.month8":"Septiembre","calendar.month9":"Octubre","calendar.month10":"Noviembre","calendar.month11":"Diciembre","calendar.close":"Cerrar","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... Cargando ..."},fr:{"calendar.label":"...","calendar.day0":"Lun","calendar.day1":"Mar","calendar.day2":"Mer","calendar.day3":"Jeu","calendar.day4":"Ven","calendar.day5":"Sam","calendar.day6":"Dim","calendar.initDay":"0","calendar.month0":"Janvier","calendar.month1":"Février","calendar.month2":"Mars","calendar.month3":"Avril","calendar.month4":"Mai","calendar.month5":"Juin","calendar.month6":"Juillet","calendar.month7":"Août","calendar.month8":"Septembre","calendar.month9":"Octobre","calendar.month10":"Novembre","calendar.month11":"Décembre","calendar.close":"Fermer","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",","format-number.decimal-separator-sign":",","format-number.exponent-separator-sign":".10^","format-number.grouping-separator-sign":" ","format-number.infinity":"Infini","format-number.minus-sign":"-","format-number.NaN":"Non numérique","format-number.percent-sign":"%","format-number.per-mille-sign":"‰",status:"Traitement en cours"},gl:{"calendar.label":"...","calendar.day0":"Lun","calendar.day1":"Mar","calendar.day2":"Mer","calendar.day3":"Xov","calendar.day4":"Ven","calendar.day5":"Sab","calendar.day6":"Dom","calendar.initDay":"0","calendar.month0":"Xaneiro","calendar.month1":"Febreiro","calendar.month2":"Marzo","calendar.month3":"Abril","calendar.month4":"Maio","calendar.month5":"Xuño","calendar.month6":"Xulio","calendar.month7":"Agosto","calendar.month8":"Septembro","calendar.month9":"Outubro","calendar.month10":"Novembro","calendar.month11":"Decembro","calendar.close":"Preto","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... Loading ..."},it:{"calendar.label":"...","calendar.day0":"Lun","calendar.day1":"Mar","calendar.day2":"Mer","calendar.day3":"Gio","calendar.day4":"Ven","calendar.day5":"Sab","calendar.day6":"Dom","calendar.initDay":"0","calendar.month0":"Gennaio","calendar.month1":"Febbraio","calendar.month2":"Marzo","calendar.month3":"Aprile","calendar.month4":"Maggio","calendar.month5":"Giugno","calendar.month6":"Luglio","calendar.month7":"Agosto","calendar.month8":"Settembre","calendar.month9":"Ottobre","calendar.month10":"Novembre","calendar.month11":"Dicembre","calendar.close":"Chiudi","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"Caricamento in corso"},ja:{"calendar.label":"...","calendar.day0":"月","calendar.day1":"火","calendar.day2":"水","calendar.day3":"木","calendar.day4":"金","calendar.day5":"土","calendar.day6":"日","calendar.initDay":"6","calendar.month0":"1月","calendar.month1":"2月","calendar.month2":"3月","calendar.month3":"4月","calendar.month4":"5月","calendar.month5":"6月","calendar.month6":"7月","calendar.month7":"8月","calendar.month8":"9月","calendar.month9":"10月","calendar.month10":"11月","calendar.month11":"12月","calendar.close":"閉じる","format.date":"yyyy/MM/dd","format.datetime":"yyyy/MM/dd hh:mm:ss","format.decimal":".",status:"... 読み込み中 ..."},ko:{"calendar.label":"...","calendar.day0":"월","calendar.day1":"화","calendar.day2":"수","calendar.day3":"목","calendar.day4":"금","calendar.day5":"토","calendar.day6":"일","calendar.initDay":"6","calendar.month0":"1월","calendar.month1":"2월","calendar.month2":"3월","calendar.month3":"4월","calendar.month4":"5월","calendar.month5":"6월","calendar.month6":"7월","calendar.month7":"8월","calendar.month8":"9월","calendar.month9":"10월","calendar.month10":"11월","calendar.month11":"12월","calendar.close":"닫기","format.date":"yyyy-MM-dd","format.datetime":"yyyy-MM-dd hh:mm:ss","format.decimal":".",status:"... 로드하는 중 ..."},nb_no:{"calendar.label":"...","calendar.day0":"Man","calendar.day1":"Tir","calendar.day2":"Ons","calendar.day3":"Tor","calendar.day4":"Fre","calendar.day5":"Lør","calendar.day6":"Søn","calendar.initDay":"0","calendar.month0":"Januar","calendar.month1":"Februar","calendar.month2":"Mars","calendar.month3":"April","calendar.month4":"Mai","calendar.month5":"Juni","calendar.month6":"Juli","calendar.month7":"August","calendar.month8":"September","calendar.month9":"Oktober","calendar.month10":"November","calendar.month11":"Desember","calendar.close":"Lukk","format.date":"dd.MM.yyyy","format.datetime":"dd.MM.yyyy kl. hh.mm.ss","format.decimal":",",status:"... Loading ..."},nl:{"calendar.label":"...","calendar.day0":"Ma","calendar.day1":"Di","calendar.day2":"Wo","calendar.day3":"Do","calendar.day4":"Vr","calendar.day5":"Za","calendar.day6":"Zo","calendar.initDay":"6","calendar.month0":"januari","calendar.month1":"februari","calendar.month2":"maart","calendar.month3":"april","calendar.month4":"mei","calendar.month5":"juni","calendar.month6":"juli","calendar.month7":"augustus","calendar.month8":"september","calendar.month9":"oktober","calendar.month10":"november","calendar.month11":"december","calendar.close":"dichtbij","format.date":"dd-MM-yyyy","format.datetime":"dd-MM-yyyy hh:mm:ss","format.decimal":",",status:"... Laden ..."},nn_no:{"calendar.label":"...","calendar.day0":"Mån","calendar.day1":"Tys","calendar.day2":"Ons","calendar.day3":"Tor","calendar.day4":"Fre","calendar.day5":"Lau","calendar.day6":"Sun","calendar.initDay":"0","calendar.month0":"Januar","calendar.month1":"Februar","calendar.month2":"Mars","calendar.month3":"April","calendar.month4":"Mai","calendar.month5":"Juni","calendar.month6":"Juli","calendar.month7":"August","calendar.month8":"September","calendar.month9":"Oktober","calendar.month10":"November","calendar.month11":"Desember","calendar.close":"Lukk","format.date":"dd.MM.yyyy","format.datetime":"dd.MM.yyyy kl. hh.mm.ss","format.decimal":",",status:"... Loading ..."},pl:{"calendar.label":"...","calendar.day0":"Pon","calendar.day1":"Wt","calendar.day2":"Śr","calendar.day3":"Czw","calendar.day4":"Pt","calendar.day5":"Sob","calendar.day6":"Niedz","calendar.initDay":"0","calendar.month0":"Styczeń","calendar.month1":"Luty","calendar.month2":"Marzec","calendar.month3":"Kwiecień","calendar.month4":"Maj","calendar.month5":"Czerwiec","calendar.month6":"Lipiec","calendar.month7":"Sierpień","calendar.month8":"Wrzesień","calendar.month9":"Październik","calendar.month10":"Listopad","calendar.month11":"Grudzień","calendar.close":"Blisko","format.date":"yyyy-MM-dd","format.datetime":"yyyy-MM-dd hh:mm:ss","format.decimal":".",status:"... Wczytywanie ..."},pt:{"calendar.label":"...","calendar.day0":"Seg","calendar.day1":"Ter","calendar.day2":"Qua","calendar.day3":"Qui","calendar.day4":"Sex","calendar.day5":"Sab","calendar.day6":"Dom","calendar.initDay":"0","calendar.month0":"Janeiro","calendar.month1":"Fevereiro","calendar.month2":"Março","calendar.month3":"Abril","calendar.month4":"Maio","calendar.month5":"Junho","calendar.month6":"Julho","calendar.month7":"Agosto","calendar.month8":"Setembro","calendar.month9":"Outubro","calendar.month10":"Novembro","calendar.month11":"Dezembro","calendar.close":"Fechar","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... A carregar ..."},ro:{"calendar.label":"...","calendar.day0":"Lun","calendar.day1":"Mar","calendar.day2":"Mie","calendar.day3":"Joi","calendar.day4":"Vin","calendar.day5":"Sâm","calendar.day6":"Dum","calendar.initDay":"0","calendar.month0":"Ianurie","calendar.month1":"Februarie","calendar.month2":"Martie","calendar.month3":"Aprilie","calendar.month4":"Mai","calendar.month5":"Iunie","calendar.month6":"Iulie","calendar.month7":"August","calendar.month8":"Septembrie","calendar.month9":"Octombrie","calendar.month10":"Noiembrie","calendar.month11":"Decembrie","calendar.close":"Închide","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... Încărcare pagină ..."},ru:{"calendar.label":"...","calendar.day0":"Пон","calendar.day1":"Вто","calendar.day2":"Сре","calendar.day3":"Чет","calendar.day4":"Пят","calendar.day5":"Суб","calendar.day6":"Вос","calendar.initDay":"0","calendar.month0":"Январь","calendar.month1":"Февраль","calendar.month2":"Март","calendar.month3":"Апрель","calendar.month4":"Май","calendar.month5":"Июнь","calendar.month6":"Июль","calendar.month7":"Август","calendar.month8":"Сентябрь","calendar.month9":"Октябрь","calendar.month10":"Ноябрь","calendar.month11":"Декабрь","calendar.close":"Закрыть","format.date":"dd.MM.yyyy","format.datetime":"dd.MM.yyyy hh:mm:ss","format.decimal":",",status:"... Загрузка ..."},si:{"calendar.label":"...","calendar.day0":"Pon","calendar.day1":"Tor","calendar.day2":"Sre","calendar.day3":"Čet","calendar.day4":"Pet","calendar.day5":"Sob","calendar.day6":"Ned","calendar.initDay":"0","calendar.month0":"Januar","calendar.month1":"Februar","calendar.month2":"Marec","calendar.month3":"April","calendar.month4":"Maj","calendar.month5":"Junij","calendar.month6":"Julij","calendar.month7":"Avgust","calendar.month8":"September","calendar.month9":"Oktober","calendar.month10":"November","calendar.month11":"December","calendar.close":"Zapri","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... Nalagam ..."},sk:{"calendar.label":"...","calendar.day0":"pondelok","calendar.day1":"utorok","calendar.day2":"streda","calendar.day3":"štvrtok","calendar.day4":"piatok","calendar.day5":"sobota","calendar.day6":"nedeľa","calendar.initDay":"0","calendar.month0":"Január","calendar.month1":"Február","calendar.month2":"Marec","calendar.month3":"Apríl","calendar.month4":"Máj","calendar.month5":"Jún","calendar.month6":"Júl","calendar.month7":"August","calendar.month8":"September","calendar.month9":"Október","calendar.month10":"November","calendar.month11":"December","calendar.close":"Zavrieť","format.date":"dd/MM/yyyy","format.datetime":"dd/MM/yyyy hh:mm:ss","format.decimal":",",status:"... Načítavam ..."},zh_cn:{"calendar.label":"...","calendar.day0":"周一","calendar.day1":"周二","calendar.day2":"周三","calendar.day3":"周四","calendar.day4":"周五","calendar.day5":"周六","calendar.day6":"周日","calendar.initDay":"6","calendar.month0":"一月","calendar.month1":"二月","calendar.month2":"三月","calendar.month3":"四月","calendar.month4":"五月","calendar.month5":"六月","calendar.month6":"七月","calendar.month7":"八月","calendar.month8":"九月","calendar.month9":"十月","calendar.month10":"十一月","calendar.month11":"十二月","calendar.close":"关闭","format.date":"yyyy/MM/dd","format.datetime":"yyyy/MM/dd hh:mm:ss","format.decimal":".",status:"... 正在加载 ..."},zh_tw:{"calendar.label":"...","calendar.day0":"星期一","calendar.day1":"星期二","calendar.day2":"星期三","calendar.day3":"星期四","calendar.day4":"星期五","calendar.day5":"星期六","calendar.day6":"星期日","calendar.initDay":"6","calendar.month0":"1 月","calendar.month1":"2 月","calendar.month2":"3 月","calendar.month3":"4 月","calendar.month4":"5 月","calendar.month5":"6 月","calendar.month6":"7 月","calendar.month7":"8 月","calendar.month8":"9 月","calendar.month9":"10 月","calendar.month10":"11 月","calendar.month11":"12 月","calendar.close":"關閉","format.date":"yyyy/MM/dd","format.datetime":"yyyy/MM/dd hh:mm:ss","format.decimal":".",status:"... 正在載入 ..."},zh:{"calendar.label":"...","calendar.day0":"一","calendar.day1":"二","calendar.day2":"三","calendar.day3":"四","calendar.day4":"五","calendar.day5":"六","calendar.day6":"日","calendar.initDay":"6","calendar.month0":"一月","calendar.month1":"二月","calendar.month2":"三月","calendar.month3":"四月","calendar.month4":"五月","calendar.month5":"六月","calendar.month6":"七月","calendar.month7":"八月","calendar.month8":"九月","calendar.month9":"十月","calendar.month10":"十一月","calendar.month11":"十二月","calendar.close":"关","format.date":"yyyy-MM-dd","format.datetime":"yyyy-MM-dd hh:mm:ss","format.decimal":".",status:"... 装载中 ..."}},get:function(e,t){if(XsltForms_globals.standalone){if("navigator"!==XsltForms_globals.language)return XsltForms_browser.i18n.config_data[XsltForms_globals.language][e]||XsltForms_browser.i18n.config_data.default[e]||t}else if(!XsltForms_browser.config||"dummy"===XsltForms_browser.config.nodeName)return"Initializing";if("navigator"===XsltForms_globals.language||XsltForms_globals.language!==XsltForms_browser.selectSingleNodeText("language",XsltForms_browser.config)){var r="navigator"===XsltForms_globals.language?navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"undefined":XsltForms_browser.selectSingleNodeText("language",XsltForms_browser.config);r=r.replace("-","_").toLowerCase();var s=XsltForms_browser.inArray(r,XsltForms_browser.i18n.langs);if(!s){var o=r.indexOf("_");-1!==o&&(r=r.substring(0,o)),s=XsltForms_browser.inArray(r,XsltForms_browser.i18n.langs)}if(s){if(XsltForms_globals.standalone)return XsltForms_browser.i18n.config_data[r][e]||XsltForms_browser.i18n.config_data.default[e]||t;XsltForms_browser.loadProperties("config_"+r+".xsl"),XsltForms_globals.language=XsltForms_browser.selectSingleNodeText("language",XsltForms_browser.config)}else XsltForms_globals.language="default"}return XsltForms_browser.selectSingleNodeText(e,XsltForms_browser.config,t)},parse:function(e,t,r){var s=!0;if(!e||e.match("^\\s*$"))return null;var o=t;t||(t=r?"hh:mm:ss":XsltForms_browser.i18n.get("format.datetime"));var n=new Date(2e3,0,1);if(r||(s&=XsltForms_browser.i18n._parse(n,"Year",e,t,"yyyy"),s&=XsltForms_browser.i18n._parse(n,"Month",e,t,"MM"),s&=XsltForms_browser.i18n._parse(n,"Date",e,t,"dd")),XsltForms_browser.i18n._parse(n,"Hours",e,t,"hh"),XsltForms_browser.i18n._parse(n,"Minutes",e,t,"mm"),XsltForms_browser.i18n._parse(n,"Seconds",e,t,"ss"),!o&&XsltForms_globals.AMPM){var l=XsltForms_browser.i18n.get("format.time.AM").toLowerCase();e.substr(e.length-l.length).toLowerCase()===l?12===n.getHours()&&n.setHours(0):12!==n.getHours()&&n.setHours(n.getHours()+12)}return s?n:e},format:function(e,t,r,s){var o,n;if(!e)return"";if("string"==typeof e)return e;var l=t;l||(l=s?"hh:mm:ss":XsltForms_browser.i18n.get("format.datetime"));var a=l;if(!s){l=XsltForms_browser.i18n._format(l,r?e.getDate():e.getUTCDate(),"dd"),l=XsltForms_browser.i18n._format(l,(r?e.getMonth():e.getUTCMonth())+1,"MM");var i=r?e.getFullYear():e.getUTCFullYear();l=XsltForms_browser.i18n._format(l,i<100?(i<(new Date).getFullYear()%100+20?2e3:1900)+i:i,"yyyy")}l=XsltForms_browser.i18n._format(l,n=r?e.getSeconds():e.getUTCSeconds(),"ss"),l=XsltForms_browser.i18n._format(l,r?e.getMinutes():e.getUTCMinutes(),"mm"),l=XsltForms_browser.i18n._format(l,o=r?e.getHours():e.getUTCHours(),"hh",!t);var m=e.getTimezoneOffset();return l=XsltForms_browser.i18n._format(l,r?(m<0?"+":"-")+XsltForms_browser.zeros(Math.floor(Math.abs(m)/60),2)+":"+XsltForms_browser.zeros(Math.abs(m)%60,2):"Z","z"),!t&&XsltForms_globals.AMPM&&(0===n&&":ss"===a.substr(a.length-3)&&(l=l.substr(0,l.length-3)),l+=" "+XsltForms_browser.i18n.get(o<12?"format.time.AM":"format.time.PM")),l},parseDate:function(e){return XsltForms_browser.i18n.parse(e,XsltForms_browser.i18n.get("format.date"))},formatDate:function(e){return XsltForms_browser.i18n.format(e,XsltForms_browser.i18n.get("format.date"),!0)},formatDateTime:function(e){return XsltForms_browser.i18n.format(e,XsltForms_browser.i18n.get("format.datetime"),!0)},formatNumber:function(e,t){if(isNaN(e))return e;var r=String(Math.abs(e)),s=r.indexOf("."),o=parseInt(-1!==s?r.substring(0,s):r,10),n=-1!==s?r.substring(s+1):"",l=XsltForms_browser.i18n.get("format.decimal");return(e<0?"-":"")+o+(t>0?l+XsltForms_browser.zeros(n,t,!0):n?l+n:"")},parseNumber:function(e){var t=XsltForms_browser.i18n.get("format.decimal");if(!e.match("^[\\-+]?([0-9]+(\\"+t+"[0-9]*)?|\\"+t+"[0-9]+)$"))throw"Invalid number "+e;var r=e.indexOf(t),s=Math.abs(parseInt(-1!==r?e.substring(0,r):e,10)),o=-1!==r?e.substring(r+1):null;return("-"===e.substring(0,1)?"-":"")+s+(o?"."+o:"")},_format:function(e,t,r,s){var o=r.length;return s&&"hh"===r&&XsltForms_globals.AMPM&&(0===(t%=12)&&(t=12),o=1),e.replace(r,XsltForms_browser.zeros(t,o))},_parse:function(e,t,r,s,o){var n=!1;if(-1!==s.indexOf(o)){s="^"+(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace(new RegExp("\\.","g"),"\\.")).replace(new RegExp("\\(","g"),"\\(")).replace(new RegExp("\\)","g"),"\\)")).replace(new RegExp(o),"("+o+")!!!")).replace(new RegExp("yyyy"),"[12][0-9]{3}")).replace(new RegExp("MM"),"(?:0?[1-9](?![0-9])|1[0-2])")).replace(new RegExp("dd"),"(?:0?[1-9](?![0-9])|[1-2][0-9]|30|31)")).replace(new RegExp("hh"),"(?:0?[0-9](?![0-9])|1[0-9]|20|21|22|23)")).replace(new RegExp("mm"),"[0-5][0-9]")).replace(new RegExp("ss"),"[0-5][0-9]")).substring(0,s.indexOf(")!!!")+1)+"[^0-9]*.*";var l=new RegExp(s),a="00";if(l.test(r)&&(a=r.replace(l,"$1"),n=!0),"0"===a.charAt(0)&&(a=a.substring(1)),a=parseInt(a,10),isNaN(a))return!1;var i=new Date;return i=i.getFullYear()-2e3,e["set"+t]("Month"===t?a-1:"Year"===t&&a<=i+10?a+2e3:a),n}}},XsltForms_numberList.prototype.show=function(){var e=this.input;this.current=parseInt(e.value,10),this.refresh(),XsltForms_browser.dialog.show(this.element,e,!1)},XsltForms_numberList.prototype.close=function(){XsltForms_browser.dialog.hide(this.element,!1)},XsltForms_numberList.prototype.createChild=function(e,t,r){var s=XsltForms_browser.createElement("li",this.element,e);XsltForms_browser.initHover(s),r?(XsltForms_browser.events.attach(s,"mousedown",t),XsltForms_browser.events.attach(s,"mouseup",r)):XsltForms_browser.events.attach(s,"click",t)},XsltForms_numberList.prototype.refresh=function(){var e=this.element.childNodes,t=this.current;t>=this.max-3?t=this.max-3:t<=this.min+3&&(t=this.min+3);for(var r=t+4,s=1;s<8;s++){XsltForms_browser.setClass(e[s],"xsltforms-listHover",!1);for(var o=String(r-s);o.length<this.minlength;)o="0"+o;e[s].firstChild.nodeValue=o}},XsltForms_numberList.prototype.start=function(e){this.move=e,XsltForms_numberList.current=this,this.run()},XsltForms_numberList.prototype.stop=function(){this.move=0},XsltForms_numberList.prototype.run=function(){(this.move>0&&this.current+3<this.max||this.move<0&&this.current-3>this.min)&&(this.current+=this.move,this.refresh(),setTimeout(XsltForms_numberList.current.run,60))},XsltForms_numberList.current=null,XsltForms_browser.forEach=function(e,t){for(var r=[],s=0,o=arguments.length-2;s<o;s++)r[s]=arguments[s+2];if(e)if("number"==typeof e.length)for(var n=0,l=e.length;n<l;n++){var a=e[n],i="string"==typeof t?a[t]:t;i&&i.apply(a,r)}else for(var m in e)if(e.hasOwnProperty(m)){var u=e[m];("string"==typeof t?u[t]:t).apply(u,r)}},XsltForms_browser.assert=function(e,t){if(!e&&XsltForms_browser.debugConsole.isOpen()){if(XsltForms_globals.debugMode||(XsltForms_globals.debugMode=!0,XsltForms_globals.debugging()),XsltForms_browser.debugConsole.write("Assertion failed: "+t),XsltForms_browser.isIE){this.callstack=[];for(var r=arguments.caller;r;r=r.caller)this.callstack.push(r.name?r.name:"<anonymous>")}else try{XsltForms_undefined()}catch(e){e.stack&&(this.callstack=e.stack.split("\n"),this.callstack.shift(),this.callstack.shift())}if(this.callstack)for(var s=0,o=this.callstack.length;s<o;s++)XsltForms_browser.debugConsole.write("> "+this.callstack[s]);throw new Error(t||"Assertion failed")}},XsltForms_browser.inArray=function(e,t){for(var r=0,s=t.length;r<s;r++)if(e===t[r])return!0;return!1},XsltForms_browser.zeros=function(e,t,r){var s=String(e);if(r)for(;s.length<t;)s+="0";else for(;s.length<t;)s="0"+s;return s},XsltForms_browser.getValue=function(e,t,r){if(XsltForms_browser.assert(e),r)return e.nodeType===Fleur.Node.ATTRIBUTE_NODE?e.nodeValue:XsltForms_browser.saveNode(e,"application/xml");var s=void 0!==e.text?e.text:e.textContent;if(s&&t){var o=XsltForms_schema.getType(XsltForms_browser.getType(e)||"xsd_:string");if(o.format&&o.validate(s))try{s=o.format(s)}catch(e){}}return s},XsltForms_browser.splitNode=function(e,t,r,s){XsltForms_browser.assert(e);for(var o=(void 0!==e.text?e.text:e.textContent).split(t),n=e.ownerDocument.createArray(),l=0,a=o.length;l<a;l++)if(r&&s){var i=o[l].replace(r,"").replace(s,"");""!==i&&n.appendChild(e.ownerDocument.createTextNode(i))}else n.appendChild(e.ownerDocument.createTextNode(o[l]));if(e.nodeType===Fleur.Node.TEXT_NODE)e.parentNode.replaceChild(n,e);else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n)}},XsltForms_browser.getValueItemsetCopy=function(e){XsltForms_browser.assert(e);var t=[];if(e.childNodes)for(var r=0,s=e.childNodes.length;r<s;r++)e.childNodes[r].nodeType===Fleur.Node.ELEMENT_NODE&&t.push(XsltForms_browser.saveNode(e.childNodes[r],"application/xml"));return t},XsltForms_browser.setValue=function(e,t){if(XsltForms_browser.assert(e),e.nodeType===Fleur.Node.ATTRIBUTE_NODE||e.nodeType===Fleur.Node.TEXT_NODE)e.nodeValue=t;else if(!XsltForms_browser.isIE||!e.innerHTML||t instanceof Array){for(;e.firstChild;)e.removeChild(e.firstChild);if(t)if(t instanceof Array)for(var r=0,s=t.length;r<s;r++){var o=e.ownerDocument.createElement("dummy");e.appendChild(o),XsltForms_browser.loadNode(o,t[r],"application/xml")}else for(var n=0,l=t.length;n<l;n+=4096)try{e.appendChild(e.ownerDocument.createTextNode(t.substr(n,4096)))}catch(r){XsltForms_browser.debugConsole.write("ERROR: Cannot set value "+t+" on "+XsltForms_browser.name2string(e)+"; "+r.message)}}else e.innerHTML=XsltForms_browser.escape(t)},XsltForms_browser.run=function(e,t,r,s,o){XsltForms_xmlevents.EventContexts.push(r),s?(XsltForms_browser.dialog.show("xsltforms-status-panel",null,!1),setTimeout(function(){XsltForms_globals.openAction("XsltForms_browser.run#1"),e.execute(document.getElementById(t),null,r),XsltForms_browser.dialog.hide("xsltforms-status-panel",!1),o||r.stopPropagation(),XsltForms_globals.closeAction("XsltForms_browser.run#1"),XsltForms_xmlevents.EventContexts.pop()},1)):(XsltForms_globals.openAction("XsltForms_browser.run#2"),e.execute(t,null,r),o||r.stopPropagation(),XsltForms_globals.closeAction("XsltForms_browser.run#2"),XsltForms_xmlevents.EventContexts.pop())},XsltForms_browser.getId=function(e){return e.id?e.id:e.parentNode.parentNode.parentNode.parentNode.id},XsltForms_browser.show=function(e,t,r){XsltForms_browser.setClass(e.parentNode.lastChild,"xforms-hidden",!r)},XsltForms_browser.copyArray=function(e,t){if(t)for(var r=0,s=e.length;r<s;r++)t[r]=e[r]},XsltForms_browser.removeArrayItem=function(e,t){for(var r=[],s=0,o=e.length;s<o;s++)e[s]!==t&&r.push(e[s]);return r},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"")},String.prototype.addslashes=function(){return this.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')};const XsltForms_debugger={active:!1,open:function(){XsltForms_debugger.active=!0,XsltForms_debugger.xfdebugger=document.createElement("xforms-debugger"),XsltForms_debugger.xfbody=document.createElement("xforms-body"),XsltForms_debugger.xfgutter=document.createElement("xforms-gutter"),XsltForms_debugger.xfboard=document.createElement("xforms-board");for(let e=0,t=document.body.childNodes.length;e<t;e++)XsltForms_debugger.xfbody.appendChild(document.body.firstChild);XsltForms_debugger.xfboard.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" style="float:right; cursor:pointer" onclick="XsltForms_debugger.close()" height="20" width="20"><g transform="translate(4,4) scale (0.5,0.5)"><path stroke-miterlimit="4" d="M 0,0 20,20" style="opacity:1;fill:grey;stroke:grey;stroke-width:5;stroke-linecap:round;stroke-miterlimit:4;fill-opacity:1;stroke-opacity:1"/><path stroke-miterlimit="4" d="M 0,20 20,0" style="opacity:1;fill:grey;stroke:grey;stroke-width:5;stroke-linecap:round;stroke-miterlimit:4;fill-opacity:1;stroke-opacity:1"/></g></svg>',XsltForms_debugger.xfboard.innerHTML+="XForms Debugger (XSLTForms "+XsltForms_globals.fileVersion+(Fleur.version?" + Fleur "+Fleur.version:"")+")<br>",XsltForms_debugger.xfhistory=document.createElement("xforms-console-history"),XsltForms_debugger.xfboard.appendChild(XsltForms_debugger.xfhistory);const e=document.createElement("xforms-body");e.innerHTML="<span style='vertical-align:top'>&gt; </span><textarea id='xforms-debugger-textarea' oninput='(elt => elt.style.height = elt.scrollHeight + \"px\")(this)' autofocus></textarea>",XsltForms_debugger.xfboard.appendChild(e),XsltForms_debugger.xfdebugger.appendChild(XsltForms_debugger.xfbody),XsltForms_debugger.xfdebugger.appendChild(XsltForms_debugger.xfgutter),XsltForms_debugger.xfdebugger.appendChild(XsltForms_debugger.xfboard),document.body.appendChild(XsltForms_debugger.xfdebugger);let t=!1;XsltForms_debugger.draggingdown=(e=>t=e.target===XsltForms_debugger.xfgutter),XsltForms_debugger.draggingmove=(e=>{t&&(XsltForms_debugger.xfbody.style.height=Number(Math.max(200,e.clientY-XsltForms_debugger.xfdebugger.offsetTop-4))+"px",XsltForms_debugger.xfbody.style.flexGrow=0,e.preventDefault())}),XsltForms_debugger.draggingup=(()=>t=!1),document.addEventListener("mousedown",XsltForms_debugger.draggingdown),document.addEventListener("mousemove",XsltForms_debugger.draggingmove),document.addEventListener("mouseup",XsltForms_debugger.draggingup),XsltForms_debugger.textarea=document.getElementById("xforms-debugger-textarea"),XsltForms_debugger.textarea.addEventListener("keypress",e=>{if(13===e.keyCode&&!e.altKey&&!e.ctrlKey&&!e.shiftKey){if(""===e.target.value.trim()){const e=document.createElement("xforms-expression");e.textContent=">",XsltForms_debugger.xfhistory.appendChild(e)}else{const t=document.createElement("xforms-expression");t.textContent="-> "+e.target.value,XsltForms_debugger.xfhistory.appendChild(t);const r=document.createElement("xforms-result");r.textContent="<- "+fleur(e.target.value),XsltForms_debugger.xfhistory.appendChild(r)}XsltForms_debugger.textarea.value="",e.target.style.height=e.target.scrollHeight+"px",e.stopPropagation(),e.preventDefault()}})},close:function(){document.removeEventListener("mousedown",XsltForms_debugger.draggingdown),document.removeEventListener("mousemove",XsltForms_debugger.draggingmove),document.removeEventListener("mouseup",XsltForms_debugger.draggingup);for(let e=0,t=XsltForms_debugger.xfbody.childNodes.length;e<t;e++)document.body.appendChild(XsltForms_debugger.xfbody.firstChild);document.body.removeChild(XsltForms_debugger.xfdebugger),XsltForms_debugger.active=!1}};function XsltForms_subform(e,t,r){this.subform=e,this.id=t,this.eltid=r,r&&(document.getElementById(r).xfSubform=this),this.models=[],this.schemas=[],this.instances=[],this.binds=[],this.xpaths=[],this.expressions={},this.subforms=[],this.listeners=[],this.ready=!1,e&&e.subforms.push(this),XsltForms_subform.subforms[t]=this}function XsltForms_binding(e,t,r,s,o){var n,l=r?r.startsWith("xf-template-")?XsltForms_binding.t2c(t.getAttribute(r)):t.getAttribute(r):t.getAttribute("xf-ref")||t.getAttribute("xf-value"),a=t.getAttribute("xf-model"),i=t.getAttribute("xf-repeat-ref"===r?"xf-repeat-bind":"data-xf-repeat-ref"===r?"data-xf-repeat-bind":"xf-bind");this.type=s||("xforms-var"===t.localName.toLowerCase()?"#nodes or constant":t.hasAttribute("xf-value")&&!t.hasAttribute("xf-ref")&&"xf-repeat-ref"!==r&&"data-xf-repeat-ref"!==r?"xsd:string":null),this.bind=i||null,this.xpath=l?XsltForms_xpath.create(e,l):null,a&&(n=document.getElementById(a)),this.model=n?n.xfElement:a||o,this.result=null}function XsltForms_mipbinding(e,t,r,s,o){this.binding=new XsltForms_binding(e,t,r,s,o),this.nodes=[],this.depsElements=[],this.depsNodes=[]}XsltForms_subform.subforms={},new XsltForms_subform(null,"xsltforms-mainform"),XsltForms_subform.prototype.construct=function(){for(var e=0,t=this.instances.length;e<t;e++)this.instances[e].construct(this);for(XsltForms_browser.forEach(this.binds,"refresh"),e=0,t=this.instances.length;e<t;e++)this.instances[e].revalidate();window.setTimeout('XsltForms_xmlevents.dispatchList(XsltForms_subform.subforms["'+this.id+'"].models, "xforms-subform-ready")',1),this.ready=!0},XsltForms_subform.prototype.dispose=function(){for(var e=0,t=this.subforms.length;e<t;e++)this.subforms[0].dispose();this.subforms=null,XsltForms_globals.dispose(document.getElementById(this.eltid));for(var r=0,s=this.schemas.length;r<s;r++)this.schemas[r].dispose(this),this.schemas[r]=null;this.schemas=null;for(var o=0,n=this.instances.length;o<n;o++)this.instances[o].dispose(this),this.instances[o]=null;this.instances=null;for(var l=0,a=this.models.length;l<a;l++)this.models[l].dispose(this),this.models[l]=null;this.models=null;for(var i=0,m=this.xpaths.length;i<m;i++)this.xpaths[i].dispose(this),this.xpaths[i]=null;this.xpaths=null,this.expressions=null,this.binds=null,XsltForms_subform.subforms[this.id]=null;var u=this.subform;if(u)for(var c=u.subforms,d=0,h=c.length;d<h;d++)if(c[d]===this){d<h-1&&(c[d]=c[h-1]),c.pop();break}for(var p=0,X=this.listeners.length;p<X;p++)this.listeners[p].detach(),this.listeners[p]=null;this.listeners=null},XsltForms_binding.t2c=function(e){for(var t=0,r=e.length,s=e.charAt(t),o=!0,n="",l="",a=[];t<r;)o?"{"===s&&"{"!==e.charAt(t+1)?(""!==n&&(a.push('"'+n+'"'),n=""),o=!1):'"'===s?n+='""':"{"===s?(n+="{",t++):n+=s:"}"===s?(a.push(l),l="",o=!0):l+=s,s=e.charAt(++t);return""!==n&&a.push('"'+n+'"'),1!==a.length?"concat("+a.join(",")+")":a[0]},XsltForms_binding.prototype.evaluate=function(){alert("Error")},XsltForms_binding.prototype.bind_evaluate=function(e,t,r,s,o,n){var l=null;if("string"==typeof this.model)return null;if(this.bind){if("string"==typeof this.bind){var a=document.getElementById(this.bind);if(!a)return XsltForms_browser.debugConsole.write("Binding evaluation returned null for bind: "+this.bind),null;this.bind=a.xfElement}l=this.bind.nodes,XsltForms_browser.copyArray(this.bind.depsNodes,s),XsltForms_browser.copyArray(this.bind.depsElements,n)}else{var i=new XsltForms_exprContext(e,!t||this.model&&this.model!==document.getElementById(XsltForms_browser.getDocMeta(t.ownerDocument,"model")).xfElement?this.model?this.model.getInstanceDocument().documentElement:XsltForms_globals.defaultModel.getInstanceDocument().documentElement:t,null,null,null,null,t,r,s,o,n,this.model);l=this.xpath.xpath_evaluate(i)}switch(XsltForms_browser.assert(this.type||!l||"object"==typeof l,"Binding evaluation didn't returned a nodeset but '"+("object"==typeof l?"":l)+"' for "+(this.bind?"bind: "+this.bind:"XPath expression: "+this.xpath.expression)),this.type){case"xsd:string":l=XsltForms_globals.stringValue(l);break;case"xsd:boolean":l=XsltForms_globals.booleanValue(l);break;case"xsd:anyAtomicType":"object"==typeof l&&(l=XsltForms_globals.stringValue(l))}return this.result=l,l},XsltForms_mipbinding.prototype.evaluate=function(e,t){for(var r=null,s=null,o=this.nodes.length,n=0,l=this.nodes.length;n<l;n++)if(t===this.nodes[n].node){r=this.nodes[n].deps,s=this.nodes[n].depsN,o=n;break}r||s||(this.nodes.push({node:t,deps:[],depsN:[]}),r=s=[]);for(var a=!XsltForms_globals.ready||0===r.length,i=XsltForms_globals.changes,m=0,u=s.length;!a&&m<u;m++)a=""===s[m].nodeName;for(var c=0,d=r.length;!a&&c<d;c++)for(var h=r[c],p=0,X=i.length;!a&&p<X;p++)if(h===i[p])if(h.instances)if(h.rebuilded||h.newRebuilded)a=!0;else for(var f=0,g=s.length;!a&&f<g;f++)a=XsltForms_browser.inArray(s[f],h.nodesChanged);else a=!0;return a?(s.length=0,r.length=0,this.nodes[o].result=this.binding.bind_evaluate(e.subform,e.node,null,this.nodes[o].depsN,null,this.nodes[o].deps),this.nodes[o].result):this.nodes[o].result},XsltForms_mipbinding.prototype.nodedispose_=function(e){for(var t=0,r=this.nodes.length;t<r;t++)if(e===this.nodes[t].node){this.nodes[t]=this.nodes[r-1],this.nodes.pop();break}},XsltForms_mipbinding.nodedispose=function(e){var t=XsltForms_browser.getMeta(e,"bind");if(t)for(var r=t.split(" "),s=0,o=r.length;s<o;s++){var n=XsltForms_collection[r[s]].xfElement;n.required&&n.required.nodedispose_(e),n.relevant&&n.relevant.nodedispose_(e),n.readonly&&n.readonly.nodedispose_(e),n.constraint&&n.constraint.nodedispose_(e),n.calculate&&n.calculate.nodedispose_(e)}for(var l=e.firstChild;l;l=l.nextSibling)l.nodeType===Fleur.Node.ELEMENT_NODE&&XsltForms_mipbinding.nodedispose(l)};var XsltForms_idManager={cloneId:function(e){XsltForms_browser.assert(e&&e.id);var t=e.getAttribute("oldid")||e.id,r=this.data[t];r||(r=[],this.data[t]=r);var s="clonedId"+this.index++;r.push(s),e.setAttribute("oldid",t),e.id=s},find:function(e){var t=this.data[e];if(t)for(var r=0,s=t.length;r<s;r++){var o=document.getElementById(t[r]);if(o)for(var n=o.parentNode;n.nodeType===Fleur.Node.ELEMENT_NODE;){if("xforms-repeat-item"===n.localName.toLowerCase()||n.getAttribute(!1)){if("true"===n.getAttribute("xf-selected"))return o;break}n=n.parentNode}}return document.getElementById(e)},clear:function(){for(var e=0,t=this.data.length;e<t;e++)this.data[e]=null;this.data=[],this.index=0},data:[],index:0},XsltForms_classes={},XsltForms_collection=[];function XsltForms_class(className,parentName,customElementName,template){if(XsltForms_classes[customElementName]=this,this.className=className,this.parentName=parentName,this.customElementName=customElementName,this.template=document.createElement(this.customElementName),this.template.innerHTML=template,this.template=Array.prototype.slice.call(this.template.children),this.classbinding=new Function("subform","elt","if (!elt.xfElement) { XsltForms_classes[elt.localName.toLowerCase()].applyTemplate(elt); elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new "+this.className+"(subform, elt); }"),"undefined"!=typeof customElements){var instr;this.upperClassName=this.customElementName.replace(/([-_]\w)/g,function(e){return e[1].toUpperCase()}),instr="class "+this.upperClassName+" extends "+this.parentName+" { constructor() { super(); } };",instr+=" customElements.define('"+this.customElementName+"', "+this.upperClassName+");";try{eval(instr)}catch(e){}}}function XsltForms_listener(e,t,r,s,o,n,l){if(t)if("default"===(o=o||"default")||"capture"===o){if(this.subform=e,this.observer=t,this.evtTarget=r,this.name=s,this.evtName=document.addEventListener?s:"errorupdate",this.phase=o,this.handler=n,this.defaultaction=l,t.listeners){if("xforms-subform-ready"===s)for(var a=0,i=t.listeners.length;a<i;a++)if(t.listeners[a].name===s)return}else t.listeners=[];t.listeners.push(this),this.callback=function(e){if(!document.addEventListener){if((e=e||window.event).target=e.srcElement,e.currentTarget=t,XsltForms_browser.debugConsole.write("observer:"+t.id),XsltForms_browser.debugConsole.write("name:"+s),XsltForms_browser.debugConsole.write("target:"+e.target.id),XsltForms_browser.debugConsole.write("trueName:"+e.trueName),e.trueName&&e.trueName!==s)return;if(e.phase){if(e.phase!==o)return}else if("capture"===o)return;"capture"===o&&(e.cancelBubble=!0),e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0,this.stopped=!0}}var a=!0;if(e.target&&3===e.target.nodeType&&(e.target=e.target.parentNode),e.currentTarget&&("BUTTON"===e.target.nodeName.toUpperCase()||"A"===e.target.nodeName.toUpperCase()||"INPUT"===e.target.nodeName.toUpperCase()||"XFORMS-LABEL"===e.target.nodeName.toUpperCase()||XsltForms_browser.isChrome&&(3===e.eventPhase||e instanceof UIEvent)&&this.xfElement&&"trigger"===this.xfElement.controlName)&&!XsltForms_browser.isFF2&&(a=!1),3===e.eventPhase&&e.target.xfElement&&e.target===e.currentTarget&&!XsltForms_browser.isFF2&&(a=!1),r&&e.target!==r&&(a=!1),XsltForms_browser.debugConsole.write("effectiveTarget:"+a),a&&(XsltForms_browser.debugConsole.write("Captured event "+s+" on <"+e.target.nodeName+(e.target.className?' class="'+("string"==typeof e.target.className?e.target.className:e.target.className.baseVal)+'"':"")+(e.target.id?' id="'+e.target.id+'"':"")+"/>"),n.call(e.target,e)),l||e.preventDefault(),!document.addEventListener)try{e.preventDefault=null,e.stopPropagation=null}catch(e){}},this.attach(),e&&e.listeners.push(this)}else XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-compute-exception","Unknown event-phase("+o+") for event("+s+")"+(t?" on element("+t.id+")":"")+"!")}XsltForms_class.activateAll=function(subform,elt,callback){var scharr=[];Array.prototype.slice.call(elt.querySelectorAll("xforms-model[xf-schema]")).forEach(function(e){scharr=scharr.concat(e.getAttribute("xf-schema").split(" ").map(function(t){return[e,t]}))});var schback=function(){for(var xcname in XsltForms_classes)XsltForms_classes.hasOwnProperty(xcname)&&Array.prototype.slice.call(elt.getElementsByTagName(xcname)).forEach(function(e){XsltForms_classes[e.localName].classbinding(subform,e)});Array.prototype.slice.call(elt.querySelectorAll("*[xf-repeat-ref]")).forEach(function(e){e.xfElement||(e.xfIndex=XsltForms_collection.length,XsltForms_collection.push(e),e.xfElement=new XsltForms_repeat(subform,e))}),Array.prototype.slice.call(elt.querySelectorAll("*[xf-repeat-bind]")).forEach(function(e){e.xfElement||(e.xfIndex=XsltForms_collection.length,XsltForms_collection.push(e),e.xfElement=new XsltForms_repeat(subform,e))}),Array.prototype.slice.call(elt.querySelectorAll('*[xforms-name="repeat"]')).forEach(function(elt2){elt2.xfElement||(elt2.xfIndex=XsltForms_collection.length,XsltForms_collection.push(elt2),elt2.xfElement=eval("new "+XsltForms_classes["xforms-"+elt.getAttribute("xforms-name")].classname+"(subform, elt2)"))}),Array.prototype.slice.call(elt.querySelectorAll("*[xf-avt]")).forEach(function(e){e.xfElement||(e.xfIndex=XsltForms_collection.length,XsltForms_collection.push(e)),Array.prototype.slice.call(e.attributes).filter(function(e){return e.nodeName.startsWith("xf-template-")}).forEach(function(t){new XsltForms_avt(subform,e,t.nodeName.substr(12))})}),callback()},schloader=function(e,t){if(0===e.length)return t();var r=e.pop(),s=r[0];r=r[1];var o=XsltForms_browser.openRequest("GET",r,!0);o.onreadystatechange=function(){if(4===o.readyState){try{if(1223===o.status&&(o.status=204,o.statusText="No Content"),0!==o.status&&(o.status<200||o.status>=300))throw XsltForms_globals.error(s.xfElement,"xforms-link-exception","Schema not found"),new Error("Error");var n=XsltForms_browser.createXMLDocument(o.responseText);new XsltForms_schema(subform,n.documentElement.getAttribute("targetNamespace"),r,{},n)}catch(e){}schloader(e,t)}},o.overrideMimeType&&o.overrideMimeType("application/xml");try{o.send(null)}catch(e){alert("File not found: "+r)}};schloader(scharr.reverse(),schback)},XsltForms_class._applyTemplate=function(e,t){var r,s=e.children||e.childNodes,o=Array.prototype.slice.call(s).map(function(e){return e.localName.toLowerCase()}),n=0;t.forEach(function(t){var r=o.indexOf(t.localName),l=t.localName;l.startsWith("xforms-")||(l="xforms-"+t.getAttribute("xforms-name")),-1!==r?n=r+1:"xforms-body"!==l&&"xforms-alert"!==l&&"xforms-required"!==l&&0===t.childNodes.length||(e.insertBefore(t.cloneNode(!0),s[n]),o=Array.prototype.slice.call(s).map(function(e){return e.localName.toLowerCase()}),n++)}),Array.prototype.slice.call(s).forEach(function(t){var s=t.localName.toLowerCase();!("xforms-hint"===s&&"minimal"!==t.getAttribute("xf-appearance")||"xforms-help"===s&&"minimal"!==t.getAttribute("xf-appearance")||"xforms-alert"===s)||t.previousSibling&&t.previousSibling.localName&&t.previousSibling.localName.toLowerCase()===s+"-mark"?"xforms-label"===s&&(r=t):e.insertBefore(document.createElement(s+"-mark"),t)}),r&&Array.prototype.slice.call(s).forEach(function(t){"xforms-help"===t.localName.toLowerCase()&&"minimal"===t.getAttribute("xf-appearance")&&e.insertBefore(t,r.nextSibling)})},XsltForms_class.prototype.applyTemplate=function(e){XsltForms_class._applyTemplate(e,this.template)},XsltForms_listener.destructs=[],XsltForms_listener.prototype.attach=function(){XsltForms_browser.events.attach(this.observer,this.evtName,this.callback,"capture"===this.phase),"xforms-model-destruct"===this.evtName&&XsltForms_listener.destructs.push({observer:this.observer,callback:this.callback})},XsltForms_listener.prototype.detach=function(){if(this.observer.listeners)for(var e=0,t=this.observer.listeners.length;e<t;e++)if(this.observer.listeners[e]===this){this.observer.listeners.splice(e,1);break}XsltForms_browser.events.detach(this.observer,this.evtName,this.callback,"capture"===this.phase)},XsltForms_listener.prototype.clone=function(e){return new XsltForms_listener(this.subform,e,this.evtTarget,this.name,this.phase,this.handler)};var XsltForms_xmlevents={REGISTRY:[],EventContexts:[],define:function(e,t,r,s){XsltForms_xmlevents.REGISTRY[e]={bubbles:t,cancelable:r,defaultAction:s||function(){}}},makeEventContext:function(e,t,r,s,o){e||(e={}),e.type||(e.type=t);try{e.targetid=r,e.bubbles=s,e.cancelable=o}catch(e){}return e}};function XsltForms_binaryExpr(e,t,r){this.expr1=e,this.expr2=r,this.op=t.replace("&gt;",">").replace("&lt;","<")}function XsltForms_exprContext(e,t,r,s,o,n,l,a,i,m,u){if(this.subform=e,this.node=t,this.current=l||t,!r){var c=t&&t.nodeType?XsltForms_browser.getMeta(t,"repeat"):null;if(c){var d=XsltForms_collection[c];if(d){var h,p=d.xfElement;for(r=1,h=p.nodes.length;r<=h&&t!==p.nodes[r-1];r++);}}}this.position=r||1,this.nodelist=s||[t],this.parent=o,this.root=o?o.root:t?t.ownerDocument:null,this.nsresolver=n,this.varresolver=a,this.depsId=m,this.initDeps(i,u)}function XsltForms_tokenExpr(e){this.value=e}function XsltForms_unaryMinusExpr(e){this.expr=e}function XsltForms_cteExpr(e){this.value=XsltForms_browser.isEscaped&&"string"==typeof e?XsltForms_browser.unescape(e):e}function XsltForms_filterExpr(e,t){this.expr=e,this.predicate=t}XsltForms_xmlevents.dispatchList=function(e,t){for(var r=0,s=e.length;r<s;r++)XsltForms_xmlevents.dispatch(e[r],t)},XsltForms_xmlevents.dispatch=function(e,t,r,s,o,n,l){if(e){e=e.element||e,XsltForms_browser.assert(e&&void 0!==e.nodeName),XsltForms_browser.debugConsole.write("Dispatching event "+t+" on <"+e.nodeName.toLowerCase()+(e.className?' class="'+("string"==typeof e.className?e.className:e.className.baseVal)+'"':"")+(e.id?' id="'+e.id+'"':"")+"/>");var a=XsltForms_xmlevents.REGISTRY[t];a&&(s=a.bubbles,o=a.cancelable,n=a.defaultAction),n||(n=function(){}),l=XsltForms_xmlevents.makeEventContext(l,t,e.id,s,o),XsltForms_xmlevents.EventContexts.push(l);try{var i,m;if(e.dispatchEvent)(i=document.createEvent("Event")).initEvent(t,s,o),((m=e.dispatchEvent(i))&&!i.stopped||!o)&&n.call(e.xfElement,i);else{for(var u=null,c=[],d=e.parentNode;d;d=d.parentNode)c.unshift(d);for(var h=0,p=c.length;h<p;h++)if((i=document.createEventObject()).trueName=t,i.phase="capture",c[h].fireEvent("onerrorupdate",i),i.stopped)return;(i=document.createEventObject()).trueName=t,i.phase="capture",i.target=e,e.fireEvent("onerrorupdate",i),s||(u=new XsltForms_listener(null,e,null,t,"default",function(e){e.cancelBubble=!0})),(i=document.createEventObject()).trueName=t,i.phase="default",i.target=e,m=e.fireEvent("onerrorupdate",i);try{(m&&!i.stopped||!o)&&n.call(e.xfElement,i),s||u.detach()}catch(e){}}}catch(e){alert("XSLTForms Exception\n--------------------------\n\nError dispatching event '"+t+"' :\n\n"+(void 0===e.stack?"":e.stack)+"\n\n"+(e.name?e.name+(e.message?"\n\n"+e.message:""):e))}finally{XsltForms_xmlevents.EventContexts[XsltForms_xmlevents.EventContexts.length-1].rheadsdoc&&(XsltForms_xmlevents.EventContexts[XsltForms_xmlevents.EventContexts.length-1].rheadsdoc=null),XsltForms_xmlevents.EventContexts[XsltForms_xmlevents.EventContexts.length-1]["response-body"]&&(XsltForms_xmlevents.EventContexts[XsltForms_xmlevents.EventContexts.length-1]["response-body"]=null),XsltForms_xmlevents.EventContexts.pop()}}else XsltForms_browser.debugConsole.write("ERROR: Cannot dispatch event "+name+" as the target is null")},XsltForms_xmlevents.define("xforms-model-construct",!0,!1,function(){this.construct()}),XsltForms_xmlevents.define("xforms-model-construct-done",!0,!1),XsltForms_xmlevents.define("xforms-ready",!0,!1),XsltForms_xmlevents.define("xforms-model-destruct",!0,!1),XsltForms_xmlevents.define("xforms-rebuild",!0,!0,function(){this.rebuild()}),XsltForms_xmlevents.define("xforms-recalculate",!0,!0,function(){this.recalculate()}),XsltForms_xmlevents.define("xforms-revalidate",!0,!0,function(){this.revalidate()}),XsltForms_xmlevents.define("xforms-reset",!0,!0,function(){this.reset()}),XsltForms_xmlevents.define("xforms-submit",!0,!0,function(){this.submit()}),XsltForms_xmlevents.define("xforms-submit-serialize",!0,!1),XsltForms_xmlevents.define("xforms-refresh",!0,!0,function(){this.refresh()}),XsltForms_xmlevents.define("xforms-focus",!0,!0,function(){this.focus?this.focus():this.element.focus()}),XsltForms_xmlevents.define("DOMActivate",!0,!0),XsltForms_xmlevents.define("DOMFocusIn",!0,!1),XsltForms_xmlevents.define("DOMFocusOut",!0,!1),XsltForms_xmlevents.define("xforms-select",!0,!1),XsltForms_xmlevents.define("xforms-deselect",!0,!1),XsltForms_xmlevents.define("xforms-value-changed",!0,!1),XsltForms_xmlevents.define("xforms-insert",!0,!1),XsltForms_xmlevents.define("xforms-delete",!0,!1),XsltForms_xmlevents.define("xforms-valid",!0,!1),XsltForms_xmlevents.define("xforms-invalid",!0,!1),XsltForms_xmlevents.define("xforms-enabled",!0,!1),XsltForms_xmlevents.define("xforms-disabled",!0,!1),XsltForms_xmlevents.define("xforms-optional",!0,!1),XsltForms_xmlevents.define("xforms-required",!0,!1),XsltForms_xmlevents.define("xforms-readonly",!0,!1),XsltForms_xmlevents.define("xforms-readwrite",!0,!1),XsltForms_xmlevents.define("xforms-in-range",!0,!1),XsltForms_xmlevents.define("xforms-out-of-range",!0,!1),XsltForms_xmlevents.define("xforms-submit-done",!0,!1),XsltForms_xmlevents.define("xforms-submit-error",!0,!1),XsltForms_xmlevents.define("xforms-compute-exception",!0,!1),XsltForms_xmlevents.define("xforms-binding-exception",!0,!1),XsltForms_xmlevents.define("ajx-start",!0,!0,function(e){e.target.xfElement.start()}),XsltForms_xmlevents.define("ajx-stop",!0,!0,function(e){e.target.xfElement.stop()}),XsltForms_xmlevents.define("ajx-time",!0,!0),XsltForms_xmlevents.define("xforms-dialog-open",!0,!0,function(e){XsltForms_browser.dialog.show(e.target,null,!0)}),XsltForms_xmlevents.define("xforms-dialog-close",!0,!0,function(e){XsltForms_browser.dialog.hide(e.target,!0)}),XsltForms_xmlevents.define("xforms-load-done",!0,!1),XsltForms_xmlevents.define("xforms-load-error",!0,!1),XsltForms_xmlevents.define("xforms-unload-done",!0,!1),XsltForms_xmlevents.define("xforms-upload-done",!0,!1),XsltForms_xmlevents.define("xforms-upload-error",!0,!1),XsltForms_binaryExpr.prototype.evaluate=function(e){var t,r,s=this.expr1.evaluate(e),o=this.expr2.evaluate(e);if(s&&o&&("object"==typeof s&&s.length>1||"object"==typeof o&&o.length>1)&&("="===this.op||"!="===this.op||"<"===this.op||"<="===this.op||">"===this.op||">="===this.op)){"object"!=typeof s&&(s=[s]),"object"!=typeof o&&(o=[o]);for(var n=0,l=s.length;n<l;n++){t=XsltForms_globals.numberValue([s[n]]),isNaN(t)&&(t=XsltForms_globals.stringValue([s[n]]));for(var a=0,i=o.length;a<i;a++)switch(r=XsltForms_globals.numberValue([o[a]]),isNaN(r)&&(r=XsltForms_globals.stringValue([o[a]])),this.op){case"=":if(t==r)return!0;break;case"!=":if(t!=r)return!0;break;case"<":if(t<r)return!0;break;case"<=":if(t<=r)return!0;break;case">":if(t>r)return!0;break;case">=":if(t>=r)return!0}}return!1}t=XsltForms_globals.numberValue(s),r=XsltForms_globals.numberValue(o),(isNaN(t)||isNaN(r))&&(t=XsltForms_globals.stringValue(s),r=XsltForms_globals.stringValue(o));var m=0;switch(this.op){case"or":m=XsltForms_globals.booleanValue(s)||XsltForms_globals.booleanValue(o);break;case"and":m=XsltForms_globals.booleanValue(s)&&XsltForms_globals.booleanValue(o);break;case"+":m=t+r;break;case"-":m=t-r;break;case"*":m=t*r;break;case"mod":m=t%r;break;case"div":m=t/r;break;case"=":m=t===r;break;case"!=":m=t!==r;break;case"<":m=t<r;break;case"<=":m=t<=r;break;case">":m=t>r;break;case">=":m=t>=r}return"number"==typeof m?Math.round(1e6*m)/1e6:m},XsltForms_exprContext.prototype.clone=function(e,t,r){return new XsltForms_exprContext(this.subform,e||this.node,void 0===t?this.position:t,r||this.nodelist,this,this.nsresolver,this.current,this.varresolver,this.depsNodes,this.depsId,this.depsElements)},XsltForms_exprContext.prototype.setNode=function(e,t){this.node=e,this.position=t},XsltForms_exprContext.prototype.initDeps=function(e,t){this.depsNodes=e||[],this.depsElements=t||[]},XsltForms_exprContext.prototype.addDepNode=function(e){var t=this.depsNodes;!t||!e.nodeType||e.nodeType===Fleur.Node.DOCUMENT_NODE||this.depsId&&XsltForms_browser.inValueMeta(e,"depfor",this.depsId)||(this.depsId&&XsltForms_browser.addValueMeta(e,"depfor",this.depsId),t.push(e))},XsltForms_exprContext.prototype.addDepElement=function(e){var t=this.depsElements;t&&!XsltForms_browser.inArray(e,t)&&t.push(e)},XsltForms_tokenExpr.prototype.evaluate=function(){return XsltForms_globals.stringValue(this.value)},XsltForms_unaryMinusExpr.prototype.evaluate=function(e){return-XsltForms_globals.numberValue(this.expr.evaluate(e))},XsltForms_cteExpr.prototype.evaluate=function(){return this.value},XsltForms_filterExpr.prototype.evaluate=function(e){for(var t=XsltForms_globals.nodeSetValue(this.expr.evaluate(e)),r=0,s=this.predicate.length;r<s;++r){var o=t;t=[];for(var n=0,l=o.length;n<l;++n){var a=o[n],i=e.clone(a,n,o);XsltForms_globals.booleanValue(this.predicate[r].evaluate(i))&&t.push(a)}}return t};for(var XsltForms_FleurConv=[],XsltForms_FleurConv_unsupported=function(){return"~~~~Unsupported syntax~#~#"},XsltForms_i=0;XsltForms_i<Fleur.Xlength;XsltForms_i++)XsltForms_FleurConv[XsltForms_i]=XsltForms_FleurConv_unsupported;function XsltForms_locationExpr(e){this.absolute=e,this.steps=[];for(var t=1,r=arguments.length;t<r;t++)this.steps.push(arguments[t])}function XsltForms_nodeTestAny(){}function XsltForms_nodeTestName(e,t){this.prefix=e,this.name=t,this.uppercase=t.toUpperCase(),this.wildcard="*"===t,this.notwildcard="*"!==t,this.notwildcardprefix="*"!==e,this.hasprefix=e&&this.notwildcardprefix}function XsltForms_nodeTestPI(e){this.target=e}function XsltForms_nodeTestType(e){this.type=e}function XsltForms_pathExpr(e,t){this.filter=e,this.rel=t}function XsltForms_predicateExpr(e){this.expr=e}function XsltForms_stepExpr(e,t){this.axis=e,this.nodetest=t,this.predicates=[];for(var r=2,s=arguments.length;r<s;r++)this.predicates.push(arguments[r])}function XsltForms_unionExpr(e,t){this.expr1=e,this.expr2=t}function XsltForms_varRef(e){this.name=e}function XsltForms_xpath(subform,expression){var compiled;this.subform=subform,subform.xpaths.push(this),this.expression=expression;try{var arr;if(Fleur.minimal)compiled=Fleur.XPathEvaluator._xp2js(expression,"",""),eval("arr = "+compiled+";"),compiled=Fleur.minimal?XsltForms_FleurConv[arr[0]](arr[1]):new Fleur.Transpiler("ctx","  ").funcdef(arr),compiled=eval(compiled);else compiled=Fleur.XQueryParser._xp2js(expression,[],[]),compiled=new Fleur.Transpiler("ctx","  ").funcdef(compiled),compiled=eval(compiled.inst)}catch(e){return void alert("XSLTForms Exception\n--------------------------\n\nError parsing the following XPath expression :\n\n"+expression+"\n\n"+e.message)}this.compiled=compiled,this.nsresolver=new Fleur.XPathNSResolver,subform.expressions[expression]=this,this.evaltime=0}function XsltForms_xpathFunction(e,t,r,s){this.evaluate=s,this.defaultTo=t,this.acceptContext=e,this.returnNodes=r}XsltForms_FleurConv[Fleur.XQueryX.anyKindTest]=function(){return"new XsltForms_nodeTestAny()"},XsltForms_FleurConv[Fleur.XQueryX.arrayTest]=function(){return"new XsltForms_nodeTestType(131)"},XsltForms_FleurConv[Fleur.XQueryX.commentTest]=function(){return"new XsltForms_nodeTestType(8)"},XsltForms_FleurConv[Fleur.XQueryX.contextItemExpr]=function(){return"new XsltForms_locationExpr(false,new XsltForms_stepExpr('self',new XsltForms_nodeTestAny()))"},XsltForms_FleurConv[Fleur.XQueryX.decimalConstantExpr]=function(e){return"new XsltForms_cteExpr("+e[0][1][0]+")"},XsltForms_FleurConv[Fleur.XQueryX.doubleConstantExpr]=function(e){return"new XsltForms_cteExpr("+e[0][1][0]+")"},XsltForms_FleurConv[Fleur.XQueryX.entryTest]=function(){return"new XsltForms_nodeTestType(133)"},XsltForms_FleurConv[Fleur.XQueryX.filterExpr]=function(){return"new XsltForms_stepExpr('self',new XsltForms_nodeTestAny())"},XsltForms_FleurConv[Fleur.XQueryX.functionCallExpr]=function(e){var t=e[0][1][0],r="http://www.w3.org/2005/xpath-functions",s=e[1][1];if(e[0][1][1]&&e[0][1][1][0]===Fleur.XQueryX.prefix){var o=e[0][1][1][1][0];r="xf"===o||"xform"===o||"xforms"===o?"http://www.w3.org/2002/xforms":"math"===o?"http://exslt.org/math":Fleur.XPathNSResolver_default.uri[Fleur.XPathNSResolver_default.pf.indexOf(o)]}else-1!==" boolean-from-string is-card-number count-non-empty index power random if choose property digest hmac local-date local-dateTime now days-from-date days-to-date seconds-from-dateTime seconds-to-dateTime adjust-dateTime-to-timezone seconds months instance current context event nodeindex is-valid serialize transform ".indexOf(" "+t+" ")&&(r="http://www.w3.org/2002/xforms");for(var n="new XsltForms_functionCallExpr('"+r+" "+t+"'",l=0,a=s.length;l<a;l++)n+=","+XsltForms_FleurConv[s[l][0]](s[l][1]);return n+=")"},XsltForms_FleurConv[Fleur.XQueryX.integerConstantExpr]=function(e){return"new XsltForms_cteExpr("+e[0][1][0]+")"},XsltForms_FleurConv[Fleur.XQueryX.mapTest]=function(){return"new XsltForms_nodeTestType(132)"},XsltForms_FleurConv[Fleur.XQueryX.nameTest]=function(e,t){var r="new XsltForms_nodeTestName(";return 1!==e.length&&e[1][0]===Fleur.XQueryX.prefix?r+="'"+e[1][1][0]+"'":r+="attribute"===t?"null":"''",r+=",'",r+=e[0],r+="')"},XsltForms_FleurConv[Fleur.XQueryX.pathExpr]=function(e){var t="",r=0,s=!1;e[0][0]===Fleur.XQueryX.stepExpr&&e[0][1][0][0]===Fleur.XQueryX.filterExpr&&e[0][1][0][1][0][0]!==Fleur.XQueryX.contextItemExpr&&(s=!0,t="new XsltForms_pathExpr(",t+=XsltForms_FleurConv[e[0][1][0][1][0][0]](e[0][1][0][1][0][1]),t+=",",r++),t+="new XsltForms_locationExpr(",e[0][0]!==Fleur.XQueryX.rootExpr&&(t+="false",s||(t+=","));for(var o=e.length;r<o;r++)t+=(0!==r?",":"")+XsltForms_FleurConv[e[r][0]](e[r][1]);return t+=")",s&&(t+=")"),t},XsltForms_FleurConv[Fleur.XQueryX.piTest]=function(e){return"new XsltForms_nodeTestPi("+(0!==e.length?"'"+e[0][1][0]+"'":"")+")"},XsltForms_FleurConv[Fleur.XQueryX.predicates]=function(e){for(var t="",r=0,s=e.length;r<s;r++)t+=",new XsltForms_predicateExpr("+XsltForms_FleurConv[e[r][0]](e[r][1])+")";return t},XsltForms_FleurConv[Fleur.XQueryX.rootExpr]=function(){return"true"},XsltForms_FleurConv[Fleur.XQueryX.stepExpr]=function(e){if(1===e.length)return XsltForms_FleurConv[e[0][0]](e[0][1]);var t,r="new XsltForms_stepExpr('";return e[0][0]===Fleur.XQueryX.xpathAxis?(r+=e[0][1][0],r+="',",r+=XsltForms_FleurConv[e[1][0]](e[1][1],e[0][1][0]),t=3):(r+="self',new XsltForms_nodeTestAny()",t=2),e.length===t&&(r+=XsltForms_FleurConv[e[t-1][0]](e[t-1][1])),r+=")"},XsltForms_FleurConv[Fleur.XQueryX.stringConstantExpr]=function(e){return"new XsltForms_cteExpr('"+(e[0][1][0]||"").replace(/\'/g,"\\'")+"')"},XsltForms_FleurConv[Fleur.XQueryX.textTest]=function(){return"new XsltForms_nodeTestType(3)"},XsltForms_FleurConv[Fleur.XQueryX.varRef]=function(e){return'new XsltForms_varRef("'+(1===e[0][1].length?"":e[0][1][1][1][0]+":")+e[0][1][0]+'")'},XsltForms_FleurConv[Fleur.XQueryX.Wildcard]=function(e,t){return"attribute"!==t?0===e.length?"new XsltForms_nodeTestType(1)":e[0][0]===Fleur.XQueryX.NCName?"new XsltForms_nodeTestName('"+e[0][1][0]+"','')),new XsltForms_stepExpr('"+t+"',new XsltForms_nodeTestType(1)":"new XsltForms_nodeTestName('*','"+e[1][1][0]+"')":0===e.length?"new XsltForms_nodeTestAny()":e[0][0]===Fleur.XQueryX.NCName?"new XsltForms_nodeTestName('"+e[0][1][0]+"','*')":"new XsltForms_nodeTestName('*','"+e[1][1][0]+"')"},XsltForms_FleurConv[Fleur.XQueryX.addOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'+',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.andOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'and',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.divOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'div',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.equalOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'=',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.greaterThanOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'>',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.greaterThanOrEqualOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'>=',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.lessThanOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'<',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.lessThanOrEqualOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'<=',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.modOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'mod',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.multiplyOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'*',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.notEqualOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'!=',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.orOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'or',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.subtractOp]=function(e){return"new XsltForms_binaryExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+",'-',"+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_FleurConv[Fleur.XQueryX.unaryMinusOp]=function(e){var t=e[0][1][0][0];if(t===Fleur.XQueryX.integerConstantExpr||t===Fleur.XQueryX.decimalConstantExpr||t===Fleur.XQueryX.doubleConstantExpr)return"new XsltForms_cteExpr(-"+e[0][1][0][1][0][1]+")"},XsltForms_FleurConv[Fleur.XQueryX.unionOp]=function(e){return"new XsltForms_unionExpr("+XsltForms_FleurConv[e[0][1][0][0]](e[0][1][0][1])+","+XsltForms_FleurConv[e[1][1][0][0]](e[1][1][0][1])+")"},XsltForms_locationExpr.prototype.evaluate=function(e){var t=this.absolute&&e.root||!e.node?e.root:e.node,r=XsltForms_browser.getDocMeta(t.nodeType===Fleur.Node.DOCUMENT_NODE?t:t.ownerDocument,"model");r&&e.addDepElement(document.getElementById(r).xfElement);var s=[];return this.steps[0]?this.xPathStep(s,this.steps,0,t,e):s[0]=t,s},XsltForms_locationExpr.prototype.xPathStep=function(e,t,r,s,o){for(var n=t[r].evaluate(o.clone(s)),l=0,a=n.length;l<a;++l){var i=n[l];r===t.length-1?(XsltForms_browser.inArray(i,e)||e.push(i),o.addDepNode(i)):this.xPathStep(e,t,r+1,i,o)}},XsltForms_nodeTestAny.prototype.evaluate=function(e){var t=e.localName||e.baseName;return!t||"xsltforms_"!==t.substr(0,10)&&"http://www.w3.org/2000/xmlns/"!==e.namespaceURI},XsltForms_nodeTestName.prototype.evaluate=function(e,t,r){var s=e.localName||e.baseName;if(this.notwildcard&&(s!==this.name||r&&s.toUpperCase()!==this.uppercase))return!1;if(this.wildcard)return!this.hasprefix||e.namespaceURI===t.lookupNamespaceURI(this.prefix);var o=e.namespaceURI;return this.hasprefix?o===t.lookupNamespaceURI(this.prefix):!this.notwildcardprefix||(!o||""===o||o===t.lookupNamespaceURI(""))},XsltForms_nodeTestPI.prototype.evaluate=function(e){return e.nodeType===Fleur.Node.PROCESSING_INSTRUCTION_NODE&&(!this.target||e.nodeName===this.target)},XsltForms_nodeTestType.prototype.evaluate=function(e){return e.nodeType===this.type},XsltForms_pathExpr.prototype.evaluate=function(e){for(var t=XsltForms_globals.nodeSetValue(this.filter.evaluate(e)),r=[],s=0,o=t.length;s<o;s++)for(var n=e.clone(t[s],s,t),l=XsltForms_globals.nodeSetValue(this.rel.evaluate(n)),a=0,i=l.length;a<i;a++)r.push(l[a]);return r},XsltForms_predicateExpr.prototype.evaluate=function(e){var t=this.expr.evaluate(e);return"number"==typeof t?e.position===t:XsltForms_globals.booleanValue(t)},XsltForms_stepExpr.prototype.evaluate=function(e){var t=e.node,r=[];switch(this.axis){case XsltForms_xpathAxis.ANCESTOR_OR_SELF:XsltForms_stepExpr.push(e,r,t,this.nodetest),t.nodeType===Fleur.Node.ATTRIBUTE_NODE?(t=t.ownerElement?t.ownerElement:t.selectSingleNode(".."),XsltForms_stepExpr.push(e,r,t,this.nodetest)):t.nodeType===Fleur.Node.ENTRY_NODE&&(t=t.ownerMap,XsltForms_stepExpr.push(e,r,t,this.nodetest));for(var s=t.parentNode;s.parentNode;s=s.parentNode)XsltForms_stepExpr.push(e,r,s,this.nodetest);break;case XsltForms_xpathAxis.ANCESTOR:t.nodeType===Fleur.Node.ATTRIBUTE_NODE?(t=t.ownerElement?t.ownerElement:t.selectSingleNode(".."),XsltForms_stepExpr.push(e,r,t,this.nodetest)):t.nodeType===Fleur.Node.ENTRY_NODE&&(t=t.ownerMap,XsltForms_stepExpr.push(e,r,t,this.nodetest));for(var o=t.parentNode;o.parentNode;o=o.parentNode)XsltForms_stepExpr.push(e,r,o,this.nodetest);break;case XsltForms_xpathAxis.ATTRIBUTE:XsltForms_stepExpr.pushList(e,r,t.attributes,this.nodetest,!t.namespaceURI||"http://www.w3.org/1999/xhtml"===t.namespaceURI);break;case XsltForms_xpathAxis.CHILD:XsltForms_stepExpr.pushList(e,r,t.childNodes,this.nodetest);break;case XsltForms_xpathAxis.DESCENDANT_OR_SELF:XsltForms_stepExpr.push(e,r,t,this.nodetest),XsltForms_stepExpr.pushDescendants(e,r,t,this.nodetest);break;case XsltForms_xpathAxis.DESCENDANT:XsltForms_stepExpr.pushDescendants(e,r,t,this.nodetest);break;case XsltForms_xpathAxis.ENTRY:XsltForms_stepExpr.pushList(e,r,t.entries,this.nodetest);break;case XsltForms_xpathAxis.FOLLOWING:for(var n=t.nodeType===Fleur.Node.ATTRIBUTE_NODE?t.ownerElement?t.ownerElement:t.selectSingleNode(".."):t.nodeType===Fleur.Node.ENTRY_NODE?t.ownerMap:t;n.nodeType!==Fleur.Node.DOCUMENT_NODE;){for(var l=n.nextSibling;l;l=l.nextSibling)XsltForms_stepExpr.push(e,r,l,this.nodetest),XsltForms_stepExpr.pushDescendants(e,r,l,this.nodetest);n=n.parentNode}break;case XsltForms_xpathAxis.FOLLOWING_SIBLING:for(var a=t.nextSibling;a;a=a.nextSibling)XsltForms_stepExpr.push(e,r,a,this.nodetest);break;case XsltForms_xpathAxis.NAMESPACE:alert("not implemented: axis namespace");break;case XsltForms_xpathAxis.PARENT:t.parentNode?XsltForms_stepExpr.push(e,r,t.parentNode,this.nodetest):t.nodeType===Fleur.Node.ATTRIBUTE_NODE?XsltForms_stepExpr.push(e,r,t.ownerElement?t.ownerElement:t.selectSingleNode(".."),this.nodetest):t.nodeType===Fleur.Node.ENTRY_NODE&&XsltForms_stepExpr.push(e,r,t.ownerMap,this.nodetest);break;case XsltForms_xpathAxis.PRECEDING:for(var i=t.nodeType===Fleur.Node.ATTRIBUTE_NODE?t.ownerElement?t.ownerElement:t.selectSingleNode(".."):t.nodeType===Fleur.Node.ENTRY_NODE?t.ownerMap:t;i.nodeType!==Fleur.Node.DOCUMENT_NODE;){for(var m=i.previousSibling;m;m=m.previousSibling)XsltForms_stepExpr.pushDescendantsRev(e,r,m,this.nodetest),XsltForms_stepExpr.push(e,r,m,this.nodetest);i=i.parentNode}break;case XsltForms_xpathAxis.PRECEDING_SIBLING:for(var u=t.previousSibling;u;u=u.previousSibling)XsltForms_stepExpr.push(e,r,u,this.nodetest);break;case XsltForms_xpathAxis.SELF:XsltForms_stepExpr.push(e,r,t,this.nodetest);break;default:throw new Error({name:"ERROR -- NO SUCH AXIS: "+this.axis})}for(var c=0,d=this.predicates.length;c<d;c++){for(var h=this.predicates[c],p=[],X=0,f=r.length;X<f;X++){var g=r[X],x=e.clone(g,X+1,r);XsltForms_globals.booleanValue(h.evaluate(x))&&p.push(g)}r=p}return r},XsltForms_stepExpr.push=function(e,t,r,s,o){s.evaluate(r,e.nsresolver,o)&&!XsltForms_browser.inArray(r,t)&&(t[t.length]=r)},XsltForms_stepExpr.pushList=function(e,t,r,s,o){for(var n=0,l=r?r.length:0;n<l;n++)XsltForms_stepExpr.push(e,t,r[n],s,o)},XsltForms_stepExpr.pushDescendants=function(e,t,r,s){for(var o=r.firstChild;o;o=o.nextSibling)XsltForms_stepExpr.push(e,t,o,s),XsltForms_stepExpr.pushDescendants(e,t,o,s)},XsltForms_stepExpr.pushDescendantsRev=function(e,t,r,s){for(var o=r.lastChild;o;o=o.previousSibling)XsltForms_stepExpr.push(e,t,o,s),XsltForms_stepExpr.pushDescendantsRev(e,t,o,s)},XsltForms_unionExpr.prototype.evaluate=function(e){for(var t=XsltForms_globals.nodeSetValue(this.expr1.evaluate(e)),r=XsltForms_globals.nodeSetValue(this.expr2.evaluate(e)),s=t.length,o=0,n=r.length;o<n;o++){for(var l=!1,a=0;a<s&&!(l=t[a]===r[o]);a++);l||t.push(r[o])}for(var i=[],m=0,u=t.length;m<u;m++)i.push({count:XsltForms_browser.selectNodesLength("preceding::* | ancestor::*",t[m]),node:t[m]});i.sort(function(e,t){return e.count-t.count});for(var c=0,d=i.length;c<d;c++)t[c]=i[c].node;return t},XsltForms_varRef.prototype.evaluate=function(e){if(!e.varresolver||!e.varresolver[this.name])return"";if(e.varresolver[this.name]instanceof XsltForms_var){for(var t=e.varresolver[this.name],r=0,s=t.depsNodesRefresh.length;r<s;r++)e.addDepNode(t.depsNodesRefresh[r]);for(r=0,s=t.depsNodesBuild.length;r<s;r++)e.addDepNode(t.depsNodesBuild[r]);for(var o=0,n=t.depsElements.length;o<n;o++)e.addDepElement(t.depsElements[o]);return t.boundnodes}return e.varresolver[this.name][0]},XsltForms_globals.stringValue=function(e){return Fleur.minimal?"object"!=typeof e?""+e:e&&0!==e.length?XsltForms_globals.xmlValue(e.head()):"":XsltForms_globals.xmlValue(e.head?e.head():e)},XsltForms_globals.booleanValue=function(e){return Fleur.minimal?!(void 0===e||!e)&&(void 0!==e.length?e.length>0:!!e):"true"===e.data},XsltForms_globals.numberValue=function(e){if(Fleur.minimal){if("boolean"==typeof e)return NaN;var t="object"==typeof e?XsltForms_globals.stringValue(e):e;return""===t?NaN:t-0}return Number(XsltForms_globals.stringValue(e))},XsltForms_globals.nodeSetValue=function(e){return e},XsltForms_browser.isIE?XsltForms_globals.xmlValue=function(node){if("object"!=typeof node)return node;var ret=node.text,schtyp=XsltForms_schema.getType(XsltForms_browser.getType(node)||"xsd_:string");if(schtyp.eval)try{ret=""===ret?0:eval(ret)}catch(e){}return ret}:XsltForms_globals.xmlValue=function(node){if("object"!=typeof node)return node;var ret=void 0!==node.text?node.text:void 0!==node.textContent?node.textContent:void 0!==node.documentElement.text?node.documentElement.text:node.documentElement.textContent,schtyp=XsltForms_schema.getType(XsltForms_browser.getType(node)||"xsd_:string");if(schtyp.eval)try{ret=""===ret?0:eval(ret)}catch(e){}return ret},XsltForms_globals.xmlResolveEntities=function(e){for(var t=XsltForms_globals.stringSplit(e,"&"),r=t[0],s=1,o=t.length;s<o;++s){var n=t[s],l=n.indexOf(";");if(-1!==l){var a,i=n.substring(0,l);switch(i){case"lt":a="<";break;case"gt":a=">";break;case"amp":a="&";break;case"quot":a='"';break;case"apos":a="'";break;case"nbsp":a=String.fromCharCode(160);break;default:var m=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","span"):document.createElement("span");m.innerHTML="&"+i+"; ",a=m.childNodes[0].nodeValue.charAt(0)}r+=a+n.substring(l+1)}else r+=t[s]}return r},XsltForms_globals.stringSplit=function(e,t){var r=e.indexOf(t);if(-1===r)return[e];var s=t.length,o=[];for(o.push(e.substr(0,r));-1!==r;){var n=e.indexOf(t,r+s);-1!==n?o.push(e.substr(r+s,n-r-s)):o.push(e.substr(r+s)),r=n}return o},XsltForms_xpath.prototype.evaluate=function(){alert("XPath error")},XsltForms_xpath.prototype.xpath_evaluate=function(e,t,r,s){var o=new Date;XsltForms_browser.assert(e),e.node?e.nsresolver||(e.nsresolver=this.nsresolver):e=new XsltForms_exprContext(r,e,null,null,null,this.nsresolver,t,s);try{var n=Fleur.minimal?this.compiled.evaluate(e):this.compiled(new Fleur.Context(e.node,{nsresolver:e.nsresolver},e.depsNodes,e.depsElements,e.position)).item;if(this.unordered&&n instanceof Array&&n.length>1){for(var l=[],a=0,i=n.length;a<i;a++)l.push({count:XsltForms_browser.selectNodesLength("preceding::* | ancestor::*",n[a]),node:n[a]});l.sort(function(e,t){return e.count-t.count});for(var m=0,u=l.length;m<u;m++)n[m]=l[m].node}var c=new Date;return this.evaltime+=c-o,n}catch(e){return alert("XSLTForms Exception\n--------------------------\n\nError evaluating the following XPath expression :\n\n"+this.expression+"\n\n"+(e.name?e.name+"\n\n"+e.message:e)),null}},XsltForms_xpath.notfound=!1,XsltForms_xpath.create=function(e,t){var r=e.expressions[t];return r||(r=new XsltForms_xpath(e,t)),r},XsltForms_xpath.prototype.dispose=function(){delete this.subform.expressions[this.expression]},XsltForms_xpath.registerNS=function(e,t){if(XsltForms_xpath.notfound)for(var r in XsltForms_xpath.notfound=!1,XsltForms_xpath.expressions)XsltForms_xpath.expressions.hasOwnProperty(r)&&(XsltForms_xpath.expressions[r].nsresolver.registerNotFound(e,t),XsltForms_xpath.expressions[r].nsresolver.notfound&&(XsltForms_xpath.notfound=!0))},XsltForms_xpathFunction.DEFAULT_NONE=null,XsltForms_xpathFunction.DEFAULT_NODE=0,XsltForms_xpathFunction.DEFAULT_NODESET=1,XsltForms_xpathFunction.DEFAULT_STRING=2,XsltForms_xpathFunction.prototype.call=function(e,t){if(0===t.length)switch(this.defaultTo){case XsltForms_xpathFunction.DEFAULT_NODE:e.node&&(t=[e.node]);break;case XsltForms_xpathFunction.DEFAULT_NODESET:e.node&&(t=[[e.node]]);break;case XsltForms_xpathFunction.DEFAULT_STRING:t=[XsltForms_xpathCoreFunctions.string.evaluate([e.node])]}return this.acceptContext&&t.unshift(e),this.evaluate.apply(null,t)};var XsltForms_mathConstants={PI:"3.14159265358979323846264338327950288419716939937510582",E:"2.71828182845904523536028747135266249775724709369995958",SQRT2:"1.41421356237309504880168872420969807856967187537694807",LN2:"0.693147180559945309417232121458176568075500134360255254",LN10:"2.30258509299404568401799145468436420760110148862877298",LOG2E:"1.44269504088896340735992468100189213742664595415298594",SQRT1_2:"0.707106781186547524400844362104849039284835937688474038"},XsltForms_xpathFunctionExceptions={lastInvalidArgumentsNumber:{name:"last(): Invalid number of arguments",message:"last() function has no argument"},positionInvalidArgumentsNumber:{name:"position(): Invalid number of arguments",message:"position() function has no argument"},countInvalidArgumentsNumber:{name:"count(): Invalid number of arguments",message:"count() function must have one argument exactly"},countInvalidArgumentType:{name:"count(): Invalid type of argument",message:"count() function must have a nodeset argument"},idInvalidArgumentsNumber:{name:"id(): Invalid number of arguments",message:"id() function must have one argument exactly"},idInvalidArgumentType:{name:"id(): Invalid type of argument",message:"id() function must have a nodeset or string argument"},localNameInvalidArgumentsNumber:{name:"local-name(): Invalid number of arguments",message:"local-name() function must have one argument at most"},localNameInvalidArgumentType:{name:"local-name(): Invalid type of argument",message:"local-name() function must have a nodeset argument"},localNameNoContext:{name:"local-name(): no context node",message:"local-name() function must have a nodeset argument"},namespaceUriInvalidArgumentsNumber:{name:"namespace-uri(): Invalid number of arguments",message:"namespace-uri() function must have one argument at most"},namespaceUriInvalidArgumentType:{name:"namespace-uri(): Invalid type of argument",message:"namespace-uri() function must have a nodeset argument"},nameInvalidArgumentsNumber:{name:"name(): Invalid number of arguments",message:"name() function must have one argument at most"},nameInvalidArgumentType:{name:"name(): Invalid type of argument",message:"name() function must have a nodeset argument"},stringInvalidArgumentsNumber:{name:"string(): Invalid number of arguments",message:"string() function must have one argument at most"},concatInvalidArgumentsNumber:{name:"concat(): Invalid number of arguments",message:"concat() function must have at least two arguments"},startsWithInvalidArgumentsNumber:{name:"starts-with(): Invalid number of arguments",message:"starts-with() function must have two arguments exactly"},endsWithInvalidArgumentsNumber:{name:"ends-with(): Invalid number of arguments",message:"ends-with() function must have two arguments exactly"},containsInvalidArgumentsNumber:{name:"contains(): Invalid number of arguments",message:"contains() function must have two arguments exactly"},substringBeforeInvalidArgumentsNumber:{name:"substring-before(): Invalid number of arguments",message:"substring-before() function must have two arguments exactly"},replaceInvalidArgumentsNumber:{name:"replace(): Invalid number of arguments",message:"replace() function must have three arguments exactly"},substringAfterInvalidArgumentsNumber:{name:"substring-after(): Invalid number of arguments",message:"substring-after() function must have two arguments exactly"},substringInvalidArgumentsNumber:{name:"substring(): Invalid number of arguments",message:"substring() function must have two or three arguments"},compareInvalidArgumentsNumber:{name:"compare(): Invalid number of arguments",message:"compare() function must have two arguments exactly"},stringLengthInvalidArgumentsNumber:{name:"string-length(): Invalid number of arguments",message:"string-length() function must have one argument at most"},normalizeSpaceInvalidArgumentsNumber:{name:"normalize-space(): Invalid number of arguments",message:"normalize-space() function must have one argument at most"},translateInvalidArgumentsNumber:{name:"translate(): Invalid number of arguments",message:"translate() function must have three argument exactly"},booleanInvalidArgumentsNumber:{name:"boolean(): Invalid number of arguments",message:"boolean() function must have one argument exactly"},notInvalidArgumentsNumber:{name:"not(): Invalid number of arguments",message:"not() function must have one argument exactly"},trueInvalidArgumentsNumber:{name:"true(): Invalid number of arguments",message:"true() function must have no argument"},falseInvalidArgumentsNumber:{name:"false(): Invalid number of arguments",message:"false() function must have no argument"},langInvalidArgumentsNumber:{name:"lang(): Invalid number of arguments",message:"lang() function must have one argument exactly"},numberInvalidArgumentsNumber:{name:"number(): Invalid number of arguments",message:"number() function must have one argument exactly"},sumInvalidArgumentsNumber:{name:"sum(): Invalid number of arguments",message:"sum() function must have one argument exactly"},sumInvalidArgumentType:{name:"sum(): Invalid type of argument",message:"sum() function must have a nodeset argument"},floorInvalidArgumentsNumber:{name:"floor(): Invalid number of arguments",message:"floor() function must have one argument exactly"},ceilingInvalidArgumentsNumber:{name:"ceiling(): Invalid number of arguments",message:"ceiling() function must have one argument exactly"},roundInvalidArgumentsNumber:{name:"round(): Invalid number of arguments",message:"round() function must have one argument exactly"},powerInvalidArgumentsNumber:{name:"power(): Invalid number of arguments",message:"power() function must have one argument exactly"},randomInvalidArgumentsNumber:{name:"random(): Invalid number of arguments",message:"random() function must have no argument"},booleanFromStringInvalidArgumentsNumber:{name:"boolean-from-string(): Invalid number of arguments",message:"boolean-from-string() function must have one argument exactly"},ifInvalidArgumentsNumber:{name:"if(): Invalid number of arguments",message:"if() function must have three argument exactly"},chooseInvalidArgumentsNumber:{name:"choose(): Invalid number of arguments",message:"choose() function must have three argument exactly"},digestInvalidArgumentsNumber:{name:"digest(): Invalid number of arguments",message:"digest() function must have two or three arguments"},hmacInvalidArgumentsNumber:{name:"choose(): Invalid number of arguments",message:"choose() function must have three or four arguments"},avgInvalidArgumentsNumber:{name:"avg(): Invalid number of arguments",message:"avg() function must have one argument exactly"},avgInvalidArgumentType:{name:"avg(): Invalid type of argument",message:"avg() function must have a nodeset argument"},minInvalidArgumentsNumber:{name:"min(): Invalid number of arguments",message:"min() function must have one argument exactly"},minInvalidArgumentType:{name:"min(): Invalid type of argument",message:"min() function must have a nodeset argument"},maxInvalidArgumentsNumber:{name:"max(): Invalid number of arguments",message:"max() function must have one argument exactly"},maxInvalidArgumentType:{name:"max(): Invalid type of argument",message:"max() function must have a nodeset argument"},serializeInvalidArgumentType:{name:"serialize(): Invalid type of argument",message:"serialize() function must have a nodeset argument"},countNonEmptyInvalidArgumentsNumber:{name:"count-non-empty(): Invalid number of arguments",message:"count-non-empty() function must have one argument exactly"},countNonEmptyInvalidArgumentType:{name:"count-non-empty(): Invalid type of argument",message:"count-non-empty() function must have a nodeset argument"},indexInvalidArgumentsNumber:{name:"index(): Invalid number of arguments",message:"index() function must have one argument exactly"},nodeIndexInvalidArgumentsNumber:{name:"nodeIndex(): Invalid number of arguments",message:"nodeIndex() function must have one argument exactly"},propertyInvalidArgumentsNumber:{name:"property(): Invalid number of arguments",message:"property() function must have one argument exactly"},propertyInvalidArgument:{name:"property(): Invalid argument",message:"Invalid property name"},secondsInvalidArgumentsNumber:{name:"seconds(): Invalid number of arguments",message:"seconds() function must have one argument exactly"},monthsInvalidArgumentsNumber:{name:"months(): Invalid number of arguments",message:"months() function must have one argument exactly"},instanceInvalidArgumentsNumber:{name:"instance(): Invalid number of arguments",message:"instance() function must have zero or one argument"},subformInstanceInvalidArgumentsNumber:{name:"subform-instance(): Invalid number of arguments",message:"subform-instance() function must have no argument"},subformContextInvalidArgumentsNumber:{name:"subform-context(): Invalid number of arguments",message:"subform-context() function must have no argument"},nowInvalidArgumentsNumber:{name:"now(): Invalid number of arguments",message:"now() function must have no argument"},localDateInvalidArgumentsNumber:{name:"local-date(): Invalid number of arguments",message:"local-date() function must have no argument"},localDateTimeInvalidArgumentsNumber:{name:"local-dateTime(): Invalid number of arguments",message:"local-dateTime() function must have no argument"},adjustDateTimeToTimezoneInvalidArgumentsNumber:{name:"adjust-dateTime-to-timezone(): Invalid number of arguments",message:"adjust-dateTime-to-timezone() function must have zero or one argument"},daysFromDateInvalidArgumentsNumber:{name:"days-from-date(): Invalid number of arguments",message:"days-from-date() function must have one argument exactly"},daysToDateInvalidArgumentsNumber:{name:"days-to-date(): Invalid number of arguments",message:"days-to-date() function must have one argument exactly"},secondsToDateTimeInvalidArgumentsNumber:{name:"seconds-to-dateTime(): Invalid number of arguments",message:"seconds-to-dateTime() function must have one argument exactly"},secondsFromDateTimeInvalidArgumentsNumber:{name:"seconds-from-dateTime(): Invalid number of arguments",message:"seconds-from-dateTime() function must have one argument exactly"},currentInvalidArgumentsNumber:{name:"current(): Invalid number of arguments",message:"current() function must have no argument"},validInvalidArgumentsNumber:{name:"valid(): Invalid number of arguments",message:"valid() function must have one argument exactly"},validInvalidArgumentType:{name:"valid(): Invalid type of argument",message:"valid() function must have a nodeset argument"},isNonEmptyArrayArgumentsNumber:{name:"is-non-empty-array(): Invalid number of arguments",message:"is-non-empty-array() function must have zero or one argument"},isNonEmptyArrayInvalidArgumentType:{name:"is-non-empty-array(): Invalid type of argument",message:"is-non-empty-array() function must have a node argument"},isCardNumberInvalidArgumentsNumber:{name:"is-card-number(): Invalid number of arguments",message:"is-card-number() function must have one argument exactly"},upperCaseInvalidArgumentsNumber:{name:"upper-case(): Invalid number of arguments",message:"upper-case() function must have one argument exactly"},lowerCaseInvalidArgumentsNumber:{name:"lower-case(): Invalid number of arguments",message:"lower-case() function must have one argument exactly"},formatNumberInvalidArgumentsNumber:{name:"format-number(): Invalid number of arguments",message:"format-number() function must have two arguments exactly"},formatDateTimeInvalidArgumentsNumber:{name:"format-dateTime(): Invalid number of arguments",message:"format-dateTime() function must have two arguments exactly"},distinctValuesInvalidArgumentsNumber:{name:"distinct-values(): Invalid number of arguments",message:"distinct-values() function must have one argument exactly"},sortInvalidArgumentsNumber:{name:"sort(): Invalid number of arguments",message:"sort function must have one argument exactly"},transformInvalidArgumentsNumber:{name:"transform(): Invalid number of arguments",message:"transform() function must have two arguments exactly"},serializeNoContext:{name:"serialize(): no context node",message:"serialize() function must have a node argument"},serializeInvalidArgumentsNumber:{name:"serialize(): Invalid number of arguments",message:"serialize() function must have one argument exactly"},eventInvalidArgumentsNumber:{name:"event(): Invalid number of arguments",message:"event() function must have one argument exactly"},bindInvalidArgumentsNumber:{name:"bind(): Invalid number of arguments",message:"bind() function must have one argument exactly"},alertInvalidArgumentsNumber:{name:"alert(): Invalid number of arguments",message:"alert() function must have one argument exactly"},jsevalInvalidArgumentsNumber:{name:"js-eval(): Invalid number of arguments",message:"js-eval() function must have one argument exactly"},stringJoinInvalidArgumentsNumber:{name:"string-join(): Invalid number of arguments",message:"string-join() function must have one or two arguments"},stringJoinInvalidArgumentType:{name:"string-join(): Invalid type of argument",message:"string-join() function must have a nodeset argument"},itextInvalidArgumentsNumber:{name:"itext(): Invalid number of arguments",message:"itext() function must have one argument"},selectionInvalidArgumentsNumber:{name:"selection(): Invalid number of arguments",message:"selection() function must have one argument exactly"},controlPropertyInvalidArgumentsNumber:{name:"control-property(): Invalid number of arguments",message:"control-property() function must have two arguments exactly"},encodeForUriInvalidArgumentsNumber:{name:"encode-for-uri(): Invalid number of arguments",message:"encode-for-uri() function must have one argument exactly"},matchInvalidArgumentsNumber:{name:"match(): Invalid number of arguments",message:"match() function must have two or three arguments"},uuidInvalidArgumentsNumber:{name:"uuid(): Invalid number of arguments",message:"uuid() function must have no argument"},metaInvalidArgumentsNumber:{name:"meta(): Invalid number of arguments",message:"meta() function must have one or two arguments"},formSourceInvalidArgumentsNumber:{name:"form-source(): Invalid number of arguments",message:"form-source() function has no argument"}},XsltForms_xpathCoreFunctions={"http://www.w3.org/2005/xpath-functions node":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.nodeInvalidArgumentsNumber;return e.current.childNodes}),"http://www.w3.org/2005/xpath-functions comment":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.commentInvalidArgumentsNumber;var t=[];if(e.current.childNodes)for(var r=0,s=e.current.childNodes.length;r<s;r++)e.current.childNodes[r].nodeType===Fleur.Node.COMMENT_NODE&&t.push(e.current.childNodes[r]);return t}),"http://www.w3.org/2005/xpath-functions text":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.textInvalidArgumentsNumber;var t=[];if(e.current.childNodes)for(var r=0,s=e.current.childNodes.length;r<s;r++)e.current.childNodes[r].nodeType===Fleur.Node.TEXT_NODE&&t.push(e.current.childNodes[r]);return t}),"http://www.w3.org/2005/xpath-functions array":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.textInvalidArgumentsNumber;var t=[];if(e.current.childNodes)for(var r=0,s=e.current.childNodes.length;r<s;r++)e.current.childNodes[r].nodeType===Fleur.Node.ARRAY_NODE&&t.push(e.current.childNodes[r]);return t}),"http://www.w3.org/2005/xpath-functions map":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.textInvalidArgumentsNumber;var t=[];if(e.current.childNodes)for(var r=0,s=e.current.childNodes.length;r<s;r++)e.current.childNodes[r].nodeType===Fleur.Node.MAP_NODE&&t.push(e.current.childNodes[r]);return t}),"http://www.w3.org/2005/xpath-functions entry":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.textInvalidArgumentsNumber;var t=[];if(e.current.entries)for(var r=0,s=e.current.entries.length;r<s;r++)t.push(e.current.entries[r]);return t}),"http://www.w3.org/2005/xpath-functions last":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.lastInvalidArgumentsNumber;return e.nodelist.length}),"http://www.w3.org/2005/xpath-functions position":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.positionInvalidArgumentsNumber;return e.position}),"http://www.w3.org/2002/xforms context":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.positionInvalidArgumentsNumber;return[e.current]}),"http://www.w3.org/2005/xpath-functions count":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.countInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.countInvalidArgumentType;return e.length}),"http://www.w3.org/2005/xpath-functions id":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NODE,!1,function(e,t,r){if(2!==arguments.length&&3!==arguments.length)throw XsltForms_xpathFunctionExceptions.idInvalidArgumentsNumber;if("object"!=typeof t&&"string"!=typeof t)throw XsltForms_xpathFunctionExceptions.idInvalidArgumentType;var s=[];if(r||(r=e.node.ownerDocument?[e.node.ownerDocument]:[e.node]),"string"!=typeof t&&void 0!==t.length)for(var o=0,n=t.length;o<n;++o)for(var l=XsltForms_xpathCoreFunctions["http://www.w3.org/2005/xpath-functions id"].evaluate(e,t[o],r),a=0,i=l.length;a<i;a++)s.push(l[a]);else if(e.node)for(var m=XsltForms_globals.stringValue(t).split(/\s+/),u=XsltForms_globals.IDstr?XsltForms_globals.IDstr:"@xml:id",c=0,d=m.length;c<d;c++){var h=XsltForms_browser.selectSingleNode("descendant-or-self::*["+u+"='"+m[c]+"']",r[0]);h&&s.push(h),(h=XsltForms_browser.selectSingleNode("descendant-or-self::*[@*[local-name() = 'type'] = 'xsd:ID' and . = '"+m[c]+"']",r[0]))&&s.push(h)}return s}),"http://www.w3.org/2005/xpath-functions local-name":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.localNameInvalidArgumentsNumber;if(1===arguments.length&&"object"!=typeof e)throw XsltForms_xpathFunctionExceptions.localNameInvalidArgumentType;if(0===arguments.length)throw XsltForms_xpathFunctionExceptions.localNameNoContext;return 0===e.length?"":e[0].nodeName.replace(/^.*:/,"")}),"http://www.w3.org/2005/xpath-functions namespace-uri":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.namespaceUriInvalidArgumentsNumber;if(1===arguments.length&&"object"!=typeof e)throw XsltForms_xpathFunctionExceptions.namespaceUriInvalidArgumentType;return 0===e.length?"":e[0].namespaceURI||""}),"http://www.w3.org/2005/xpath-functions name":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.nameInvalidArgumentsNumber;if(1===arguments.length&&"object"!=typeof e)throw XsltForms_xpathFunctionExceptions.nameInvalidArgumentType;return 0===e.length?"":e[0].nodeName}),"http://www.w3.org/2005/xpath-functions string":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.stringInvalidArgumentsNumber;return XsltForms_globals.stringValue(e)}),"http://www.w3.org/2005/xpath-functions concat":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(arguments.length<2)throw XsltForms_xpathFunctionExceptions.concatInvalidArgumentsNumber;for(var e="",t=0,r=arguments.length;t<r;++t)e+=XsltForms_globals.stringValue(arguments[t]);return e}),"http://www.w3.org/2005/xpath-functions starts-with":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.startsWithInvalidArgumentsNumber;return 0===XsltForms_globals.stringValue(e).indexOf(XsltForms_globals.stringValue(t))}),"http://www.w3.org/2005/xpath-functions ends-with":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.endsWithInvalidArgumentsNumber;var r=XsltForms_globals.stringValue(e),s=XsltForms_globals.stringValue(t);return r.substr(r.length-s.length,s.length)===s}),"http://www.w3.org/2005/xpath-functions contains":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.containsInvalidArgumentsNumber;return-1!==XsltForms_globals.stringValue(e).indexOf(XsltForms_globals.stringValue(t))}),"http://www.w3.org/2005/xpath-functions substring-before":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.substringBeforeInvalidArgumentsNumber;return(e=XsltForms_globals.stringValue(e)).substring(0,e.indexOf(XsltForms_globals.stringValue(t)))}),"http://www.w3.org/2005/xpath-functions substring-after":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.substringAfterInvalidArgumentsNumber;e=XsltForms_globals.stringValue(e),t=XsltForms_globals.stringValue(t);var r=e.indexOf(t);return-1===r?"":e.substring(r+t.length)}),"http://www.w3.org/2005/xpath-functions substring":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(2!==arguments.length&&3!==arguments.length)throw XsltForms_xpathFunctionExceptions.substringInvalidArgumentsNumber;return e=XsltForms_globals.stringValue(e),t=Math.round(XsltForms_globals.numberValue(t)),isNaN(t)?"":r?(r=Math.round(XsltForms_globals.numberValue(r)),t<=0?e.substr(0,t+r-1):e.substr(t-1,r)):e.substr(Math.max(t-1,0))}),"http://www.w3.org/2005/xpath-functions compare":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.compareInvalidArgumentsNumber;return(e=XsltForms_globals.stringValue(e))===(t=XsltForms_globals.stringValue(t))?0:e>t?1:-1}),"http://www.w3.org/2005/xpath-functions string-length":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_STRING,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.stringLengthInvalidArgumentsNumber;return XsltForms_globals.stringValue(e).length}),"http://www.w3.org/2005/xpath-functions normalize-space":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_STRING,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.normalizeSpaceLengthInvalidArgumentsNumber;return XsltForms_globals.stringValue(e).replace(/^\s+|\s+$/g,"").replace(/\s+/," ")}),"http://www.w3.org/2005/xpath-functions translate":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(3!==arguments.length)throw XsltForms_xpathFunctionExceptions.translateInvalidArgumentsNumber;e=XsltForms_globals.stringValue(e),t=XsltForms_globals.stringValue(t),r=XsltForms_globals.stringValue(r);for(var s="",o=0,n=e.length;o<n;++o){var l=t.indexOf(e.charAt(o));s+=-1===l?e.charAt(o):r.charAt(l)}return s}),"http://www.w3.org/2005/xpath-functions replace":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(3!==arguments.length)throw XsltForms_xpathFunctionExceptions.replaceInvalidArgumentsNumber;return(e=XsltForms_globals.stringValue(e)).replace(new RegExp(XsltForms_globals.stringValue(t),"g"),XsltForms_globals.stringValue(r))}),"http://www.w3.org/2005/xpath-functions boolean":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.booleanInvalidArgumentsNumber;return XsltForms_globals.booleanValue(e)}),"http://www.w3.org/2005/xpath-functions not":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.notInvalidArgumentsNumber;return!XsltForms_globals.booleanValue(e)}),"http://www.w3.org/2005/xpath-functions true":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.trueInvalidArgumentsNumber;return!0}),"http://www.w3.org/2005/xpath-functions false":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.falseInvalidArgumentsNumber;return!1}),"http://www.w3.org/2005/xpath-functions lang":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.langInvalidArgumentsNumber;t=XsltForms_globals.stringValue(t);for(var r=e.node;r;r=r.parentNode)if(void 0!==r.attributes){var s=r.attributes.getNamedItemNS("http://www.w3.org/XML/1998/namespace","lang");if(s)return s=s.value.toLowerCase(),t=t.toLowerCase(),0===s.indexOf(t)&&(t.length===s.length||"-"===t.charAt(s.length))}return!1}),"http://www.w3.org/2005/xpath-functions number":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.numberInvalidArgumentsNumber;return XsltForms_globals.numberValue(e)}),"http://www.w3.org/2005/xpath-functions sum":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.sumInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.sumInvalidArgumentType;for(var t=0,r=0,s=e.length;r<s;++r)t+=XsltForms_globals.numberValue(XsltForms_globals.xmlValue(e[r]));return t}),"http://www.w3.org/2005/xpath-functions floor":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.floorInvalidArgumentsNumber;return Math.floor(XsltForms_globals.numberValue(e))}),"http://www.w3.org/2005/xpath-functions ceiling":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.ceilingInvalidArgumentsNumber;return Math.ceil(XsltForms_globals.numberValue(e))}),"http://www.w3.org/2005/xpath-functions round":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.roundInvalidArgumentsNumber;return Math.round(XsltForms_globals.numberValue(e))}),"http://www.w3.org/2002/xforms power":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.powerInvalidArgumentsNumber;return Math.pow(XsltForms_globals.numberValue(e),XsltForms_globals.numberValue(t))}),"http://www.w3.org/2002/xforms random":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.randomInvalidArgumentsNumber;return Math.random()}),"http://www.w3.org/2002/xforms boolean-from-string":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.booleanFromStringInvalidArgumentsNumber;switch((e=XsltForms_globals.stringValue(e)).toLowerCase()){case"true":case"1":return!0;case"false":case"0":default:return!1}}),"http://www.w3.org/2002/xforms if":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e,t,r){if(3!==arguments.length)throw XsltForms_xpathFunctionExceptions.ifInvalidArgumentsNumber;return XsltForms_globals.booleanValue(e)?t:r}),"http://www.w3.org/2002/xforms choose":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e,t,r){if(3!==arguments.length)throw XsltForms_xpathFunctionExceptions.chooseInvalidArgumentsNumber;return XsltForms_globals.booleanValue(e)?t:r}),"http://www.w3.org/2005/xpath-functions avg":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.avgInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.avgInvalidArgumentType;return XsltForms_xpathCoreFunctions["http://www.w3.org/2005/xpath-functions sum"].evaluate(e)/XsltForms_xpathCoreFunctions["http://www.w3.org/2005/xpath-functions count"].evaluate(e)}),"http://www.w3.org/2005/xpath-functions min":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.minInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.minInvalidArgumentType;if(0===e.length)return NaN;for(var t=XsltForms_globals.numberValue(XsltForms_globals.xmlValue(e[0])),r=1,s=e.length;r<s;++r){var o=XsltForms_globals.numberValue(XsltForms_globals.xmlValue(e[r]));if(isNaN(o))return NaN;o<t&&(t=o)}return t}),"http://www.w3.org/2005/xpath-functions max":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.maxInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.maxInvalidArgumentType;if(0===e.length)return NaN;for(var t=XsltForms_globals.numberValue(XsltForms_globals.xmlValue(e[0])),r=1,s=e.length;r<s;++r){var o=XsltForms_globals.numberValue(XsltForms_globals.xmlValue(e[r]));if(isNaN(o))return NaN;o>t&&(t=o)}return t}),"http://www.w3.org/2002/xforms count-non-empty":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.countNonEmptyInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.countNonEmptyInvalidArgumentType;for(var t=0,r=0,s=e.length;r<s;++r)XsltForms_globals.xmlValue(e[r]).length>0&&t++;return t}),"http://www.w3.org/2002/xforms index":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.indexInvalidArgumentsNumber;var r=XsltForms_idManager.find(XsltForms_globals.stringValue(t));if(!r)return NaN;var s=r.xfElement;return e.addDepElement(s),s.index}),"http://www.w3.org/2002/xforms nodeindex":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.nodeIndexInvalidArgumentsNumber;var r=XsltForms_idManager.find(XsltForms_globals.stringValue(t)),s=r.node;return e.addDepElement(r.xfElement),s&&(e.addDepNode(s),e.addDepElement(document.getElementById(XsltForms_browser.getDocMeta(s.nodeType===Fleur.Node.DOCUMENT_NODE?s:s.ownerDocument,"model")).xfElement)),s?[s]:[]}),"http://www.w3.org/2002/xforms property":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.propertyInvalidArgumentsNumber;switch(e=XsltForms_globals.stringValue(e)){case"version":return"1.1";case"conformance-level":return"full";case"xsltforms:debug-mode":return XsltForms_globals.debugMode?"on":"off";case"xsltforms:version":return XsltForms_globals.fileVersion;case"xsltforms:version-number":return""+XsltForms_globals.fileVersionNumber;default:if("xsl:"===e.substring(0,4))for(var t=e.substring(4),r=XsltForms_browser.transformText("<dummy/>",'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">  <xsl:output method="xml"/>  <xsl:template match="/">    <xsl:variable name="version">      <xsl:if test="system-property(\'xsl:vendor\')=\'Microsoft\'">        <xsl:value-of select="system-property(\'msxsl:version\')"/>      </xsl:if>    </xsl:variable>'+"    <properties><xsl:value-of select=\"concat('|vendor=',system-property('xsl:vendor'),'|vendor-url=',system-property('xsl:vendor-url'),'|vendor-version=',$version,'|')\"/></properties>  </xsl:template></xsl:stylesheet>",!0).split("|"),s=1,o=r.length;s<o;s++){var n=r[s].split("=",2);if(n[0]===t)return n[1]}e.match("^["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*$")&&XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-binding-exception","Invalid NCNAME")}return""}),"http://www.w3.org/2002/xforms seconds":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.secondsInvalidArgumentsNumber;var t=(e=XsltForms_globals.stringValue(e)).match("^-?P(?!$)([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T(?!$)([0-9]+H)?([0-9]+M)?([0-9]+(\\.[0-9]+)?S)?)?$");return t?("-"===e.charAt(0)?-1:1)*(60*(60*(24*parseFloat(t[3]||0)+parseFloat(t[5]||0))+parseFloat(t[6]||0))+parseFloat(t[7]||0)):NaN}),"http://www.w3.org/2002/xforms months":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.monthsInvalidArgumentsNumber;var t=(e=XsltForms_globals.stringValue(e)).match("^-?P(?!$)([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T(?!$)([0-9]+H)?([0-9]+M)?([0-9]+(\\.[0-9]+)?S)?)?$");return t?("-"===e.charAt(0)?-1:1)*(12*parseFloat(t[1]||0)+parseFloat(t[2]||0)):NaN}),"http://www.w3.org/2002/xforms instance":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e,t,r,s){if(arguments.length>4)throw XsltForms_xpathFunctionExceptions.instanceInvalidArgumentsNumber;var o,n=t?XsltForms_globals.stringValue(t):"";if(""!==n){var l=document.getElementById(n);if(!l)throw new Error({name:"instance "+n+" not found"});if(r&&l.xfElement.archive){r=XsltForms_globals.stringValue(r);var a=l.xfElement.archive[r];if(!a)throw new Error({name:"file "+r+" not found in instance "+n});if(!a.doc){a.doc=XsltForms_browser.createXMLDocument("<dummy/>");var i=XsltForms_browser.getDocMeta(l.xfElement.doc,"model");XsltForms_browser.loadDoc(a.doc,XsltForms_browser.utf8decode(zip_inflate(a.compressedFileData))),XsltForms_browser.setDocMeta(a.doc,"instance",t),XsltForms_browser.setDocMeta(a.doc,"model",i)}o=a.doc.documentElement}o=l.xfElement.doc.documentElement}else o=e.node.ownerDocument.documentElement;return e.addDepNode(o),[o]}),"http://www.w3.org/2005/xpath-functions subform-instance":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.subformInstanceInvalidArgumentsNumber;return[e.subform.instances[0].doc.documentElement]}),"http://www.w3.org/2005/xpath-functions subform-context":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.subformContextInvalidArgumentsNumber;var t=document.getElementById(e.subform.eltid).xfElement.boundnodes;return t?[t[0]]:[]}),"http://www.w3.org/2002/xforms now":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.nowInvalidArgumentsNumber;return XsltForms_browser.i18n.format(new Date,"yyyy-MM-ddThh:mm:ssz",!1)}),"http://www.w3.org/2002/xforms local-date":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.localDateInvalidArgumentsNumber;return XsltForms_browser.i18n.format(new Date,"yyyy-MM-ddz",!0)}),"http://www.w3.org/2002/xforms local-dateTime":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.localDateTimeInvalidArgumentsNumber;return XsltForms_browser.i18n.format(new Date,"yyyy-MM-ddThh:mm:ssz",!0)}),"http://www.w3.org/2002/xforms adjust-dateTime-to-timezone":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(0===arguments.length)return"";if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.adjustDateTimeToTimezoneInvalidArgumentsNumber;if(e=XsltForms_globals.stringValue(e),!XsltForms_schema.getType("xsd_:date").validate(e)&&!XsltForms_schema.getType("xsd_:dateTime").validate(e))return"";var t,r=/^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z|[+\-])?([01][0-9]|2[0-3])?:?([0-5][0-9])?/.exec(e);return r[8]?(t=new Date(Date.UTC(r[1],r[2]-1,r[3],r[4],r[5],r[6])),"Z"!==r[8]&&t.setUTCMinutes(t.getUTCMinutes()+("+"===r[8]?-1:1)*(60*r[9]+Number(r[10])))):t=new Date(r[1],r[2]-1,r[3],r[4],r[5],r[6]),XsltForms_browser.i18n.format(t,"yyyy-MM-ddThh:mm:ssz",!0)}),"http://www.w3.org/2002/xforms days-from-date":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.daysFromDateInvalidArgumentsNumber;if(e=XsltForms_globals.stringValue(e),!XsltForms_schema.getType("xsd_:date").validate(e)&&!XsltForms_schema.getType("xsd_:dateTime").validate(e))return"NaN";var t=/^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])/.exec(e),r=new Date(Date.UTC(t[1],t[2]-1,t[3]));return Math.floor(r.getTime()/864e5+1e-6)}),"http://www.w3.org/2002/xforms days-to-date":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.daysToDateInvalidArgumentsNumber;if(e=XsltForms_globals.numberValue(e),isNaN(e))return"";var t=new Date;return t.setTime(864e5*Math.floor(e+1e-6)),XsltForms_browser.i18n.format(t,"yyyy-MM-dd",!1)}),"http://www.w3.org/2002/xforms seconds-from-dateTime":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.secondsFromDateTimeInvalidArgumentsNumber;if(e=XsltForms_globals.stringValue(e),!XsltForms_schema.getType("xsd_:dateTime").validate(e))return"NaN";var t=/^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z|[+\-])?([01][0-9]|2[0-3])?:?([0-5][0-9])?/.exec(e),r=new Date(Date.UTC(t[1],t[2]-1,t[3],t[4],t[5],t[6]));return t[8]&&"Z"!==t[8]&&r.setUTCMinutes(r.getUTCMinutes()+("+"===t[8]?-1:1)*(60*t[9]+Number(t[10]))),Math.floor(r.getTime()/1e3+1e-6)+(t[7]?Number(t[7]):0)}),"http://www.w3.org/2002/xforms seconds-to-dateTime":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.secondsToDateTimeInvalidArgumentsNumber;if(e=XsltForms_globals.numberValue(e),isNaN(e))return"";var t=new Date;return t.setTime(1e3*Math.floor(e+1e-6)),XsltForms_browser.i18n.format(t,"yyyy-MM-ddThh:mm:ssz",!1)}),"http://www.w3.org/2002/xforms current":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!0,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.currentInvalidArgumentsNumber;return e.addDepNode(e.node),e.addDepElement(document.getElementById(XsltForms_browser.getDocMeta(e.node.nodeType===Fleur.Node.DOCUMENT_NODE?e.node:e.node.ownerDocument,"model")).xfElement),[e.current]}),"http://www.w3.org/2002/xforms valid":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.validInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.validInvalidArgumentType;for(var t=!0,r=0,s=e.length;t&&r<s;r++)t=t&&XsltForms_globals.validate_(e[r]);return t}),"http://www.w3.org/2002/xforms is-card-number":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.isCardNumberInvalidArgumentsNumber;e=XsltForms_globals.stringValue(e).trim();for(var t=0,r=new Array(e.length),s=0,o=e.length;s<o;s++)if(r[s]=e.charAt(s)-"0",r[s]<0||r[s]>9)return!1;for(var n=r.length-2;n>=0;n-=2)r[n]*=2,r[n]>9&&(r[n]-=9);for(var l=0,a=r.length;l<a;l++)t+=r[l];return t%10==0}),"http://www.w3.org/2002/xforms digest":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(2!==arguments.length&&3!==arguments.length)throw XsltForms_xpathFunctionExceptions.digestInvalidArgumentsNumber;return"SHA-1"!==(t=XsltForms_globals.stringValue(t))&&"MD5"!==t&&"SHA-256"!==t&&"BASE64"!==t?(XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-compute-exception","Invalid crypting method"),"unsupported"):"hex"!==(r=r?XsltForms_globals.stringValue(r):"base64")&&"base64"!==r?(XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-compute-exception","Invalid encoding method"),"unsupported"):(e=XsltForms_globals.stringValue(e),XsltForms_globals.encode(XsltForms_globals.crypto(XsltForms_globals.str2msg(e),t),r))}),"http://www.w3.org/2002/xforms hmac":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r,s){if(3!==arguments.length&&4!==arguments.length)throw XsltForms_xpathFunctionExceptions.hmacInvalidArgumentsNumber;if("SHA-1"!==(r=XsltForms_globals.stringValue(r))&&"MD5"!==r&&"SHA-256"!==r&&"BASE64"!==r)return XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-compute-exception","Invalid crypting method"),"unsupported";if("hex"!==(s=s?XsltForms_globals.stringValue(s):"base64")&&"base64"!==s)return XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-compute-exception","Invalid encoding method"),"unsupported";e=XsltForms_globals.stringValue(e),t=XsltForms_globals.stringValue(t);var o,n=[],l=[],a=XsltForms_globals.str2msg(e);for(a.length>64&&(a=XsltForms_globals.crypto(a,r)),o=a.length+3>>2;o<16;o++)a.arr[o]=0;for(o=0;o<16;o++)n[o]=909522486^a.arr[o],l[o]=1549556828^a.arr[o];var i=XsltForms_globals.str2msg(t);i.length+=64,i.arr=n.concat(i.arr);var m=XsltForms_globals.crypto(i,r);return m.length+=64,m.arr=l.concat(m.arr),XsltForms_globals.encode(XsltForms_globals.crypto(m,r),s)}),"http://www.w3.org/2005/xpath-functions upper-case":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.upperCaseInvalidArgumentsNumber;return(e=XsltForms_globals.stringValue(e)).toUpperCase()}),"http://www.w3.org/2005/xpath-functions lower-case":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.lowerCaseInvalidArgumentsNumber;return(e=XsltForms_globals.stringValue(e)).toLowerCase()}),"http://www.w3.org/2005/xpath-functions distinct-values":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.distinctValuesInvalidArgumentsNumber;for(var t=[],r={},s=0,o=e.length;s<o;++s){var n=XsltForms_globals.xmlValue(e[s]);r[n]||(t.push(e[s]),r[n]=!0)}return t}),"http://www.w3.org/2005/xpath-functions sort":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.sortInvalidArgumentsNumber;return e.sort(function(e,t){var r=XsltForms_globals.xmlValue(e),s=XsltForms_globals.xmlValue(t);return r<s?-1:r>s?1:0})}),"http://www.w3.org/2005/xpath-functions format-dateTime":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.formatNumberInvalidArgumentsNumber;e=XsltForms_globals.stringValue(e);for(var r="",s=0,o=t.length,n="";s<o;){for(var l=t.charAt(s),a="";"["!==l&&s<o;)"]"!==l?r+=l:a===l&&(r+=l,l=""),a=l,l=t.charAt(++s);if("["===l)if("["===(l=t.charAt(++s)))r+=l,s++;else{for(n="";"]"!==l&&s<o;)n+=l,l=t.charAt(++s);if("]"===l){var i=null,m=null;switch(n.charAt(0)){case"Y":!0,"i"===n.charAt(1).toLowerCase()?(m=Fleur.convertToRoman(parseInt(e.substr(0,4),10)),"i"===n.charAt(1)&&(m=m.toLowerCase())):i=parseInt(e.substr(0,4),10);break;case"M":!0,"i"===n.charAt(1).toLowerCase()?(m=Fleur.convertToRoman(parseInt(e.substr(5,2),10)),"i"===n.charAt(1)&&(m=m.toLowerCase())):"n"===n.charAt(1).toLowerCase()?(m=Fleur.getMonthName(language,null),m="N"===n.charAt(1)?"n"===n.charAt(2)?m.charAt(0).toUpperCase()+m.substr(1).toLowerCase():m.toUpperCase():m.toLowerCase()):i=parseInt(e.substr(5,2),10);break;case"D":!0,i=parseInt(e.substr(8,2),10);break;case"d":break;case"F":!0,m=Fleur.getDayName(language,null),m="N"===n.charAt(1)?"n"===n.charAt(2)?m.charAt(0).toUpperCase()+m.substr(1).toLowerCase():m.toUpperCase():m.toLowerCase();break;case"W":case"w":case"H":break;case"h":!0,i=parseInt(e.substr(11,2),10);break;case"P":break;case"m":!0,i=parseInt(e.substr(14,2),10);break;case"s":!0,i=parseInt(e.substr(17,2),10)}if(null!==i||null!==m){var u,c;if((n=n.split(","))[1]){var d=n[1].split("-");c="*"===d[0]?1:parseInt(d[0],10),u=d[1]&&"*"!==d[1]?parseInt(d[1],10):1/0}else c=Math.max(n[0].length-1,1),u=1/0;null!==i&&(m=String(i)),(m="0".repeat(Math.max(c-m.length,0))+m).length>u&&"Y"===n[0].charAt(0)&&(m=m.substr(m.length-u))}null!==m&&(r+=m),s++}}}return r}),"http://www.w3.org/2005/xpath-functions format-number":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e,t){var r,s,o,n,l,a,i,m,u,c,d,h,p,X,f,g,x,b,F,_,y,w,v,E,N;if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.formatNumberInvalidArgumentsNumber;if(e=XsltForms_globals.numberValue(e),isNaN(e))return XsltForms_browser.i18n.get("format-number.NaN","NaN");for(l=t.split(XsltForms_browser.i18n.get("format-number.pattern-separator-sign",";")),".,-%‰#0123456789",".,e-%‰#0123456789",r=0,o=(t=e<0&&l[1]?l[1]:l[0]).length;r<o&&-1===".,-%‰#0123456789".indexOf(t.charAt(r));)r++;for(f=t.substring(0,r),a=i=m=u=!1,X=0,0,b=0,F=0,h=[],p=[],x=[];r<o&&-1!==".,e-%‰#0123456789".indexOf(t.charAt(r));){switch(t.charAt(r)){case".":for(a=!0,g=r+1,s=0,n=h.length;s<n;)p[n-s-1]=r-h[s]-1,s++;break;case",":a?x.push(r-g):h.push(r);break;case"e":if(i=!0,!a)for(s=0,n=h.length;s<n;)p[n-s-1]=r-h[s]-1,s++;break;case"-":!0,0===X;break;case"%":if(m=!0,c=0!==X,e*=100,!a)for(s=0,n=h.length;s<n;)p[n-s-1]=r-h[s]-1,s++;break;case"‰":if(u=!0,d=0!==X,e*=1e3,!a)for(s=0,n=h.length;s<n;)p[n-s-1]=r-h[s]-1,s++;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i?F++:a?(0,b++):X++;break;case"#":a&&b++}r++}if(!a){if(h.length!==p.length)for(s=0,n=h.length;s<n;)p[n-s-1]=r-h[s]-1,s++;0===X&&(X=1)}if(p.length>1){for(s=1,n=p.length;s<n&&p[s]%p[0]==0;)s++;s===n&&(p=[p[0]])}if(1===p.length)for(s=1;s<30;)p[s]=p[s-1]+p[0],s++;if(_=t.substring(r),e===Number.POSITIVE_INFINITY)return f+XsltForms_browser.i18n.get("format-number.infinity","Infinity")+_;if(e===Number.NEGATIVE_INFINITY)return XsltForms_browser.i18n.get("format-number.minus-sign","-")+f+XsltForms_browser.i18n.get("format-number.infinity","Infinity")+_;for(e<0&&1===l.length&&(f=XsltForms_browser.i18n.get("format-number.minus-sign","-")+f),i&&(w=Math.floor(Math.log(e)/Math.LN10)+1-X,e/=Math.pow(10,w),v=w<0?XsltForms_browser.i18n.get("format-number.minus-sign","-"):"",w=""+Math.abs(w),w=v+"000000000000000000000000000000".substr(0,Math.max(0,F-w.length))+w),E=Math.abs(e).toFixed(b),0===b&&a&&(E+="."),(y=-1===E.indexOf(".")?E.length:E.indexOf("."))<X&&(E="000000000000000000000000000000".substr(0,X-y)+E,y=X),s=y-1,N="",r=0,n=E.length;s>=0;)N=E.charAt(s)+N,0!==s&&p[r]===y-s&&(N=XsltForms_browser.i18n.get("format-number.grouping-separator-sign",",")+N,r++),s--;if(a)for(N+=XsltForms_browser.i18n.get("format-number.decimal-separator-sign","."),s=y+1,r=0;s<n;)N+=E.charAt(s),s!==n-1&&x[r]===s-y&&(N+=XsltForms_browser.i18n.get("format-number.grouping-separator-sign",","),r++),s++;return m&&(c?N+=XsltForms_browser.i18n.get("format-number.percent-sign","%"):N=XsltForms_browser.i18n.get("format-number.percent-sign","%")+N),u&&(d?N+=XsltForms_browser.i18n.get("format-number.per-mille-sign","‰"):N=XsltForms_browser.i18n.get("format-number.per-mille-sign","‰")+N),i&&(N+=XsltForms_browser.i18n.get("format-number.exponent-separator-sign","e")+w),f+N+_}),"http://www.w3.org/2002/xforms transform":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(arguments.length<3)throw XsltForms_xpathFunctionExceptions.transformInvalidArgumentsNumber;if(0===e.length)return"";var s=[];s.push(XsltForms_browser.saveNode(e[0],"application/xml")),s.push(XsltForms_globals.stringValue(t)),s.push(XsltForms_globals.booleanValue(r));for(var o=3,n=arguments.length;o<n;o++)s.push(XsltForms_globals.stringValue(arguments[o]));return XsltForms_browser.transformText.apply(null,s)}),"http://www.w3.org/2002/xforms serialize":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODE,!1,function(e,t,r){if(arguments.length>=1&&"object"!=typeof e)throw XsltForms_xpathFunctionExceptions.serializeInvalidArgumentType;if(0===arguments.length)throw XsltForms_xpathFunctionExceptions.serializeNoContext;return 0===e.length?"":XsltForms_browser.saveNode(e[0],t?XsltForms_globals.stringValue(t):"application/xml",null,"yes"===r?r:null)}),"http://www.w3.org/2002/xforms event":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.eventInvalidArgumentsNumber;for(var t=XsltForms_xmlevents.EventContexts.length-1;t>=0;t--){var r=XsltForms_xmlevents.EventContexts[t];if(r[e])return r[e]}return null}),"http://www.w3.org/2005/xpath-functions bind":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.bindInvalidArgumentsNumber;var r=XsltForms_idManager.find(XsltForms_globals.stringValue(t));if(!r)return null;var s=r.xfElement;return e.addDepElement(s),s.nodes}),"http://www.w3.org/2005/xpath-functions is-non-empty-array":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e){if(arguments.length>1)throw XsltForms_xpathFunctionExceptions.isNonEmptyArrayInvalidArgumentsNumber;if("object"!=typeof e[0])throw XsltForms_xpathFunctionExceptions.isNonEmptyArrayInvalidArgumentType;return e[0].getAttribute("exsi:maxOccurs")&&"true"!==e[0].getAttribute("xsi:nil")}),"http://exslt.org/math abs":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.abs(XsltForms_globals.numberValue(e))}),"http://exslt.org/math acos":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.acos(XsltForms_globals.numberValue(e))}),"http://exslt.org/math asin":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.asin(XsltForms_globals.numberValue(e))}),"http://exslt.org/math atan":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.atan(XsltForms_globals.numberValue(e))}),"http://exslt.org/math atan2":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.math2InvalidArgumentsNumber;return Math.atan2(XsltForms_globals.numberValue(e),XsltForms_globals.numberValue(t))}),"http://exslt.org/math constant":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.math2InvalidArgumentsNumber;var r=XsltForms_mathConstants[XsltForms_globals.stringValue(e)]||"0";return parseFloat(r.substr(0,XsltForms_globals.numberValue(t)+2))}),"http://exslt.org/math cos":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.cos(XsltForms_globals.numberValue(e))}),"http://exslt.org/math exp":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.exp(XsltForms_globals.numberValue(e))}),"http://exslt.org/math log":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.log(XsltForms_globals.numberValue(e))}),"http://exslt.org/math power":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.math2InvalidArgumentsNumber;return Math.pow(XsltForms_globals.numberValue(e),XsltForms_globals.numberValue(t))}),"http://exslt.org/math sin":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.sin(XsltForms_globals.numberValue(e))}),"http://exslt.org/math sqrt":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.sqrt(XsltForms_globals.numberValue(e))}),"http://exslt.org/math tan":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.math1InvalidArgumentsNumber;return Math.tan(XsltForms_globals.numberValue(e))}),"http://exslt.org/regular-expressions match":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){if(2!==arguments.length&&3!==arguments.length)throw XsltForms_xpathFunctionExceptions.matchInvalidArgumentsNumber;e=XsltForms_globals.stringValue(e),t=XsltForms_globals.stringValue(t),r=r?XsltForms_globals.stringValue(r):"";try{var s=new RegExp(t,r),o=e.match(s);if(!o)return[];for(var n="",l=0,a=o.length;l<a;l++)n+="<match>"+o[l]+"</match>";var i=XsltForms_browser.createXMLDocument("<matches>"+n+"</matches>"),m=[];for(l=0,a=i.documentElement.children.length;l<a;l++)m.push(i.documentElement.children[l]);return m}catch(e){return[]}}),"http://www.w3.org/2005/xpath-functions alert":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.alertInvalidArgumentsNumber;return alert(XsltForms_globals.stringValue(e)),e}),"http://www.w3.org/2005/xpath-functions itext":new XsltForms_xpathFunction(!0,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.itextInvalidArgumentsNumber;var r=document.getElementById(XsltForms_browser.getDocMeta(e.node.ownerDocument,"model")).xfElement.itext;return(r[XsltForms_globals.language]||r[r.defaultlang])[t]}),"http://www.w3.org/2005/xpath-functions js-eval":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(arg){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.jsevalInvalidArgumentsNumber;return eval(XsltForms_globals.stringValue(arg))}),"http://www.w3.org/2005/xpath-functions string-join":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(1!==arguments.length&&2!==arguments.length)throw XsltForms_xpathFunctionExceptions.stringJoinInvalidArgumentsNumber;if("object"!=typeof e)throw XsltForms_xpathFunctionExceptions.stringJoinInvalidArgumentType;var r=[];t=t||"";for(var s=0,o=e.length;s<o;s++)r.push(XsltForms_globals.xmlValue(e[s]));return r.join(t)}),"http://www.w3.org/2005/xpath-functions selection":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.selectionInvalidArgumentsNumber;var t=XsltForms_globals.stringValue(e),r=XsltForms_idManager.find(t);if(r&&r.xfElement){var s=(r=r.xfElement).input;return s.value.substring(s.selectionStart,s.selectionEnd)}return""}),"http://www.w3.org/2005/xpath-functions control-property":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){if(2!==arguments.length)throw XsltForms_xpathFunctionExceptions.controlPropertyJoinInvalidArgumentsNumber;var r=XsltForms_globals.stringValue(e),s=XsltForms_idManager.find(r);if(s&&s.xfElement){var o=(s=s.xfElement).input;if(o[t=XsltForms_globals.stringValue(t)])return o[t]}return""}),"http://www.w3.org/2005/xpath-functions encode-for-uri":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e){if(1!==arguments.length)throw XsltForms_xpathFunctionExceptions.encodeForUriInvalidArgumentsNumber;return encodeURIComponent(XsltForms_globals.stringValue(e))}),"http://www.w3.org/2005/xpath-functions fromtostep":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t,r){for(var s=[],o=e;o<=t;o+=r)s.push({nodeType:Fleur.Node.DOCUMENT_NODE,localName:"repeatitem",text:o+"",documentElement:"dummy",getUserData:function(){return""}});return s}),"http://www.w3.org/2005/xpath-functions tokenize":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(e,t){var r=[];e=XsltForms_globals.stringValue(e),t=new RegExp(XsltForms_globals.stringValue(t.replace(/\\/g,"\\")));for(var s=e.split(t),o=0,n=s.length;o<n;o++)r.push({localName:"#text",text:s[o],documentElement:"dummy"});return r}),"http://www.w3.org/2005/xpath-functions uuid":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.uuidInvalidArgumentsNumber;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}),"http://www.w3.org/2005/xpath-functions meta":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NODESET,!1,function(e,t){if(arguments.length<1||arguments.length>2)throw XsltForms_xpathFunctionExceptions.metaInvalidArgumentsNumber;if(2===arguments.length&&"object"!=typeof e)throw XsltForms_xpathFunctionExceptions.metaInvalidArgumentType;var r,s;return 1===arguments.length?(r=e,s=XsltForms_globals.stringValue(e)):(r=e[0],s=XsltForms_globals.stringValue(t)),XsltForms_browser.getMeta(r,"meta-"+s)}),"http://www.w3.org/2005/xpath-functions form-source":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){if(0!==arguments.length)throw XsltForms_xpathFunctionExceptions.formSourceInvalidArgumentsNumber;let e="";const t=XsltForms_subform.subforms["xsltforms-mainform"].instances;for(let r=0,s=t.length-1;r<s;r++)0===r?e=XsltForms_globals.formSource.substring(0,t[0].sourceStart):e+=XsltForms_globals.formSource.substring(t[r-1].sourceStart+t[r-1].instanceSource.length,t[r].sourceStart),e+=t[r].instanceSource.substring(0,t[r].instanceSource.indexOf(t[r].dataSource)),e+=XsltForms_browser.saveDoc(t[r].doc,t[r].mediatype),e+=t[r].instanceSource.substring(t[r].instanceSource.indexOf(t[r].dataSource)+t[r].dataSource.length);return e+=XsltForms_globals.formSource.substring(t[t.length-2].sourceStart+t[t.length-2].instanceSource.length)}),"http://www.w3.org/2005/xpath-functions invalid-id":new XsltForms_xpathFunction(!1,XsltForms_xpathFunction.DEFAULT_NONE,!1,function(){return XsltForms_globals.invalid_id_(XsltForms_globals.body)})};function XsltForms_functionCallExpr(fname){if(this.name=fname,this.func=XsltForms_xpathCoreFunctions[fname],this.xpathfunc=!!this.func,this.args=[],!this.xpathfunc)try{this.func=eval(fname.split(" ")[1])}catch(e){alert(e)}this.func||XsltForms_debugger.active||XsltForms_globals.error(this,"xforms-compute-exception","Function "+this.name+"() not found");for(var i=1,len=arguments.length;i<len;i++)this.args.push(arguments[i])}function XsltForms_coreElement(){}function XsltForms_options(e,t){this.init(e,t);var r=t.getAttribute("xf-debug");r&&"yes"===r.toLowerCase()&&(XsltForms_globals.debugMode=!0,XsltForms_globals.debugging());var s=t.getAttribute("xf-lang");s&&(XsltForms_globals.language=s)}function XsltForms_model(subform,elt){elt.id||document.getElementById(subform.id+"-model-default")||(elt.id=subform.id+"-model-default");for(var children=elt.children,i=0,l=children.length;i<l&&"xforms-instance"!==children[i].localName.toLowerCase();i++);if(i===l){var definst=document.createElement("xforms-instance");definst.innerHTML='<script type="application/xml">&lt;data xmlns=""/&gt;<\/script>',elt.appendChild(definst)}var schemas=elt.getAttribute("xf-schema"),functions=elt.getAttribute("xf-functions"),version=elt.getAttribute("xf-version"),found;if("xsltforms-mainform"!==subform.id&&XsltForms_globals.addChange(this),this.init(subform,elt),this.instances={},this.binds=[],this.nodesChanged=[],this.newNodesChanged=[],this.schemas=[],this.defaultInstance=null,this.defaultSubmission=null,XsltForms_globals.models.push(this),subform.models.push(this),XsltForms_globals.defaultModel=XsltForms_globals.defaultModel||this,elt.getInstanceDocument=function(e){return this.xfElement.getInstanceDocument(e)},elt.rebuild=function(){return this.xfElement.rebuild()},elt.recalculate=function(){return this.xfElement.recalculate()},elt.revalidate=function(){return this.xfElement.revalidate()},elt.refresh=function(){return this.xfElement.refresh()},elt.reset=function(){return this.xfElement.reset()},elt.handleEvent=function(e,t){XsltForms_xmlevents.dispatch(elt,e,null,null,null,null,t)},schemas)for(schemas=schemas.split(" "),i=0,l=schemas.length;i<l;i++){for(var sid in found=!1,XsltForms_schema.all)if(XsltForms_schema.all.hasOwnProperty(sid)){var schema=XsltForms_schema.all[sid];if(schema.name===schemas[i]){this.schemas.push(schema),found=!0;break}}found||XsltForms_globals.error(this,"xforms-link-exception","Schema "+schemas[i]+" not found")}if(functions)for(var fs=functions.split(" "),j=0,len2=fs.length;j<len2;j++){found=!1;for(var k=0,len3=XsltForms_xpathCoreFunctions.length;k<len3;k++)if(XsltForms_xpathCoreFunctions[k].split(" ")[1]===fs[j]){found=!0;break}if(!found)try{i=eval(fs[j])}catch(e){XsltForms_globals.error(this,"xforms-compute-exception","Function "+fs[j]+"() not found")}}if(version)for(var vs=version.split(" "),l=0,len4=vs.length;l<len4;l++)if("1.0"!==vs[l]&&"1.1"!==vs[l]){XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-version-exception","Version "+vs[l]+" not supported");break}Array.prototype.slice.call(elt.children).forEach(function(e){if("script"===e.localName.toLowerCase()&&"application/xml"===e.getAttribute("type")){var t=e.textContent;t.startsWith("&")&&(t=XsltForms_browser.unescape(t));var r=XsltForms_browser.createXMLDocument(t);new XsltForms_schema(subform,r.documentElement.getAttribute("targetNamespace"),"#local",{},r)}})}function XsltForms_instance(subform,elt){XsltForms_globals.formSource&&(this.instanceSource=elt.outerHTML,0===subform.instances.length?this.sourceStart=XsltForms_globals.formSource.indexOf(this.instanceSource):this.sourceStart=XsltForms_globals.formSource.indexOf(this.instanceSource,subform.instances[subform.instances.length-1].sourceStart+subform.instances[subform.instances.length-1].instanceSource.length),this.dataSource=elt.children[0]?elt.children[0].textContent:""),elt.id||document.getElementById(subform.id+"-instance-default")||(elt.id=subform.id+"-instance-default");var model=elt.parentNode.xfElement,srcDoc=elt.children[0]?elt.children[0].textContent:"";if(srcDoc=srcDoc.replace(/(<|&lt;)\\\/script(>|&gt;)/g,"<\/script>"),""===srcDoc&&(elt.innerHTML=""),Fleur.DOMParse)this.init(subform,elt),this.readonly=elt.getAttribute("xf-readonly"),this.mediatype=elt.getAttribute("xf-mediatype"),this.src=XsltForms_browser.unescape(elt.getAttribute("xf-src")),this.srcDoc=srcDoc.replace(/^\s+|\s+$/gm,""),this.model=model,this.doc=XsltForms_browser.createXMLDocument("<dummy/>"),XsltForms_browser.setDocMeta(this.doc,"instance",elt.id),XsltForms_browser.setDocMeta(this.doc,"model",model.element.id),model.addInstance(this),subform.instances.push(this);else{this.init(subform,elt),this.readonly=elt.getAttribute("xf-readonly");var mediatype=elt.getAttribute("xf-mediatype")||"application/xml",lines=mediatype.split(";");this.mediatype=lines[0];for(var i=1,len=lines.length;i<len;i++){var vals=lines[i].split("=");switch(vals[0].replace(/^\s+/g,"").replace(/\s+$/g,"")){case"header":this.header="present"===vals[1].replace(/^\s+/g,"").replace(/\s+$/g,"");break;case"separator":this.separator=(decodeURI||unescape)(vals[1].replace(/^\s+/g,"").replace(/\s+$/g,""));break;case"charset":this.charset=vals[1].replace(/^\s+/g,"").replace(/\s+$/g,"")}}this.src=XsltForms_browser.unescape(elt.getAttribute("xf-src")||(0!==elt.children.length?null:elt.getAttribute("xf-resource")));var newmediatype=this.mediatype;switch("/xml"!==newmediatype.substr(newmediatype.length-4)&&"/xsl"!==newmediatype.substr(newmediatype.length-4)&&"+xml"!==newmediatype.substr(newmediatype.length-4)||(newmediatype="application/xml"),newmediatype){case"application/xml":this.srcDoc=srcDoc.trim(),"&"===this.srcDoc.substring(0,1)&&(this.srcDoc=XsltForms_browser.unescape(this.srcDoc));break;case"text/json":case"application/json":case"application/javascript":var json;if(srcDoc)eval("json = "+srcDoc),this.srcDoc=XsltForms_browser.json2xml("",json,!0,!1);else this.srcDoc="";break;case"text/csv":this.srcDoc=XsltForms_browser.csv2xml(srcDoc,this.separator,this.header);break;case"text/vcard":this.srcDoc=XsltForms_browser.vcard2xcard(srcDoc);break;case"application/zip":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":this.srcDoc="<dummy/>";break;default:return void alert("Unsupported mediatype '"+elt.getAttribute("mediatype")+"' for instance #"+elt.id)}this.model=model,this.doc=XsltForms_browser.createXMLDocument("<dummy/>"),XsltForms_browser.setDocMeta(this.doc,"instance",elt.id),XsltForms_browser.setDocMeta(this.doc,"model",model.element.id),model.addInstance(this),subform.instances.push(this)}}XsltForms_xpathCoreFunctions["http://www.w3.org/2002/xforms is-valid"]=XsltForms_xpathCoreFunctions["http://www.w3.org/2002/xforms valid"],XsltForms_globals.invalid_id_=function(e){if(e.nodeType!==Fleur.Node.ELEMENT_NODE||"xsltforms-console"===e.id||!1===e.hasXFElement)return"";var t=e.xfElement;if(t&&"group"!==t.controlName&&!(t instanceof Array)&&!t.isRepeat)return t.invalid&&!t.isOutput?e.id:"";for(var r=e.children||e.childNodes,s=0,o=r.length;s<o;s++){var n=XsltForms_globals.invalid_id_(r[s]);if(""!==n)return n}return""},XsltForms_globals.validate_=function(e){if(XsltForms_browser.getBoolMeta(e,"invalid")||XsltForms_browser.getBoolMeta(e,"unsafe"))return!1;for(var t=e.attributes||[],r=0,s=t.length;r<s;r++)if("xsltforms_"!==t[r].nodeName.substr(0,10)&&"xmlns"!==t[r].nodeName.substr(0,5)&&!XsltForms_globals.validate_(t[r]))return!1;for(var o=e.childNodes||[],n=0,l=o.length;n<l;n++)if(!XsltForms_globals.validate_(o[n]))return!1;return!0},Fleur.XPathNSResolver_default={pf:["xml","xmlns","xs","xsd","xsd_","xsi","xf","xforms","xsltforms"," function","fn","local","math","map","array","err","b","bin","file","http","request","prof","proc","js","fleur","dgram","base64","internal","unit","ietf","excel","zip","matrix","xpath","xquery"],uri:["http://www.w3.org/XML/1998/namespace","http://www.w3.org/2000/xmlns/","http://www.w3.org/2001/XMLSchema","http://www.w3.org/2001/XMLSchema","http://www.w3.org/2001/XMLSchema","http://www.w3.org/2001/XMLSchema-instance","http://www.w3.org/2002/xforms","http://www.w3.org/2002/xforms","http://www.agencexml.com/xsltforms","http://www.w3.org/2005/xpath-functions","http://www.w3.org/2005/xpath-functions","http://www.w3.org/2005/xpath","http://www.w3.org/2005/xpath-functions/math","http://www.w3.org/2005/xpath-functions/map","http://www.w3.org/2005/xpath-functions/array","http://www.w3.org/2005/xqt-errors","http://xqib.org","http://expath.org/ns/binary","http://expath.org/ns/file","http://expath.org/ns/http-client","http://exquery.org/ns/request","http://basex.org/modules/prof","http://basex.org/modules/proc","http://www.w3.org/standards/webdesign/script","http://www.agencexml.com/fleur","http://www.agencexml.com/fleur/dgram","http://www.agencexml.com/fleur/base64","http://www.agencexml.com/fleur/internal","http://www.agencexml.com/fleur/unit","https://tools.ietf.org/rfc/index","http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://expath.org/ns/zip","http://www.mathunion.org/matrix","http://www.w3.org/2005/xpath","http://www.w3.org/2005/xquery"]},Fleur.minimal&&(Fleur.XPathNSResolver=function(e){this.pf=Fleur.XPathNSResolver_default.pf.slice(),this.uri=Fleur.XPathNSResolver_default.uri.slice(),this.node=e},Fleur.XPathNSResolver.prototype.lookupNamespaceURI=function(e){var t,r=this.pf.lastIndexOf(e);return-1!==r?this.uri[r]:(this.node&&(t=this.node.lookupNamespaceURI(e))&&(this.pf.push(e),this.uri.push(t)),t)},Fleur.XPathNSResolver.prototype.lookupPrefix=function(e){var t,r=this.uri.lastIndexOf(e);return-1!==r?this.pf[r]:(this.node&&(t=this.node.lookupPrefix(e))&&(this.pf.push(t),this.uri.push(e)),t)},Fleur.XPathNSResolver.prototype.declareNamespace=function(e,t){this.pf.push(e),this.uri.push(t)}),XsltForms_functionCallExpr.prototype.evaluate=function(e){var t=[];if(this.xpathfunc){for(var r=0,s=this.args.length;r<s;r++)t[r]=this.args[r].evaluate(e);return this.func.call(e,t)}for(var o=0,n=this.args.length;o<n;o++)t[o]=XsltForms_globals.stringValue(this.args[o].evaluate(e));return XsltForms_context={ctx:e},this.func.apply(null,t)},XsltForms_coreElement.prototype.init=function(e,t){this.subforms=[],this.subforms[e]=!0,this.nbsubforms=1,this.subform=e,this.element=t},XsltForms_coreElement.prototype.build=function(){},XsltForms_coreElement.prototype.dispose=function(){this.element&&(this.element.xfElement=null,this.element.parentNode.removeChild(this.element)),this.element=null,this.model=null},new XsltForms_class("XsltForms_options","HTMLElement","xforms-options"),XsltForms_options.prototype=new XsltForms_coreElement,Array.prototype.slice.call(document.documentElement.attributes).forEach(function(e){"xmlns:"===e.nodeName.substr(0,6)||"xmlns-"===e.nodeName.substr(0,6)?(Fleur.XPathNSResolver_default.pf.push(e.nodeName.substr(6)),Fleur.XPathNSResolver_default.uri.push(e.nodeValue)):"xmlns"===e.localName&&e.prefix?(Fleur.XPathNSResolver_default.pf.push(e.prefix.toLowerCase()),Fleur.XPathNSResolver_default.uri.push(e.namespaceURI)):e.prefix&&""!==e.prefix&&(Fleur.XPathNSResolver_default.pf.push(e.prefix.toLowerCase()),Fleur.XPathNSResolver_default.uri.push(e.namespaceURI))}),Array.prototype.slice.call(document.querySelectorAll("script[data-uri]")).forEach(function(e){XsltForms_globals.jslibraries[e.getAttribute("data-uri")]=e.getAttribute("data-version")}),new XsltForms_class("XsltForms_model","HTMLElement","xforms-model"),XsltForms_model.prototype=new XsltForms_coreElement,XsltForms_model.create=function(e,t,r,s,o){var n=document.getElementById(t);return n?(n.xfElement.subforms[e]=!0,n.xfElement.nbsubforms++,e.models.push(n.xfElement),XsltForms_globals.addChange(n.xfElement),n.xfElement):new XsltForms_model(e,t,r,s,o)},XsltForms_model.prototype.addInstance=function(e){this.instances[e.element.id]=e,this.defaultInstance=this.defaultInstance||e},XsltForms_model.prototype.addBind=function(e){this.binds.push(e)},XsltForms_model.prototype.dispose=function(e){if(e&&1!==this.nbsubforms)return this.subforms[e]=null,void this.nbsubforms--;this.instances=null,this.binds=null,this.itext=null,this.defaultInstance=null;for(var t=0,r=XsltForms_globals.models.length;t<r;t++)if(XsltForms_globals.models[t]===this){XsltForms_globals.models.splice(t,1);break}XsltForms_coreElement.prototype.dispose.call(this)},XsltForms_model.prototype.getInstance=function(e){return e?this.instances[e]:this.defaultInstance},XsltForms_model.prototype.getInstanceDocument=function(e){var t=this.getInstance(e);return t?t.doc:null},XsltForms_model.prototype.findInstance=function(e){var t=e.nodeType===Fleur.Node.DOCUMENT_NODE?e:e.ownerDocument;for(var r in this.instances)if(this.instances.hasOwnProperty(r)){var s=this.instances[r];if(t===s.doc)return s;for(var o in s.archive)if(s.archive.hasOwnProperty(o)&&t===s.archive[o].doc)return s}return null},XsltForms_model.prototype.construct=function(){XsltForms_globals.ready||XsltForms_browser.forEach(this.instances,"construct"),XsltForms_globals.ready?XsltForms_xmlevents.dispatch(this,"xforms-rebuild"):this.rebuild(),XsltForms_xmlevents.dispatch(this,"xforms-model-construct-done"),this===XsltForms_globals.models[XsltForms_globals.models.length-1]&&window.setTimeout('XsltForms_xmlevents.dispatchList(XsltForms_globals.models, "xforms-ready")',1)},XsltForms_model.prototype.reset=function(){XsltForms_browser.forEach(this.instances,"reset"),this.setRebuilded(!0),XsltForms_globals.addChange(this)},XsltForms_model.prototype.rebuild=function(){XsltForms_globals.ready&&this.setRebuilded(!0),XsltForms_browser.forEach(this.binds,"refresh"),XsltForms_globals.ready?XsltForms_xmlevents.dispatch(this,"xforms-recalculate"):this.recalculate()},XsltForms_model.prototype.recalculate=function(){XsltForms_browser.forEach(this.binds,"recalculate"),XsltForms_globals.ready?XsltForms_xmlevents.dispatch(this,"xforms-revalidate"):this.revalidate()},XsltForms_model.prototype.revalidate=function(){XsltForms_browser.forEach(this.instances,"revalidate"),XsltForms_globals.ready&&XsltForms_xmlevents.dispatch(this,"xforms-refresh")},XsltForms_model.prototype.refresh=function(){XsltForms_globals.refresh()},XsltForms_model.prototype.addChange=function(e){var t=XsltForms_globals.building?this.newNodesChanged:this.nodesChanged;for(XsltForms_browser.inArray(e,t)||XsltForms_globals.addChange(this),e.nodeType!==Fleur.Node.ATTRIBUTE_NODE||XsltForms_browser.inArray(e,t)||(t.push(e),e=e.ownerElement?e.ownerElement:e.selectSingleNode(".."));e&&e.nodeType!==Fleur.Node.DOCUMENT_NODE&&!XsltForms_browser.inArray(e,t);)t.push(e),e=e.nodeType===Fleur.Node.ENTRY_NODE?e.ownerMap:e.parentNode},XsltForms_model.prototype.setRebuilded=function(e){XsltForms_globals.building?this.newRebuilded=e:this.rebuilded=e},new XsltForms_class("XsltForms_instance","HTMLElement","xforms-instance"),XsltForms_instance.prototype=new XsltForms_coreElement,XsltForms_instance.create=function(e,t,r,s,o,n,l){var a=document.getElementById(t);return a&&a.xfElement?(a.xfElement.subforms[e]=!0,a.xfElement.nbsubforms++,e.instances.push(a.xfElement),a.xfElement):new XsltForms_instance(e,t,r,s,o,n,l)},XsltForms_instance.prototype.dispose=function(e){if(e&&1!==this.nbsubforms)return this.subforms[e]=null,void this.nbsubforms--;XsltForms_coreElement.prototype.dispose.call(this)},XsltForms_instance.prototype.construct=function(subform){var ser;if(!XsltForms_globals.ready||subform&&!subform.ready&&1===this.nbsubforms)if(this.src)if("local://"===this.src.substring(0,8))try{if("undefined"==typeof localStorage)throw new Error({message:"local:// not supported"});this.setDoc(window.localStorage.getItem(this.src.substr(8)))}catch(e){XsltForms_globals.error(this.element,"xforms-link-exception","Fatal error loading "+this.src,e.toString())}else if("opener://"===this.src.substr(0,9))try{ser=window.opener.XsltForms_globals.xmlrequest("get",this.src.substr(9)),this.setDoc(ser)}catch(e){XsltForms_globals.error(this.element,"xforms-link-exception","Fatal error loading "+this.src,e.toString())}else if("javascript:"===this.src.substr(0,11))try{eval("ser = ("+this.src.substr(11)+");"),this.setDoc(ser)}catch(e){XsltForms_globals.error(this.element,"xforms-link-exception","Error evaluating the following Javascript expression: "+this.src.substr(11))}else{var cross=!1;if(this.src.match(/^[a-zA-Z0-9+\.\-]+:\/\//)){var domain=/^([a-zA-Z0-9+\.\-]+:\/\/[^\/]*)/,sdom=domain.exec(this.src),ldom=domain.exec(document.location.href);cross=sdom[0]!==ldom[0]}if(cross&&"application/javascript"===this.mediatype){this.setDoc('<dummy xmlns=""/>'),XsltForms_browser.jsoninstobj=this;var scriptelt=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","script"):document.createElement("script");scriptelt.setAttribute("src",this.src+(-1===this.src.indexOf("?")?"?":"&")+"callback=XsltForms_browser.jsoninst"),scriptelt.setAttribute("id","jsoninst"),scriptelt.setAttribute("type","text/javascript");var body=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0];body.insertBefore(scriptelt,body.firstChild)}else try{var req=XsltForms_browser.openRequest("GET",this.src,!1);if(XsltForms_browser.debugConsole.write("Loading "+this.src),"application/zip"!==this.mediatype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==this.mediatype||!req.overrideMimeType?"text/csv"===this.mediatype?req.overrideMimeType("text/csv"):"text/json"!==this.mediatype&&"application/json"!==this.mediatype||req.overrideMimeType("application/json; charset=x-user-defined"):req.overrideMimeType("text/plain; charset=x-user-defined"),req.send(null),0!==req.status&&(req.status<200||req.status>=300))throw new Error({message:"Request error: "+req.status});this.setDocFromReq(req)}catch(e){XsltForms_globals.error(this.element,"xforms-link-exception","Fatal error loading "+this.src,e.toString())}}else this.setDoc(this.srcDoc)},XsltForms_instance.prototype.reset=function(){this.setDoc(this.oldDoc,!0)},XsltForms_instance.prototype.store=function(e){this.oldDoc&&!e&&(this.oldDoc=null),this.oldDoc=XsltForms_browser.saveDoc(this.doc,this.mediatype)},Fleur.DOMParser?XsltForms_instance.prototype.setDoc=function(e,t,r){var s=XsltForms_browser.getDocMeta(this.doc,"instance"),o=XsltForms_browser.getDocMeta(this.doc,"model");XsltForms_browser.loadDoc(this.doc,e,this.mediatype),XsltForms_browser.setDocMeta(this.doc,"instance",s),XsltForms_browser.setDocMeta(this.doc,"model",o),r||this.store(t),s===XsltForms_browser.idPf+"instance-config"&&(XsltForms_browser.config=this.doc.documentElement,XsltForms_globals.htmlversion=XsltForms_browser.i18n.get("html"))}:XsltForms_instance.prototype.setDoc=function(e,t,r){var s=XsltForms_browser.getDocMeta(this.doc,"instance"),o=XsltForms_browser.getDocMeta(this.doc,"model");XsltForms_browser.loadDoc(this.doc,e),XsltForms_browser.setDocMeta(this.doc,"instance",s),XsltForms_browser.setDocMeta(this.doc,"model",o),r||this.store(t),s===XsltForms_browser.idPf+"instance-config"&&(XsltForms_browser.config=this.doc.documentElement,XsltForms_globals.htmlversion=XsltForms_browser.i18n.get("html"))},Fleur.DOMParser?XsltForms_instance.prototype.setDocFromReq=function(e,t,r){var s=e.responseText;if(XsltForms_browser.isChrome&&"text/plain"===this.mediatype)switch(this.src.substr(this.src.indexOf("."))){case".xlsx":this.mediatype="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case".docx":this.mediatype="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case".csv":this.mediatype="text/csv"}this.mediatype=e.getResponseHeader("Content-Type")?e.getResponseHeader("Content-Type"):this.mediatype,this.setDoc(s,t,r)}:XsltForms_instance.prototype.setDocFromReq=function(req,isReset,preserveOld){var srcDoc=req.responseText,mediatype=req.getResponseHeader("Content-Type")?req.getResponseHeader("Content-Type"):this.mediatype,lines=mediatype.split(";"),i0,len;for(this.mediatype=lines[0],i0=1,len=lines.length;i0<len;i0++){var vals=lines[i0].split("=");switch(vals[0].replace(/^\s+/g,"").replace(/\s+$/g,"")){case"header":this.header="present"===vals[1].replace(/^\s+/g,"").replace(/\s+$/g,"");break;case"separator":this.separator=(decodeURI||unescape)(vals[1].replace(/^\s+/g,"").replace(/\s+$/g,""));break;case"charset":this.charset=vals[1].replace(/^\s+/g,"").replace(/\s+$/g,"")}}if(XsltForms_browser.isChrome&&"text/plain"===this.mediatype)switch(this.src.substr(this.src.indexOf("."))){case".xlsx":this.mediatype="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case".docx":this.mediatype="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case".csv":this.mediatype="text/csv"}var newmediatype=this.mediatype;switch("/xml"!==newmediatype.substr(newmediatype.length-4)&&"/xsl"!==newmediatype.substr(newmediatype.length-4)&&"+xml"!==newmediatype.substr(newmediatype.length-4)||(newmediatype="application/xml"),newmediatype){case"text/json":case"application/json":var json;eval("json = "+srcDoc),srcDoc=XsltForms_browser.json2xml("",json,!0,!1);break;case"text/csv":if(XsltForms_browser.isIE){var convertResponseBodyToText=function(e){if(!XsltForms_browser.byteMapping){for(var t={},r=0;r<256;r++)for(var s=0;s<256;s++)t[String.fromCharCode(r+256*s)]=String.fromCharCode(r)+String.fromCharCode(s);XsltForms_browser.byteMapping=t}var o=XsltForms_browser_BinaryToArray_ByteStr(e),n=XsltForms_browser_BinaryToArray_ByteStr_Last(e);return o.replace(/[\s\S]/g,function(e){return XsltForms_browser.byteMapping[e]})+n};srcDoc=XsltForms_browser.csv2xml(convertResponseBodyToText(req.responseBody),this.separator,this.header)}else srcDoc=XsltForms_browser.csv2xml(srcDoc,this.separator,this.header);break;case"text/vcard":srcDoc=XsltForms_browser.vcard2xcard(srcDoc);break;case"application/x-zip-compressed":case"application/zip":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":var arch;if(XsltForms_browser.isIE){var convertResponseBodyToTextb=function(e){if(!XsltForms_browser.byteMapping){for(var t={},r=0;r<256;r++)for(var s=0;s<256;s++)t[String.fromCharCode(r+256*s)]=String.fromCharCode(r)+String.fromCharCode(s);XsltForms_browser.byteMapping=t}var o=XsltForms_browser_BinaryToArray_ByteStr(e),n=XsltForms_browser_BinaryToArray_ByteStr_Last(e);return o.replace(/[\s\S]/g,function(e){return XsltForms_browser.byteMapping[e]})+n};arch=XsltForms_browser.zip2xml(convertResponseBodyToTextb(req.responseBody),this.mediatype,this.element.id,this.model.element.id)}else arch=XsltForms_browser.zip2xml(srcDoc,this.mediatype,this.element.id,this.model.element.id);srcDoc=arch.srcDoc,delete arch.srcDoc,this.archive=arch;break;case"application/xml":break;default:return void alert("Unsupported mediatype '"+this.mediatype+"' for instance #"+this.element.id)}this.setDoc(srcDoc,isReset,preserveOld)},XsltForms_instance.prototype.revalidate=function(){!this.readonly&&this.doc.documentElement&&this.validation_(this.doc.documentElement)},XsltForms_instance.prototype.validation_=function(e,t,r){t||(t=!1),r||(r=!1),this.validate_(e,t,r),t=XsltForms_browser.getBoolMeta(e,"readonly"),r=XsltForms_browser.getBoolMeta(e,"notrelevant");var s=e.attributes||[];if(s){for(var o=[],n=0,l=s.length;n<l;n++)"xsltforms_"!==s[n].nodeName.substr(0,10)&&"xmlns"!==s[n].nodeName.substr(0,5)&&(o[o.length]=s[n]);for(var a=0,i=o.length;a<i;a++)this.validation_(o[a],t,r)}if(e.childNodes)for(var m=0,u=e.childNodes.length;m<u;m++){var c=e.childNodes[m];c.nodeType===Fleur.Node.ELEMENT_NODE&&this.validation_(c,t,r)}},XsltForms_instance.prototype.validate_=function(e,t,r){var s=XsltForms_browser.getMeta(e,"bind"),o=XsltForms_globals.xmlValue(e),n=XsltForms_schema.getType(XsltForms_browser.getType(e)||"xsd_:string");if(s)for(var l=s.split(" "),a=!1,i=!1,m=0,u=l.length;m<u;m++){for(var c=XsltForms_collection[l[m]].xfElement,d=c.nodes,h=0,p=d.length;h<p&&d[h]!==e;h++);for(var X=0,f=c.depsNodes.length;X<f;X++)XsltForms_browser.rmValueMeta(c.depsNodes[X],"depfor",c.depsId);c.depsNodes.length=0;var g=new XsltForms_exprContext(this.subform,e,h,d,null,null,null,[],c.depsId);c.required&&this.setProperty_(e,"required",c.required.evaluate(g,e)),(r||!a||c.relevant)&&(this.setProperty_(e,"notrelevant",r||!(!c.relevant||c.relevant.evaluate(g,e))),a=a||c.relevant),(t||!i||c.readonly)&&(this.setProperty_(e,"readonly",t||(c.readonly?c.readonly.evaluate(g,e):!!c.calculate)),i=i||c.readonly),this.setProperty_(e,"invalid",!(XsltForms_browser.getBoolMeta(e,"notrelevant")||(!XsltForms_browser.getBoolMeta(e,"required")||o&&""!==o)&&(XsltForms_browser.getNil(e)?""===o:!n||n.validate(o)&&!XsltForms_browser.getBoolMeta(e,"unsafe"))&&(!c.constraint||c.constraint.evaluate(g,e))));var x=this;Object.entries(c.meta).forEach(function(t){var r=String(t[1].evaluate(g,e));XsltForms_browser.getMeta(e,"meta-"+t[0])!==r&&(XsltForms_browser.setMeta(e,"meta-"+t[0],r),x.model.addChange(e))}),XsltForms_browser.copyArray(g.depsNodes,c.depsNodes)}else this.setProperty_(e,"notrelevant",r),this.setProperty_(e,"readonly",t),this.setProperty_(e,"invalid",n&&(!n.validate(o)||XsltForms_browser.getBoolMeta(e,"unsafe")))},XsltForms_instance.prototype.setProperty_=function(e,t,r){XsltForms_browser.getBoolMeta(e,t)!==r&&(XsltForms_browser.setBoolMeta(e,t,r),this.model.addChange(e))},XsltForms_browser.json2xmlreg=new RegExp("^[A-Za-z_À-ÖØ-öø-ÿ][A-Za-z_À-ÖØ-öø-ÿ-.0-9·]*$"),XsltForms_browser.json2xml=function(e,t,r,s){var o="";"________"!==e&&(t instanceof Array||""===e||XsltForms_browser.json2xmlreg.test(e))||(o=' exml:fullname="'+XsltForms_browser.escape(e)+'"',e="________");var n=r?'<exml:anonymous xmlns:exml="http://www.agencexml.com/exml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:exsi="http://www.agencexml.com/exi" xmlns="">':"";if(t instanceof Array){if(s&&(n+='<exml:anonymous exsi:maxOccurs="unbounded">'),0===t.length)n+="<"+(""===e?"exml:anonymous":e)+o+' exsi:maxOccurs="unbounded" xsi:nil="true"/>';else for(var l=0,a=t.length;l<a;l++)n+=XsltForms_browser.json2xml(""===e?"exml:anonymous":e,t[l],!1,!0);s&&(n+="</exml:anonymous>")}else{var i="";switch(typeof t){case"string":i=' xsi:type="xsd:string"';break;case"number":i=' xsi:type="xsd:double"';break;case"boolean":i=' xsi:type="xsd:boolean"';break;case"object":t instanceof Date&&(i=' xsi:type="xsd:dateTime"')}if(""===e?r&&""!==i&&(n=n.substr(0,n.length-1)+i+">"):n+="<"+e+o+(s?' exsi:maxOccurs="unbounded"':"")+i+">","object"!=typeof t||t instanceof Date)t instanceof Date?(n+=t.getFullYear()+"-",n+=(t.getMonth()<9?"0":"")+(t.getMonth()+1)+"-",n+=(t.getDate()<10?"0":"")+t.getDate()+"T",n+=(t.getHours()<10?"0":"")+t.getHours()+":",n+=(t.getMinutes()<10?"0":"")+t.getMinutes()+":",n+=(t.getSeconds()<10?"0":"")+t.getSeconds()+"Z"):n+=XsltForms_browser.escape(t);else for(var m in t)t.hasOwnProperty(m)&&(n+=XsltForms_browser.json2xml(m,t[m],!1,!1));n+=""===e?"":"</"+e+">"}return n+=r?"</exml:anonymous>":""},XsltForms_browser.node2json=function(e,t){var r,s,o,n,l,a,i,m,u="";if(e.nodeType!==Fleur.Node.ELEMENT_NODE)return"";if(n=e.localName?e.localName:e.baseName,e.getAttributeNS?(r=e.getAttributeNS("http://www.w3.org/2001/XMLSchema-instance","type"),s="unbounded"===e.getAttributeNS("http://www.agencexml.com/exi","maxOccurs"),"________"===n&&(n=e.getAttributeNS("http://www.agencexml.com/exml","fullname"))):(r=(o=e.selectSingleNode("@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']"))?o.value:"",s=!!(o=e.selectSingleNode("@*[local-name()='maxOccurs' and namespace-uri()='http://www.agencexml.com/exi']"))&&"unbounded"===o.value,"________"===n&&(n=(o=e.selectSingleNode("@*[local-name()='fullname' and namespace-uri()='http://www.agencexml.com/exml']"))?o.value:"")),u="","anonymous"===n&&"http://www.agencexml.com/exml"===e.namespaceURI||(u+=n+":"),s){for(u="[",i=0,l=0,a=e.childNodes.length;l<a;l++)e.childNodes[l].nodeType===Fleur.Node.ELEMENT_NODE&&(i=l);for(l=0;l<=i;l++)u+=XsltForms_browser.node2json(e.childNodes[l],l===i?"":",");return u+"]"+t}switch(m=e.text||e.textContent,r){case"xsd:string":return u+'"'+XsltForms_browser.escapeJS(m)+'"'+t;case"xsd:double":case"xsd:boolean":return u+m+t;case"xsd:dateTime":return u+'new Date("'+m+'")'+t;default:for(u+="{",i=0,l=0,a=e.childNodes.length;l<a;l++)e.childNodes[l].nodeType===Fleur.Node.ELEMENT_NODE&&(i=l);for(l=0;l<=i;l++)u+=XsltForms_browser.node2json(e.childNodes[l],l===i?"":",");return u+"}"+t}},XsltForms_browser.xml2json=function(e){var t=XsltForms_browser.createXMLDocument(e);return XsltForms_browser.node2json(t.documentElement,"")};var jsoninst=function(e){XsltForms_browser.jsoninstobj.submission.pending=!1,XsltForms_browser.dialog.hide("xsltforms-status-panel",!1),XsltForms_browser.jsoninstobj.instance.setDoc(XsltForms_browser.json2xml("",e,!0,!1)),XsltForms_globals.addChange(XsltForms_browser.jsoninstobj.instance.model),XsltForms_xmlevents.dispatch(XsltForms_browser.jsoninstobj.instance.model,"xforms-rebuild"),XsltForms_globals.refresh(),document.body.removeChild(document.getElementById("jsoninst"))};function XsltForms_bind(e,t){var r=t.parentNode.xfElement,s=r.model||r,o=t.getAttribute("xf-type");"xsd:ID"===o&&(XsltForms_globals.IDstr=t.getAttribute("xf-ref").split("/").pop()),this.init(e,t),this.model=s,this.type=o?XsltForms_schema.getType(o):null,t.hasAttribute("xf-ref")||t.setAttribute("xf-ref","."),this.nodeset=t.getAttribute("xf-ref"),this.readonly=t.hasAttribute("xf-readonly")?new XsltForms_mipbinding(e,t,"xf-readonly","xsd:boolean",s):null,this.required=t.hasAttribute("xf-required")?new XsltForms_mipbinding(e,t,"xf-required","xsd:boolean",s):null,this.relevant=t.hasAttribute("xf-relevant")?new XsltForms_mipbinding(e,t,"xf-relevant","xsd:boolean",s):null,this.calculate=t.hasAttribute("xf-calculate")?new XsltForms_mipbinding(e,t,"xf-calculate","xsd:string",s):null,this.constraint=t.hasAttribute("xf-constraint")?new XsltForms_mipbinding(e,t,"xf-constraint","xsd:boolean",s):null,this.changed=t.hasAttribute("xf-changed")?new XsltForms_mipbinding(e,t,"xf-changed","xsd:string",s):null,this.meta={};var n=this.meta;Array.prototype.slice.call(t.attributes).forEach(function(r){r.nodeName.startsWith("meta-")&&(n[r.nodeName.substr(5)]=new XsltForms_mipbinding(e,t,r.nodeName,"xsd:anyAtomicType",s))}),this.depsNodes=[],this.depsElements=[],this.nodes=[],this.binds=[],this.binding=new XsltForms_binding(e,t),r.addBind(this),e.binds.push(this),this.depsId=XsltForms_element_depsId++}function XsltForms_submission(e,t){this.init(e,t),this.model=t.parentNode.xfElement,this.model.defaultSubmission||(this.model.defaultSubmission=this),this.replace=t.getAttribute("xf-replace")||"all",this.targetref=t.hasAttribute("xf-targetref")?new XsltForms_binding(e,t,"xf-targetref"):null,this.version=t.getAttribute("xf-version"),this.serialization=t.getAttribute("xf-serialization"),this.indent=t.getAttribute("xf-indent"),this.validate=t.hasAttribute("xf-validate")?"false"!==t.getAttribute("xf-validate"):"none"!==this.serialization,this.relevant=t.hasAttribute("xf-relevant")?"false"!==t.getAttribute("xf-relevant"):"none"!==this.serialization,this.synchr="synchronous"===t.getAttribute("xf-mode"),this.show=t.getAttribute("xf-show");var r=t.getAttribute("xf-mediatype");if(r){var s=r.split(";");this.mediatype=s[0];for(var o=1,n=s.length;o<n;o++){var l=s[o].split("=");switch(l[0].replace(/^\s+/g,"").replace(/\s+$/g,"")){case"action":this.soapAction=l[1].replace(/^\s+/g,"").replace(/\s+$/g,"");break;case"charset":this.charset=l[1].replace(/^\s+/g,"").replace(/\s+$/g,"")}}"application/zip"!==this.mediatype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==this.mediatype||(this.charset="x-user-defined-binary")}else this.mediatype="application/xml";this.encoding=t.getAttribute("xf-encoding")||"UTF-8",this.omitXmlDeclaration=t.getAttribute("xf-omitXmlDeclaration"),this.cdataSectionElements=t.getAttribute("xf-cdataSectionElements"),this.instance=t.getAttribute("xf-instance"),this.separator=t.getAttribute("xf-separator")||"&",this.includenamespaceprefixes=t.getAttribute("xf-includenamespaceprefixes");var a,i,m=[];Array.prototype.slice.call(t.children).forEach(function(t){switch(t.localName.toLowerCase()){case"xforms-resource":a=t;break;case"xforms-method":i=t;break;case"xforms-header":var r,s=[];Array.prototype.slice.call(t.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-name":r=e;break;case"xforms-value":s.push(e)}}),m.push({nodeset:t.hasAttribute("xf-ref")?new XsltForms_binding(e,t):null,name:r?r.hasAttribute("xf-value")?new XsltForms_binding(e,r):r.textContent:t.getAttribute("xf-name"),combine:t.getAttribute("xf-combine")||"append",values:s.map(function(t){return t.hasAttribute("xf-value")?new XsltForms_binding(e,t):t.textContent})})}}),this.headers=m,this.action=a?a.hasAttribute("xf-value")?new XsltForms_binding(e,a):a.textContent:t.hasAttribute("xf-resource")?t.getAttribute("xf-resource"):t.getAttribute("xf-action"),this.method=i?i.hasAttribute("xf-value")?new XsltForms_binding(e,i):i.textContent:t.getAttribute("xf-method"),t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")||t.hasAttribute("xf-value")?(this.binding=new XsltForms_binding(e,t),this.eval_=function(){var e=this.binding.bind_evaluate();return"string"==typeof e?e:e.head()}):this.eval_=function(){return this.model.getInstanceDocument()},this.pending=!1}function XsltForms_itext(e,t){t.parentNode.xfElement.itext={defaultlang:t.children[0].getAttribute("xf-lang")}}function XsltForms_translation(e,t){this.translation=t.parentNode.parentNode.xfElement.itext[t.getAttribute("xf-lang")]={}}function XsltForms_text(e,t){t.parentNode.xfElement.translation[t.id]=t.children[0].textContent}function XsltForms_timer(e,t,r){document.getElementById(t)||(this.init(e,t,null,"xforms-timer"),this.running=!1,this.time=r)}function XsltForms_confirm(e,t){this.subform=e,this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(this.subform,t):null,this.id=t.id,this.init(t)}function XsltForms_setproperty(e,t){this.subform=e,this.name=t.getAttribute("xf-pname"),this.value=t.hasAttribute("xf-value")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-value")):null,this.literal=t.textContent||"",this.init(t)}function XsltForms_abstractAction(){}function XsltForms_action(e,t){this.subform=e,this.init(t)}function XsltForms_delete(e,t){this.subform=e,this.binding=new XsltForms_binding(this.subform,t),this.at=t.hasAttribute("xf-at")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-at")):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_dispatch(e,t){switch(t.localName.toLowerCase()){case"xforms-dispatch":var r,s,o,n={};Array.prototype.slice.call(t.children).forEach(function(t){switch(t.localName.toLowerCase()){case"xforms-targetid":r=t;break;case"xforms-name":s=t;break;case"xforms-delay":o=t;break;case"xforms-property":n[t.getAttribute("xf-name")]=t.hasAttribute("xf-value")?new XsltForms_binding(e,t):t.textContent}}),this.name=s?s.hasAttribute("xf-value")?new XsltForms_binding(e,s):s.textContent:t.getAttribute("xf-name"),this.target=r?r.hasAttribute("xf-value")?new XsltForms_binding(e,r):r.textContent:t.getAttribute("xf-targetid"),this.delay=o?o.hasAttribute("xf-value")?new XsltForms_binding(e,o):o.textContent:t.getAttribute("xf-delay"),this.properties=n;break;case"xforms-hide":this.name="xforms-dialog-close",this.target=t.getAttribute("xf-dialog");break;case"xforms-rebuild":case"xforms-recalculate":case"xforms-refresh":case"xforms-reset":case"xforms-revalidate":this.name=t.localName.toLowerCase(),this.target=t.getAttribute("xf-model");break;case"xforms-send":this.name="xforms-submit",this.target=t.getAttribute("xf-submission");break;case"xforms-setfocus":var l;Array.prototype.slice.call(t.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-control":l=e}}),this.name="xforms-focus",this.target=l?l.hasAttribute("xf-value")?new XsltForms_binding(e,l):l.textContent:t.getAttribute("xf-control");break;case"xforms-show":this.name="xforms-dialog-open",this.target=t.getAttribute("xf-dialog")}this.subform=e,this.init(t)}function XsltForms_insert(e,t){this.subform=e,this.binding=new XsltForms_binding(this.subform,t),this.origin=t.hasAttribute("xf-origin")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-origin")):null,this.at=t.hasAttribute("xf-at")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-at")):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.position=t.getAttribute("xf-position")||"after",this.init(t)}function XsltForms_load(e,t){this.subform=e,this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(this.subform,t):null,t.hasAttribute("xf-resource")?this.resource=t.getAttribute("xf-resource"):0!==t.children.length&&"XFORMS-RESOURCE"===t.children[0].nodeName.toUpperCase()&&(t.children[0].hasAttribute("xf-value")?this.resource=new XsltForms_binding(this.subform,t.children[0]):this.resource=t.children[0].textContent),this.show=t.getAttribute("xf-show"),this.targetid=t.getAttribute("xf-target")||t.getAttribute("xf-targetid")||"_self",this.init(t)}function XsltForms_message(e,t){this.subform=e,this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(this.subform,t):null,this.level=t.getAttribute("xf-level"),this.init(t)}function XsltForms_script(e,t){this.subform=e,this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(this.subform,t):null,this.stype=t.getAttribute("xf-type"),this.script=t.textContent,this.init(t)}function XsltForms_setindex(e,t){this.subform=e,this.repeat=t.getAttribute("xf-repeat"),this.index=t.hasAttribute("xf-index")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-index")):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_setnode(e,t){this.subform=e,this.binding=new XsltForms_binding(this.subform,t),this.inout=t.hasAttribute("xf-inner"),this.value=this.inout?XsltForms_xpath.create(this.subform,t.getAttribute("xf-inner")):XsltForms_xpath.create(this.subform,t.getAttribute("xf-outer")),this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_setselection(e,t){this.subform=e,this.control=t.getAttribute("xf-control"),this.value=t.hasAttribute("xf-value")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-value")):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_setvalue(e,t){this.subform=e,this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(this.subform,t):null,this.value=t.hasAttribute("xf-value")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-value")):null,this.literal=t.textContent||"",this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_split(e,t){this.subform=e,this.binding=new XsltForms_binding(this.subform,t),this.separator=t.getAttribute("xf-separator");var r=t.getAttribute("xf-left-trim");this.leftTrim=r&&""!==r?new RegExp(r):null;var s=t.getAttribute("xf-right-trim");this.rightTrim=s&&""!==s?new RegExp(s):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_toggle(e,t){var r;this.subform=e,Array.prototype.slice.call(t.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-case":r=e}}),this.caseId=r?r.hasAttribute("xf-value")?new XsltForms_binding(this.subform,r):r.textContent:t.getAttribute("xf-case"),this.init(t)}function XsltForms_unload(e,t){this.subform=e,this.targetid=t.getAttribute("xf-targetid"),this.init(t)}function XsltForms_wrap(e,t){this.subform=e,this.control=t.getAttribute("xf-control"),this.prevalue=t.hasAttribute("xf-pre")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-pre")):null,this.postvalue=t.hasAttribute("xf-post")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-post")):null,this.context=t.hasAttribute("xf-context")?XsltForms_xpath.create(this.subform,t.getAttribute("xf-context")):null,this.init(t)}function XsltForms_element(){}XsltForms_browser.vcard2xcard_data={state:0,version:"4.0",reg_date:/^(\d{8}|\d{4}-\d\d|--\d\d(\d\d)?|---\d\d)$/,reg_time:/^(\d\d(\d\d(\d\d)?)?|-\d\d(\d\d?)|--\d\d)(Z|[+\-]\d\d(\d\d)?)?$/,reg_date_time:/^(\d{8}|--\d{4}|---\d\d)T\d\d(\d\d(\d\d)?)?(Z|[+\-]\d\d(\d\d)?)?$/,reg_uri:/^(([^:\/?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#([^\:#\[\]\@\!\$\&\\'\(\)\*\+\,\;\=]*))?$/,reg_utc_offset:/^[+\-]\d\d(\d\d)?$/},XsltForms_browser.vcard2xcard_escape=function(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/\\;/gm,";")},XsltForms_browser.vcard2xcard_param={PREF:{fparam:function(e){return"<integer>"+e+"</integer>"}},TYPE:{fparam:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}}},XsltForms_browser.vcard2xcard_prop={BEGIN:{state:0,fvalue:function(e){return XsltForms_browser.vcard2xcard_data.state=1,"VCARD"===e.toUpperCase()?"<vcard>":"<'Invalid directive: BEGIN:"+e+"'>"}},END:{state:1,fvalue:function(e){return XsltForms_browser.vcard2xcard_data.state=0,"VCARD"===e.toUpperCase()?"</vcard>":"<'Invalid directive: END:"+e+"'>"}},SOURCE:{state:1,tag:"source",fvalue:function(e){return"<uri>"+e+"</uri>"}},KIND:{state:1,tag:"kind",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},XML:{state:1,fvalue:function(e){return e}},FN:{state:1,tag:"fn",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},N:{state:1,tag:"n",fvalue:function(e){var t=e.split(";");return"<surname>"+XsltForms_browser.vcard2xcard_escape(t[0])+"</surname><given>"+XsltForms_browser.vcard2xcard_escape(t[1])+"</given><additional>"+XsltForms_browser.vcard2xcard_escape(t[2])+"</additional><prefix>"+XsltForms_browser.vcard2xcard_escape(t[3])+"</prefix><suffix>"+XsltForms_browser.vcard2xcard_escape(t[4])+"</suffix>"}},NICKNAME:{state:1,tag:"nickname",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},PHOTO:{state:1,tag:"photo",fvalue:function(e){return"<uri>"+e+"</uri>"}},BDAY:{state:1,tag:"bday",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_date_time.test(e)?"<date-time>"+e+"</date-time>":XsltForms_browser.vcard2xcard_data.reg_date.test(e)?"<date>"+e+"</date>":XsltForms_browser.vcard2xcard_data.reg_time.test(e)?"<time>"+e+"</time>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},ANNIVERSARY:{state:1,tag:"anniversary",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_date_time.test(e)?"<date-time>"+e+"</date-time>":XsltForms_browser.vcard2xcard_data.reg_date.test(e)?"<date>"+e+"</date>":XsltForms_browser.vcard2xcard_data.reg_time.test(e)?"<time>"+e+"</time>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},GENDER:{state:1,tag:"gender",fvalue:function(e){var t=e.split(";");return"<sex>"+t[0]+"</sex>"+(-1!==e.indexOf(";")?"<identity>"+XsltForms_browser.vcard2xcard_escape(t[1])+"</identity>":"")}},ADR:{state:1,tag:"adr",fvalue:function(e){var t=e.split(";");return"<pobox>"+XsltForms_browser.vcard2xcard_escape(t[0])+"</pobox><ext>"+XsltForms_browser.vcard2xcard_escape(t[1])+"</ext><street>"+XsltForms_browser.vcard2xcard_escape(t[2])+"</street><locality>"+XsltForms_browser.vcard2xcard_escape(t[3])+"</locality><region>"+XsltForms_browser.vcard2xcard_escape(t[4])+"</region><code>"+XsltForms_browser.vcard2xcard_escape(t[5])+"</code><country>"+XsltForms_browser.vcard2xcard_escape(t[6])+"</country>"}},TEL:{state:1,tag:"tel",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_uri.test(e)?"<uri>"+e+"</uri>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},EMAIL:{state:1,tag:"email",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},IMPP:{state:1,tag:"impp",fvalue:function(e){return"<uri>"+e+"</uri>"}},LANG:{state:1,tag:"lang",fvalue:function(e){return"<language-tag>"+e+"</language-tag>"}},TZ:{state:1,tag:"tz",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_uri.test(e)?"<uri>"+e+"</uri>":XsltForms_browser.vcard2xcard_data.reg_utc_offset.test(e)?"<utc-offset>"+e+"</utc-offset>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},GEO:{state:1,tag:"geo",fvalue:function(e){return"<uri>"+e+"</uri>"}},TITLE:{state:1,tag:"title",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},ROLE:{state:1,tag:"role",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},LOGO:{state:1,tag:"logo",fvalue:function(e){return"<uri>"+e+"</uri>"}},ORG:{state:1,tag:"org",fvalue:function(e){for(var t=e.split(";"),r="",s=0,o=t.length;s<o;s++)r+="<text>"+XsltForms_browser.vcard2xcard_escape(t[s])+"</text>";return r}},MEMBER:{state:1,tag:"member",fvalue:function(e){return"<uri>"+e+"</uri>"}},RELATED:{state:1,tag:"related",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_uri.test(e)?"<uri>"+e+"</uri>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},CATEGORIES:{state:1,tag:"categories",fvalue:function(e){for(var t=e.split(";"),r="",s=0,o=t.length;s<o;s++)r+="<text>"+XsltForms_browser.vcard2xcard_escape(t[s])+"</text>";return r}},NOTE:{state:1,tag:"note",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},"X-LOTUS-BRIEFCASE":{state:1,tag:"x-lotus-briefcase",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},PRODID:{state:1,tag:"prodid",fvalue:function(e){return"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},REV:{state:1,tag:"rev",fvalue:function(e){return"<timestamp>"+e+"</timestamp>"}},SOUND:{state:1,tag:"sound",fvalue:function(e){return"<uri>"+e+"</uri>"}},UID:{state:1,tag:"uid",fvalue:function(e){return"<uri>"+e+"</uri>"}},CLIENTPIDMAP:{state:1,tag:"clientpidmap",fvalue:function(e){var t=e.split(";");return"<sourceid>"+t[0]+"</sourceid><value-uri>"+t[1]+"</value-uri>"}},URL:{state:1,tag:"url",fvalue:function(e){return"<uri>"+e+"</uri>"}},VERSION:{state:1,fvalue:function(e){return XsltForms_browser.vcard2xcard_data.version=e,""}},KEY:{state:1,tag:"key",fvalue:function(e){return XsltForms_browser.vcard2xcard_data.reg_uri.test(e)?"<uri>"+e+"</uri>":"<text>"+XsltForms_browser.vcard2xcard_escape(e)+"</text>"}},FBURL:{state:1,tag:"fburl",fvalue:function(e){return"<uri>"+e+"</uri>"}},CALADRURI:{state:1,tag:"caladruri",fvalue:function(e){return"<uri>"+e+"</uri>"}},CALURI:{state:1,tag:"caluri",fvalue:function(e){return"<uri>"+e+"</uri>"}}},XsltForms_browser.vcard2xcard=function(e){for(var t='<vcards xmlns="urn:ietf:params:xml:ns:vcard-4.0">',r=e.replace(/(\r\n|\n|\r) /gm,"").replace(/^\s+/,"").replace(/\s+$/,"").split("\n"),s=0,o=r.length;s<o;s++){var n=r[s].indexOf(":"),l=r[s].substring(0,n),a=r[s].substring(n+1),i=l.split(";"),m=XsltForms_browser.vcard2xcard_prop[i[0]];if(m&&m.state===XsltForms_browser.vcard2xcard_data.state){var u=a.replace(/\\n/gm,"\n").replace(/\\,/gm,",");if(m.tag&&(t+="<"+m.tag+">"),i.length>1){t+="<parameters>",i.shift();for(var c=0,d=i.length;c<d;){var h=i[c].split("="),p=h[0],X=XsltForms_browser.vcard2xcard_param[p];if(X){for(t+="<"+p.toLowerCase()+">";h[0]===p&&(t+=X.fparam(h[1]),++c<d);)h=i[c].split("=");t+="</"+p.toLowerCase()+">"}else c++}t+="</parameters>"}t+=m.fvalue(u),m.tag&&(t+="</"+m.tag+">")}}return t+"</vcards>"},XsltForms_browser.xml2csv=function(e,t){for(var r=XsltForms_browser.createXMLDocument(e),s=r.documentElement.firstChild;s&&s.nodeType!==Fleur.Node.ELEMENT_NODE;)s=s.nextSibling;var o=s.cloneNode(!0);r.documentElement.insertBefore(o,s);for(var n=o,l="",a=(t=t||",").split(" "),i=a[0],m=a[1];n;){if(n.nodeType===Fleur.Node.ELEMENT_NODE){for(var u=n.firstChild,c="";u;){if(u.nodeType===Fleur.Node.ELEMENT_NODE){var d=n===o?u.getAttribute("fullname")||u.localName:void 0!==u.text?u.text:u.textContent;-1!==d.indexOf("\n")||-1!==d.indexOf(i)?d='"'+d.replace(/"/gm,'""')+'"':m&&d.match(/^[\-+]?([0-9]+(\.[0-9]*)?|\.[0-9]+)$/)&&(d=d.replace(/\./,m)),c+=i+d}u=u.nextSibling}l+=c.substr(1)+"\n"}n=n.nextSibling}return l},XsltForms_browser.csv2xml=function(e,t,r){var s='<exml:anonymous xmlns:exml="http://www.agencexml.com/exml" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:exsi="http://www.agencexml.com/exi" xmlns="">';"\n"!==(e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).substr(e.length-1,1)&&(e+="\n");for(var o=[],n=r,l=0,a="",i="",m=0,u=e.length;m<u;){var c="";if('"'===e.substr(m,1)){m++;do{if('"'!==e.substr(m,1))c+=e.substr(m,1),m++;else{if('""'!==e.substr(m,2)){m++;break}c+='"',m+=2}}while(m<u)}else for(;e.substr(m,t.length)!==t&&"\n"!==e.substr(m,1);)c+=e.substr(m,1),m++;n?o.push(c):(a+=c,i+="<"+(r?o[l]:"exml:anonymous")+">"+XsltForms_browser.escape(c)+"</"+(r?o[l]:"exml:anonymous")+">"),"\n"===e.substr(m,1)?(n||""===a||(s+="<exml:anonymous>"+i+"</exml:anonymous>"),n=!1,l=0,i="",a=""):l++,m++}return s+"</exml:anonymous>"},XsltForms_browser.xsltsharedsrc='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ss="http://schemas.openxmlformats.org/spreadsheetml/2006/main" version="1.0">',XsltForms_browser.xsltsharedsrc+='\t<xsl:output method="text"/>',XsltForms_browser.xsltsharedsrc+='\t<xsl:template match="ss:si">',XsltForms_browser.xsltsharedsrc+="\t\t<xsl:value-of select=\"concat('|',position() - 1,':',ss:t)\"/>",XsltForms_browser.xsltsharedsrc+="\t</xsl:template>",XsltForms_browser.xsltsharedsrc+="</xsl:stylesheet>",XsltForms_browser.xsltinlinesrc='<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ss="http://schemas.openxmlformats.org/spreadsheetml/2006/main" version="1.0">',XsltForms_browser.xsltinlinesrc+='\t<xsl:output method="xml" omit-xml-declaration="yes"/>',XsltForms_browser.xsltinlinesrc+='\t<xsl:param name="shared"/>',XsltForms_browser.xsltinlinesrc+='\t<xsl:template match="ss:c[@t=\'s\']" priority="1">',XsltForms_browser.xsltinlinesrc+="\t\t<xsl:copy>",XsltForms_browser.xsltinlinesrc+='\t\t\t<xsl:attribute name="t">inlineStr</xsl:attribute>',XsltForms_browser.xsltinlinesrc+='\t\t\t<xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltinlinesrc+="\t\t\t<ss:is><ss:t><xsl:value-of select=\"substring-before(substring-after($shared,concat('|',ss:v,':')),'|')\"/></ss:t></ss:is>",XsltForms_browser.xsltinlinesrc+="\t\t</xsl:copy>",XsltForms_browser.xsltinlinesrc+="\t</xsl:template>",XsltForms_browser.xsltinlinesrc+='\t<xsl:template match="@t[parent::ss:c and . = \'s\']" priority="1"/>',XsltForms_browser.xsltinlinesrc+='\t<xsl:template match="ss:v[parent::ss:c/@t = \'s\']" priority="1"/>',XsltForms_browser.xsltinlinesrc+='\t<xsl:template match="@*|node()" priority="0">',XsltForms_browser.xsltinlinesrc+="\t\t<xsl:copy>",XsltForms_browser.xsltinlinesrc+='\t\t\t<xsl:apply-templates select="@*|node()"/>',XsltForms_browser.xsltinlinesrc+="\t\t</xsl:copy>",XsltForms_browser.xsltinlinesrc+="\t</xsl:template>",XsltForms_browser.xsltinlinesrc+="</xsl:stylesheet>",XsltForms_browser.zip2xml=function(e,t,r,s){var o,n={},l='<exml:archive xmlns:exml="http://www.agencexml.com/exml">',a=e.lastIndexOf("PK")+16,i=function(e,t){return(255&e.charCodeAt(t+1))<<8|255&e.charCodeAt(t)},m=function(e,t){return(((255&e.charCodeAt(t+3))<<8|255&e.charCodeAt(t+2))<<8|255&e.charCodeAt(t+1))<<8|255&e.charCodeAt(t)};for(a=m(e,a);80===e.charCodeAt(a)&&75===e.charCodeAt(a+1)&&1===e.charCodeAt(a+2)&&2===e.charCodeAt(a+3);){(o={}).versionMadeBy=i(e,a+=4),a+=2,o.versionNeeded=i(e,a),a+=2,o.bitFlag=i(e,a),a+=2,o.compressionMethod=i(e,a),a+=2,o.date=m(e,a),a+=4,o.crc32=m(e,a),a+=4,o.compressedSize=m(e,a),a+=4,o.uncompressedSize=m(e,a),a+=4,o.fileNameLength=i(e,a),a+=2,o.extraFieldsLength=i(e,a),a+=2,o.fileCommentLength=i(e,a),a+=2,o.diskNumber=i(e,a),a+=2,o.internalFileAttributes=i(e,a),a+=2,o.externalFileAttributes=m(e,a),a+=4,o.localHeaderOffset=m(e,a),a+=4;var u=e.substr(a,o.fileNameLength);a+=o.fileNameLength,o.extraFields=e.substr(a,o.extraFieldsLength),a+=o.extraFieldsLength,o.fileComment=e.substr(a,o.fileCommentLength),a+=o.fileCommentLength;var c=o.localHeaderOffset+28;o.lextraFieldsLength=i(e,c),c+=2+o.fileNameLength,o.lextraFields=e.substr(c,o.lextraFieldsLength),c+=o.lextraFieldsLength,o.compressedFileData=e.substr(c,o.compressedSize),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==t||".xml"!==u.substr(u.length-4)&&".rels"!==u.substr(u.length-5)||(o.doc=XsltForms_browser.createXMLDocument("<dummy/>"),XsltForms_browser.loadDoc(o.doc,XsltForms_browser.utf8decode(zip_inflate(o.compressedFileData))),XsltForms_browser.setDocMeta(o.doc,"instance",r),XsltForms_browser.setDocMeta(o.doc,"model",s)),l+='<exml:file name="'+u+'"/>',n[u]=o}if(l+="</exml:archive>","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t&&n.hasOwnProperty("xl/sharedStrings.xml")){var d=XsltForms_browser.transformText(XsltForms_browser.saveDoc(n["xl/sharedStrings.xml"].doc,"application/xml"),XsltForms_browser.xsltsharedsrc,!0)+"|";for(var h in n)if(n.hasOwnProperty(h)&&(o=n[h]).doc&&"worksheet"===(o.doc.documentElement.localName?o.doc.documentElement.localName:o.doc.documentElement.baseName)){var p=XsltForms_browser.transformText(XsltForms_browser.saveDoc(o.doc,"application/xml"),XsltForms_browser.xsltinlinesrc,!0,"shared",d);XsltForms_browser.loadDoc(o.doc,p),XsltForms_browser.setDocMeta(o.doc,"instance",r),XsltForms_browser.setDocMeta(o.doc,"model",s)}}return n.srcDoc=l,n},XsltForms_browser.xml2zip=function(e,t){var r,s,o="",n=0,l=function(e){return String.fromCharCode(255&e)+String.fromCharCode(e>>>8&255)},a=function(e){return String.fromCharCode(255&e)+String.fromCharCode(e>>>8&255)+String.fromCharCode(e>>>16&255)+String.fromCharCode(e>>>24&255)};for(r in e)if(e.hasOwnProperty(r)){if((s=e[r]).localHeaderOffset=o.length,s.doc){var i=XsltForms_browser.utf8encode(XsltForms_browser.saveDoc(s.doc,"application/xml"));if(0===t.indexOf("application/vnd.openxmlformats-officedocument."))for(var m=i.indexOf(' xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"'),u=s.doc.documentElement.attributes,c=0,d=u.length;c<d;c++)if("Ignorable"===u[c].localName&&"http://schemas.openxmlformats.org/markup-compatibility/2006"===u[c].namespaceURI&&(-1===m||m>i.indexOf("Ignorable"))){i=i.substr(0,i.indexOf(" "))+' xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"'+i.substr(i.indexOf(" "));break}i='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n'+i,s.crc32=XsltForms_browser.crc32(i),s.uncompressedSize=i.length,s.compressedFileData=zip_deflate(i),s.compressedSize=s.compressedFileData.length}o+="PK",o+=l(s.versionNeeded),o+=l(s.bitFlag),o+=l(s.compressionMethod),o+=a(s.date),o+=a(s.crc32),o+=a(s.compressedSize),o+=a(s.uncompressedSize),o+=l(s.fileNameLength),o+=l(s.lextraFieldsLength),o+=r,o+=s.lextraFields,o+=s.compressedFileData,n++}var h=o.length;for(r in e)e.hasOwnProperty(r)&&(o+="PK",o+=l((s=e[r]).versionMadeBy),o+=l(s.versionNeeded),o+=l(s.bitFlag),o+=l(s.compressionMethod),o+=a(s.date),o+=a(s.crc32),o+=a(s.compressedSize),o+=a(s.uncompressedSize),o+=l(s.fileNameLength),o+=l(s.extraFieldsLength),o+=l(s.fileCommentLength),o+=l(s.diskNumber),o+=l(s.internalFileAttributes),o+=a(s.externalFileAttributes),o+=a(s.localHeaderOffset),o+=r,o+=s.extraFields,o+=s.fileComment);var p=o.length;o+="PK",o+=l(0),o+=l(0),o+=l(n),o+=l(n),o+=a(p-h),o+=a(h);var X="generated by XSLTForms - http://www.agencexml.com";o+=l(X.length);for(var f=[],g=0,x=(o+=X).length;g<x;g++)f.push(255&o.charCodeAt(g));try{return new Uint8Array(f).buffer}catch(e){return XsltForms_browser.StringToBinary(o)}},new XsltForms_class("XsltForms_bind","HTMLElement","xforms-bind"),XsltForms_bind.prototype=new XsltForms_coreElement,XsltForms_bind.prototype.addBind=function(e){this.binds.push(e)},XsltForms_bind.prototype.clear=function(){this.depsNodes.length=0,this.depsElements.length=0,this.nodes.length=0,XsltForms_browser.forEach(this.binds,"clear")},XsltForms_bind.prototype.refresh=function(e,t){if(!t){for(var r=0,s=this.depsNodes.length;r<s;r++)XsltForms_browser.rmValueMeta(this.depsNodes[r],"depfor",this.depsId);this.clear()}e=e||(this.model&&this.model.getInstanceDocument()?this.model.getInstanceDocument().documentElement:null),XsltForms_browser.copyArray(this.binding.bind_evaluate(this.subform,e,{},this.depsNodes,this.depsId,this.depsElements).toArray(),this.nodes);for(var o=this.element,n=0,l=this.nodes.length;n<l;n++){var a=this.nodes[n],i=XsltForms_browser.getMeta(a,"bind");if(i)-1===(" "+i+" ").indexOf(" "+this.element.xfIndex+" ")&&XsltForms_browser.setMeta(a,"bind",i+" "+this.element.xfIndex);else XsltForms_browser.setMeta(a,"bind",String(this.element.xfIndex));if(this.type)if(XsltForms_browser.getMeta(a,"schemaType"))XsltForms_globals.error(o,"xforms-binding-exception","Type especified in xsi:type attribute");else{var m=this.type.name,u=this.type.nsuri,c=Fleur.XPathNSResolver_default.uri.lastIndexOf(u);-1!==c&&(m=Fleur.XPathNSResolver_default.pf[c]+":"+m),XsltForms_browser.setType(a,m)}for(var d=0,h=o.children.length;d<h;d++)o.children[d].xfElement&&o.children[d].xfElement.refresh&&o.children[d].xfElement.refresh(a,n)}},XsltForms_bind.prototype.recalculate=function(){var e=this.element;if(this.calculate)for(var t=0,r=this.nodes.length;t<r;t++){var s=this.nodes[t],o=new XsltForms_exprContext(this.subform,s,t+1,this.nodes),n=XsltForms_globals.stringValue(this.calculate.evaluate(o,s));n=XsltForms_schema.getType(XsltForms_browser.getType(s)||"xsd_:string").normalize(n),XsltForms_browser.setValue(s,n),this.model.addChange(s),XsltForms_browser.debugConsole.write("Calculate "+s.nodeName+" "+n)}for(var l=0,a=e.children.length;l<a;l++)e.children[l].xfElement&&e.children[l].xfElement.recalculate()},XsltForms_bind.prototype.propagate=function(){var e=this.element;if(this.changed)for(var t=0,r=this.nodes.length;t<r;t++){var s=this.nodes[t],o=new XsltForms_exprContext(this.subform,s,t+1,this.nodes),n=XsltForms_globals.stringValue(this.changed.evaluate(o,s));n=XsltForms_schema.getType(XsltForms_browser.getType(s)||"xsd_:string").normalize(n),XsltForms_browser.setValue(s,n),XsltForms_browser.debugConsole.write("Propagate "+s.nodeName+" "+n)}for(var l=0,a=e.children.length;l<a;l++)e.children[l].xfElement&&e.children[l].xfElement.propagate()},new XsltForms_class("XsltForms_submission","HTMLElement","xforms-submission"),XsltForms_submission.prototype=new XsltForms_coreElement,XsltForms_submission.prototype.header=function(e,t,r,s){return this.headers.push({nodeset:e,combine:t,name:r,values:s}),this},XsltForms_submission.prototype.xml2data=function(e,t){if("application/zip"===this.mediatype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===this.mediatype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===this.mediatype){var r=document.getElementById(XsltForms_browser.getDocMeta(e.nodeType===Fleur.Node.DOCUMENT_NODE?e:e.ownerDocument,"instance")).xfElement;return r.archive||alert("Not an archive!"),XsltForms_browser.xml2zip(r.archive,this.mediatype)}var s=e?"string"==typeof e?e:"urlencoded-post"===t?XsltForms_submission.toUrl_(e,this.separator):XsltForms_browser.saveNode(e,"application/xml",this.relevant,!1,"multipart-post"===t,this.cdataSectionElements):"";return"text/csv"===this.mediatype&&"string"!=typeof e?XsltForms_browser.xml2csv(s,this.separator):"application/json"!==this.mediatype&&"text/json"!==this.mediatype||"string"==typeof e?s:XsltForms_browser.xml2json(s)},XsltForms_submission.prototype.submit=async function(){if(this.pending)return XsltForms_globals.openAction("XsltForms_submission.prototype.submit"),this.issueSubmitException_({"error-type":"submission-in-progress"}),void XsltForms_globals.closeAction("XsltForms_submission.prototype.submit");var ctxnode,targetnode,inst,body,scriptelt;this.pending=!0,XsltForms_globals.openAction("XsltForms_submission.prototype.submit");var ser=this.eval_(),sertype=typeof ser,node;"number"===sertype||"boolean"===sertype?ser=String(ser):"string"!==sertype&&(node=ser);var action="error";action=this.action.bind_evaluate?XsltForms_globals.stringValue(this.action.bind_evaluate(this.subform)):this.action;var method="post",subm=this;method=this.method.bind_evaluate?XsltForms_globals.stringValue(this.method.bind_evaluate(this.subform)):this.method;var evcontext={method:method,"resource-uri":action};if(action.substring&&"local://"===action.substring(0,8)&&"undefined"==typeof localStorage)return evcontext["error-type"]="validation-error",this.issueSubmitException_(evcontext,null,{message:"local:// submission not supported"}),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1);if(node){if(this.validate&&!XsltForms_globals.validate_(node))return XsltForms_globals.validationError=!0,XsltForms_globals.addChange(subm.model),XsltForms_xmlevents.dispatch(subm.model,"xforms-rebuild"),XsltForms_globals.refresh(),evcontext["error-type"]="validation-error",this.issueSubmitException_(evcontext,null,null),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1);if(("get"===method||"delete"===method)&&"none"!==this.serialization&&"file:"!==action.substring(0,5)&&"opener://"!==action.substr(0,9)&&"local://"!==action.substring(0,8)&&"javascript:"!==action.substring(0,11)){var tourl=XsltForms_submission.toUrl_(node,this.separator);tourl.length>0&&(action+=(-1===action.indexOf("?")?"?":this.separator)+tourl.substring(0,tourl.length-this.separator.length))}}node&&"none"!==this.serialization&&(XsltForms_xmlevents.dispatch(this,"xforms-submit-serialize"),ser=this.xml2data(node,method));var instance=this.instance;if(instance&&!document.getElementById(instance))return XsltForms_xmlevents.dispatch(this,"xforms-binding-exception"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1);if("file:"===window.location.href.substring(0,5)&&"http://"!==action.substring(0,7)||"file:"===action.substring(0,5)&&("file:"!==window.location.href.substring(0,5)||"get"!==method)||"opener://"===action.substring(0,9)||"local://"===action.substring(0,8)){if("file:"!==window.location.href.substring(0,5)&&"file:"!==action.substring(0,5)||"put"!==method){if("file:"===window.location.href.substring(0,5)&&"file:"!==action&&""!==action&&"get"===method){scriptelt=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","script"):document.createElement("script"),scriptelt.setAttribute("src",action),scriptelt.setAttribute("id","xsltforms-filereader"),scriptelt.setAttribute("type","application/xml");var scriptLoaded=function(){alert(document.getElementById("xsltforms-filereader").textContent)};scriptelt.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||scriptLoaded()},scriptelt.onload=scriptLoaded,body=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0],body.insertBefore(scriptelt,body.firstChild)}else if("opener://"===action.substring(0,9)&&"put"===method){try{window.opener.XsltForms_globals.xmlrequest("put",action.substr(9),ser)}catch(e){return XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}XsltForms_xmlevents.dispatch(subm,"xforms-submit-done")}else if("local://"===action.substring(0,8)&&"put"===method){try{window.localStorage.setItem(action.substr(8),ser)}catch(e){return XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}XsltForms_xmlevents.dispatch(subm,"xforms-submit-done")}else if("local://"===action.substring(0,8)&&"delete"===method){try{window.localStorage.removeItem(action.substr(8))}catch(e){return XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}XsltForms_xmlevents.dispatch(subm,"xforms-submit-done")}else if("get"===method){if("file:"===action.substring(0,5)){const e=e=>{("instance"===subm.replace||subm.targetref&&"text"===subm.replace)&&(subm.targetref?(ctxnode=instance?document.getElementById(instance).xfElement.doc.documentElement:node?node.nodeType===Fleur.Node.DOCUMENT_NODE?node.documentElement:node.ownerDocument.documentElement:subm.model.getInstance().documentElement,targetnode=subm.targetref.bind_evaluate(subm.subform,ctxnode),(Fleur.minimal&&targetnode&&targetnode[0]||!Fleur.minimal&&targetnode.head().nodeType!==Fleur.Node.SEQUENCE_NODE)&&(targetnode=targetnode.head(),"instance"===subm.replace?XsltForms_browser.loadNode(targetnode,e,"application/xml"):XsltForms_browser.loadTextNode(targetnode,e))):(inst=instance?document.getElementById(instance).xfElement:node?document.getElementById(XsltForms_browser.getDocMeta(node.nodeType===Fleur.Node.DOCUMENT_NODE?node:node.ownerDocument,"instance")).xfElement:subm.model.getInstance()).setDoc(e,!1,!0),XsltForms_globals.addChange(subm.model),XsltForms_xmlevents.dispatch(subm.model,"xforms-rebuild"),XsltForms_globals.refresh()),XsltForms_xmlevents.dispatch(subm,"xforms-submit-done"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),subm.pending=!1};if(window.showOpenFilePicker){const t={types:[{accept:{}}]};t.types[0].accept[subm.mediatype]=XsltForms_browser.MIME2extensions[subm.mediatype];try{const r=await window.showOpenFilePicker(t),s=await r[0].getFile(),o=await s.text();e(o)}catch(e){}return void(subm.pending=!1)}if(!subm.cell){const t=document.createElement("xforms-body");subm.cell=document.createElement("input"),subm.cell.type="file",t.appendChild(subm.cell),subm.element.appendChild(t),subm.cell.addEventListener("change",t=>{const r=new FileReader;r.onerror=(()=>{XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),this.pending=!1}),r.onabort=(()=>{XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),this.pending=!1}),r.onload=(()=>{e(r.result)});const s=subm.cell.files[0];s?r.readAsText(s):(XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),subm.pending=!1)})}return subm.cell.accept=subm.mediatype,subm.cell.click(),void(subm.pending=!1)}if("local://"===action.substring(0,8))try{ser=window.localStorage.getItem(action.substr(8))}catch(e){return XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}else if("opener://"===action.substring(0,9))try{ser=window.opener.XsltForms_globals.xmlrequest("get",action.substr(9))}catch(e){return XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}else eval("ser = ("+action.substring(11)+");");""!==ser&&("instance"===subm.replace||subm.targetref&&"text"===subm.replace)?(ctxnode=instance?document.getElementById(instance).xfElement.doc.documentElement:node?node.documentElement?node.documentElement:node.ownerDocument.documentElement:subm.model.getInstance().documentElement,subm.targetref?(targetnode=subm.targetref.bind_evaluate(subm.subform,ctxnode),(Fleur.minimal&&targetnode&&targetnode[0]||!Fleur.minimal&&targetnode.head().nodeType!==Fleur.Node.SEQUENCE_NODE)&&(targetnode=targetnode.head(),"instance"===subm.replace?XsltForms_browser.loadNode(targetnode,ser,"application/xml"):XsltForms_browser.loadTextNode(targetnode,ser))):(inst=instance?document.getElementById(instance).xfElement:node?document.getElementById(XsltForms_browser.getDocMeta(node.nodeType===Fleur.Node.DOCUMENT_NODE?node:node.ownerDocument,"instance")).xfElement:subm.model.getInstance(),inst.setDoc(ser,!1,!0)),XsltForms_globals.addChange(subm.model),XsltForms_xmlevents.dispatch(subm.model,"xforms-rebuild"),XsltForms_globals.refresh(),XsltForms_xmlevents.dispatch(subm,"xforms-submit-done")):XsltForms_xmlevents.dispatch(subm,"xforms-submit-error")}}else subm.pending=!1,await XsltForms_browser.writeFile("file:"===action.substr(0,5)?action.substr(5):action,subm.encoding,subm.mediatype,ser)||XsltForms_xmlevents.dispatch(subm,"xforms-submit-error"),XsltForms_xmlevents.dispatch(subm,"xforms-submit-done");return XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1)}if("javascript:"===action.substring(0,11))return"get"===method&&(eval("ser = ("+action.substr(11)+");"),""!==ser&&("instance"===subm.replace||subm.targetref&&"text"===subm.replace)?(ctxnode=instance?document.getElementById(instance).xfElement.doc.documentElement:node?node.documentElement?node.documentElement:node.ownerDocument.documentElement:subm.model.getInstance().documentElement,subm.targetref?(targetnode=subm.targetref.bind_evaluate(subm.subform,ctxnode),(Fleur.minimal&&targetnode&&targetnode[0]||!Fleur.minimal&&targetnode.head().nodeType!==Fleur.Node.SEQUENCE_NODE)&&(targetnode=targetnode.head(),"instance"===subm.replace?XsltForms_browser.loadNode(targetnode,ser,"application/xml"):XsltForms_browser.loadTextNode(targetnode,ser))):(inst=instance?document.getElementById(instance).xfElement:node?document.getElementById(XsltForms_browser.getDocMeta(node.nodeType===Fleur.Node.DOCUMENT_NODE?node:node.ownerDocument,"instance")).xfElement:subm.model.getInstance(),inst.setDoc(ser,!1,!0)),XsltForms_globals.addChange(subm.model),XsltForms_xmlevents.dispatch(subm.model,"xforms-rebuild"),XsltForms_globals.refresh(),XsltForms_xmlevents.dispatch(subm,"xforms-submit-done")):XsltForms_xmlevents.dispatch(subm,"xforms-submit-error")),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(this.pending=!1);var synchr=this.synchr;if(synchr&&XsltForms_browser.dialog.show("xsltforms-status-panel",null,!1),"xml-urlencoded-post"===method){var outForm=document.getElementById("xsltforms_form");if(outForm)outForm.firstChild.value=ser;else{outForm=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","form"):document.createElement("form"),outForm.setAttribute("method","post"),outForm.setAttribute("action",action),outForm.setAttribute("id","xsltforms_form");var txt=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","input"):document.createElement("input");txt.setAttribute("type","hidden"),txt.setAttribute("name","postdata"),txt.setAttribute("value",ser),outForm.appendChild(txt),body=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0],body.insertBefore(outForm,body.firstChild)}outForm.submit(),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit")}else if("application/javascript"===this.mediatype)XsltForms_browser.jsoninstobj={instance:instance?document.getElementById(instance).xfElement:node?document.getElementById(XsltForms_browser.getDocMeta(node.nodeType===Fleur.Node.DOCUMENT_NODE?node:node.ownerDocument,"instance")).xfElement:this.model.getInstance(),submission:this},scriptelt=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","script"):document.createElement("script"),scriptelt.setAttribute("src",action.replace(/&amp;/g,"&")+(-1===action.indexOf("?")?"?":"&")+"callback=jsoninst"),scriptelt.setAttribute("id","jsoninst"),scriptelt.setAttribute("type","text/javascript"),body=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0],body.insertBefore(scriptelt,body.firstChild),XsltForms_xmlevents.dispatch(this,"xforms-submit-done"),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit");else{if(!node&&("get"!==method||"delete"!==method))return evcontext["error-type"]="no-data",this.issueSubmitException_(evcontext,null,null),void(this.pending=!1);var req=null;try{evcontext["resource-uri"]=action,req=XsltForms_browser.openRequest(method.split("-").pop(),action,!synchr);var func=function(){if(synchr||4===req.readyState){try{if(1223===req.status&&(req.status=204,req.statusText="No Content"),0!==req.status&&(req.status<200||req.status>=300))return evcontext["error-type"]="resource-error",subm.issueSubmitException_(evcontext,req,null),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),void(subm.pending=!1);if(("instance"===subm.replace||subm.targetref&&"text"===subm.replace)&&(subm.targetref?(ctxnode=instance?document.getElementById(instance).xfElement.doc.documentElement:node?node.nodeType===Fleur.Node.DOCUMENT_NODE?node.documentElement:node.ownerDocument.documentElement:subm.model.getInstance().documentElement,targetnode=subm.targetref.bind_evaluate(subm.subform,ctxnode),(Fleur.minimal&&targetnode&&targetnode[0]||!Fleur.minimal&&targetnode.head().nodeType!==Fleur.Node.SEQUENCE_NODE)&&(targetnode=targetnode.head(),"instance"===subm.replace?XsltForms_browser.loadNode(targetnode,req.responseText,"application/xml"):XsltForms_browser.loadTextNode(targetnode,req.responseText))):(inst=instance?document.getElementById(instance).xfElement:node?document.getElementById(XsltForms_browser.getDocMeta(node.nodeType===Fleur.Node.DOCUMENT_NODE?node:node.ownerDocument,"instance")).xfElement:subm.model.getInstance()).setDocFromReq(req,!1,!0),XsltForms_globals.addChange(subm.model),XsltForms_xmlevents.dispatch(subm.model,"xforms-rebuild"),XsltForms_globals.refresh()),XsltForms_submission.requesteventlog(evcontext,req),XsltForms_xmlevents.dispatch(subm,"xforms-submit-done",null,null,null,null,evcontext),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),"all"===subm.replace){for(var e=req.responseText,t=e.indexOf("<?xml-stylesheet",0);-1!==t;){var r=e.substr(t,e.substr(t).indexOf("?>")).replace(/^.*href=\"([^\"]*)\".*$/,"$1");t=(e=XsltForms_browser.transformText(e,r,!1)).indexOf("<?xml-stylesheet",0)}if("new"===subm.show)if("application/octet-stream;base64"===req.getResponseHeader("Content-Type"))location.href="data:application/octet-stream;base64,"+e;else{var s=window.open("about:blank","_blank");s.document.write(e),s.document.close()}else XsltForms_browser.dialog.hide("xsltforms-status-panel",!1),XsltForms_globals.close(),document.write?(document.write(e),document.close()):(0===e.indexOf("<?",0)&&(e=e.substr(e.indexOf("?>")+2)),document.documentElement.innerHTML=e)}}catch(e){XsltForms_browser.debugConsole.write(e||e.message),evcontext["error-type"]="parse-error",subm.issueSubmitException_(evcontext,req,e),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit")}subm.pending=!1}};synchr||(req.onreadystatechange=func);var media=this.mediatype,mt;mt="multipart-post"===method?"multipart/related; boundary=xsltformsrev"+XsltForms_globals.fileVersionNumber+'; type="application/xml"; start="<xsltforms_main>"':(media||"application/xml")+(this.charset?";charset="+this.charset:""),XsltForms_browser.debugConsole.write("Submit "+this.method+" - "+mt+" - "+action+" - "+synchr);var len=this.headers.length,acceptValue="";if(0!==len){for(var headers=[],i=0,len0=this.headers.length;i<len0;i++){var nodes=[],hname;nodes=this.headers[i].nodeset?this.headers[i].nodeset.bind_evaluate(this.subform):[subm.model.getInstanceDocument().documentElement];for(var n=0,lenn=nodes.length;n<lenn;n++)if(hname=this.headers[i].name.bind_evaluate?XsltForms_globals.stringValue(this.headers[i].name.bind_evaluate(nodes[n])):this.headers[i].name,""!==hname){var hvalue="",j,len2,len3;for(j=0,len2=this.headers[i].values.length;j<len2;j++){var hv=this.headers[i].values[j],hv2;hv2=hv.bind_evaluate?XsltForms_globals.stringValue(hv.bind_evaluate(nodes[n])):hv,hvalue+=hv2,j<len2-1&&(hvalue+=",")}for(j=0,len3=headers.length;j<len3;j++)if(headers[j].name===hname){switch(this.headers[i].combine){case"prepend":headers[j].value=hvalue+","+headers[j].value;break;case"replace":headers[j].value=hvalue;break;default:headers[j].value+=","+hvalue}break}j===len3&&headers.push({name:hname,value:hvalue})}}for(var k=0,len4=headers.length;k<len4;k++)req.setRequestHeader(headers[k].name,headers[k].value),"accept"===headers[k].name.toLowerCase()&&(acceptValue=headers[k].value)}"get"===method||"delete"===method?(""===acceptValue&&(media===XsltForms_submission.SOAP_?(req.setRequestHeader("Accept",mt),acceptValue=mt):"instance"===subm.replace?(req.setRequestHeader("Accept","application/xml,text/xml"),acceptValue="application/xml,text/xml"):(req.setRequestHeader("Accept","text/plain"),acceptValue="text/plain")),req.overrideMimeType&&req.overrideMimeType(acceptValue.split(",")[0].split(";")[0]),req.send(null)):("urlencoded-post"===method&&(mt="application/x-www-form-urlencoded"),req.setRequestHeader("Content-Type",mt),media===XsltForms_submission.SOAP_?this.soapAction&&req.setRequestHeader("SOAPAction",this.soapAction):"instance"===subm.replace&&req.setRequestHeader("Accept","application/xml,text/xml"),req.send(ser)),synchr&&(func(),XsltForms_browser.dialog.hide("xsltforms-status-panel",null,!1))}catch(e){XsltForms_browser.dialog.hide("xsltforms-status-panel",null,!1),XsltForms_browser.debugConsole.write(e.message||e),evcontext["error-type"]="resource-error",subm.issueSubmitException_(evcontext,req,e),XsltForms_globals.closeAction("XsltForms_submission.prototype.submit"),subm.pending=!1}}},XsltForms_submission.SOAP_="application/soap+xml",XsltForms_submission.requesteventlog=function(e,t){try{e["response-status-code"]=t.status,e["response-reason-phrase"]=t.statusText,e["response-headers"]=[];var r=t.getAllResponseHeaders(),s="";if(r){r=r.replace(/\r/,"").split("\n");for(var o=0,n=r.length;o<n;o++){var l=r[o].indexOf(":");if(-1!==l){var a=r[o].substring(0,l).replace(/^\s+|\s+$/,""),i=r[o].substring(l+1).replace(/^\s+|\s+$/,"");s+="<header><name>"+XsltForms_browser.escape(a)+"</name><value>"+XsltForms_browser.escape(i)+"</value></header>"}}}if(e.rheadsdoc=XsltForms_browser.createXMLDocument("<data>"+s+"</data>"),e.rheadsdoc.documentElement.firstChild){var m=e.rheadsdoc.documentElement.firstChild;for(e["response-headers"]=[m];m.nextSibling;)m=m.nextSibling,e["response-headers"].push(m)}t.responseXML?e["response-body"]=[XsltForms_browser.createXMLDocument(t.responseText).documentElement]:e["response-body"]=t.responseText||""}catch(e){}},XsltForms_submission.prototype.issueSubmitException_=function(e,t,r){r&&(e.message=r.message||r,e["stack-trace"]=r.stack),t&&XsltForms_submission.requesteventlog(e,t),XsltForms_xmlevents.dispatch(this,"xforms-submit-error",null,null,null,null,e)},XsltForms_submission.toUrl_=function(e,t){for(var r="",s="",o=!1,n=0,l=e.childNodes.length;n<l;n++){var a=e.childNodes[n];switch(a.nodeType){case Fleur.Node.ELEMENT_NODE:o=!0,r+=this.toUrl_(a,t);break;case Fleur.Node.TEXT_NODE:s+=a.nodeValue}}return!o&&s.length>0&&(r+=e.nodeName+"="+encodeURIComponent(s)+t),r},new XsltForms_class("XsltForms_itext","HTMLElement","xforms-itext"),XsltForms_itext.prototype=new XsltForms_coreElement,new XsltForms_class("XsltForms_translation","HTMLElement","xforms-translation"),XsltForms_translation.prototype=new XsltForms_coreElement,new XsltForms_class("XsltForms_text","HTMLElement","xforms-text"),XsltForms_text.prototype=new XsltForms_coreElement,new XsltForms_class("XsltForms_timer","HTMLElement","xforms-timer"),XsltForms_timer.prototype=new XsltForms_coreElement,XsltForms_timer.prototype.start=function(){this.running=!0;var e=this;setTimeout(function(){e.run()},this.time)},XsltForms_timer.prototype.stop=function(){this.running=!1},XsltForms_timer.prototype.run=function(){if(this.running){var e=this;XsltForms_globals.openAction(),XsltForms_xmlevents.dispatch(e.element,"ajx-time"),XsltForms_globals.closeAction(),setTimeout(function(){e.run()},this.time)}},new XsltForms_class("XsltForms_confirm","HTMLElement","xforms-confirm"),XsltForms_confirm.prototype=new XsltForms_abstractAction,XsltForms_confirm.prototype.run=function(e,t,r){var s;if(this.binding){var o=this.binding.bind_evaluate(t)[0];o&&(s=XsltForms_browser.getValue(o))}else{var n=XsltForms_idManager.find(this.id);XsltForms_globals.build(n,t),s=n.textContent||n.innerText}s&&(XsltForms_browser.confirm(s.trim())||(r.stopPropagation(),r.stopped=!0))},new XsltForms_class("XsltForms_setproperty","HTMLElement","xforms-setproperty"),XsltForms_setproperty.prototype=new XsltForms_abstractAction,XsltForms_setproperty.prototype.run=function(e,t){var r=this.literal;this.value&&"string"!=typeof r&&void 0!==r.length&&(r=r.length>0?XsltForms_browser.getValue(r[0]):""),r&&(XsltForms_browser.i18n.lang=r,XsltForms_browser.debugConsole.write("setproperty "+name+" = "+r))},XsltForms_abstractAction.prototype.init=function(e){var t=e.getAttribute("xf-if"),r=e.getAttribute("xf-while"),s=e.getAttribute("xf-iterate");this.ifexpr=t?XsltForms_xpath.create(this.subform,t):null,this.whileexpr=r?XsltForms_xpath.create(this.subform,r):null,this.iterateexpr=s?XsltForms_xpath.create(this.subform,s):null,this.element=e;for(var o=e;o&&o.hasAttribute&&!o.hasAttribute("ev-event");)o=o.parentNode;if(o.hasAttribute&&(this.observer=o.hasAttribute("ev-observer")?XsltForms_idManager.find(o.getAttribute("ev-observer")):o.parentNode,e===o)){var n=this;new XsltForms_listener(this.subform,this.observer,null,e.getAttribute("ev-event"),null,function(e){XsltForms_browser.run(n,n.observer,e,!1,!0)},!0)}},XsltForms_abstractAction.prototype.build=function(){},XsltForms_abstractAction.prototype.execute=function(e,t,r){if(!r.stopped)if(t||(t=e.node||(XsltForms_globals.defaultModel.getInstanceDocument()?XsltForms_globals.defaultModel.getInstanceDocument().documentElement:null)),this.iterateexpr){this.whileexpr&&XsltForms_globals.error(this.element,"xforms-compute-exception","@iterate cannot be used with @while");for(var s=this.iterateexpr.xpath_evaluate(t).toArray(),o=0,n=s.length;o<n;o++)this.exec_(e,s[o],r)}else if(this.whileexpr)for(;XsltForms_globals.booleanValue(this.whileexpr.xpath_evaluate(t))&&this.exec_(e,t,r););else this.exec_(e,t,r)},XsltForms_abstractAction.prototype.exec_=function(e,t,r){if(this.ifexpr){if(!XsltForms_globals.booleanValue(this.ifexpr.xpath_evaluate(t)))return!1;this.run(e,t,r)}else this.run(e,t,r);return!0},XsltForms_abstractAction.prototype.run=function(){},new XsltForms_class("XsltForms_action","HTMLElement","xforms-action"),XsltForms_action.prototype=new XsltForms_abstractAction,XsltForms_action.prototype.run=function(e,t,r){for(var s=e;s;){if(s.xfElement){if(s.xfElement.varResolver)for(var o in this.varResolver={},s.xfElement.varResolver)this.varResolver[o]=s.xfElement.varResolver[o];break}s=s.parentNode}XsltForms_browser.forEach(Array.prototype.slice.call(this.element.children).map(function(e){return e.xfElement}),"execute",e,t,r)},new XsltForms_class("XsltForms_delete","HTMLElement","xforms-delete"),XsltForms_delete.prototype=new XsltForms_abstractAction,XsltForms_delete.prototype.run=function(e,t){var r,s;if(this.context&&(t=this.context.xpath_evaluate(t,null,this.subform).head()),t){var o,n,l=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver,a=this.binding.bind_evaluate(this.subform,t,l).toArray();for(r=0;r<a.length;r++)a[r].ownerDocument&&a[r].ownerDocument.documentElement!==a[r]||(a.splice(r,1),r--);if(this.at){var i=XsltForms_globals.numberValue(this.at.xpath_evaluate(new XsltForms_exprContext(this.subform,t,1,a,null,null,null,l)));if(!a[i-1])return;a=[a[i-1]]}a.length>0&&(n=(o=document.getElementById(XsltForms_browser.getDocMeta(a[0].nodeType===Fleur.Node.DOCUMENT_NODE?a[0]:a[0].ownerDocument,"model")).xfElement).findInstance(a[0]));var m=[];for(r=0,s=a.length;r<s;r++){var u=a[r];XsltForms_mipbinding.nodedispose(u);var c=XsltForms_browser.getMeta(u,"repeat");if(c&&XsltForms_collection[c].xfElement.deleteNode(u),u.nodeType===Fleur.Node.ATTRIBUTE_NODE){var d=u.ownerElement?u.ownerElement:u.selectSingleNode("..");d.removeAttributeNS?d.removeAttributeNS(u.namespaceURI,u.nodeName):d.removeAttributeNode(u),XsltForms_browser.isIE||XsltForms_browser.isIE11||(u.oldOwnerElement=d)}else u.parentNode.removeChild(u);m.push(u)}if(m.length>0){XsltForms_globals.addChange(o),o.setRebuilded(!0);var h={"deleted-nodes":m,"delete-location":i};XsltForms_xmlevents.dispatch(n,"xforms-delete",null,null,null,null,h)}}},new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-dispatch"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-hide"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-rebuild"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-recalculate"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-refresh"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-reset"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-revalidate"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-send"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-setfocus"),new XsltForms_class("XsltForms_dispatch","HTMLElement","xforms-show"),XsltForms_dispatch.prototype=new XsltForms_abstractAction,XsltForms_dispatch.prototype.run=function(e,t,r){var s=this.name;s.bind_evaluate&&(s=XsltForms_globals.stringValue(s.bind_evaluate(this.subform)));var o=this.target;if(o&&o.bind_evaluate&&(o=XsltForms_globals.stringValue(o.bind_evaluate(this.subform))),o)(o="string"==typeof o?XsltForms_idManager.find(o):o)||0!==s.indexOf("xforms-")||(s="xforms-binding-exception",o=e);else switch(s){case"xforms-submit":o=document.getElementById(XsltForms_browser.getDocMeta(t.ownerDocument,"model")).xfElement.defaultSubmission;break;case"xforms-rebuild":case"xforms-recalculate":case"xforms-refresh":case"xforms-reset":case"xforms-revalidate":o=document.getElementById(XsltForms_browser.getDocMeta(t.ownerDocument,"model")).xfElement}var n={};for(var l in this.properties)""!==l&&this.properties.hasOwnProperty(l)&&(n[l]=this.properties[l].bind_evaluate?this.properties[l].bind_evaluate(this.subform):this.properties[l]);var a=0;this.delay&&(a=this.delay.bind_evaluate?XsltForms_globals.numberValue(this.delay.bind_evaluate(this.subform)):XsltForms_globals.numberValue(this.delay)),a>0?window.setTimeout("XsltForms_xmlevents.dispatch(document.getElementById('"+o.id+"'),'"+s+"')",a):XsltForms_xmlevents.dispatch(o,s,null,null,null,null,n)},new XsltForms_class("XsltForms_insert","HTMLElement","xforms-insert"),XsltForms_insert.prototype=new XsltForms_abstractAction,XsltForms_insert.prototype.run=function(e,t){var r=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver;if(this.context&&(t=this.context.xpath_evaluate(t).head()),t){var s=[];(this.binding.bind||this.binding.xpath)&&(s=this.binding.bind_evaluate(this.subform,t,r).toArray());var o=0,n=null,l=[],a=null,i="after"===this.position?1:0,m=0;if(this.origin&&(l=this.origin.xpath_evaluate(t).toArray()),0===l.length){if(0===s.length)return;l.push(s[s.length-1])}for(var u=0,c=l.length;u<c;u+=1){n=l[u],0===s.length?a=t:(a=s[0].nodeType===Fleur.Node.DOCUMENT_NODE?s[0]:s[0].nodeType===Fleur.Node.ATTRIBUTE_NODE?s[0].ownerDocument?s[0].ownerDocument:s[0].selectSingleNode(".."):s[0].parentNode).nodeType!==Fleur.Node.DOCUMENT_NODE&&n.nodeType!==Fleur.Node.ATTRIBUTE_NODE&&(m=this.at?Math.round(XsltForms_globals.numberValue(this.at.xpath_evaluate(new XsltForms_exprContext(this.subform,t,1,s,null,null,null,r))))+u-1:s.length-1,o=isNaN(m)?s.length:m+i),XsltForms_browser.debugConsole.write("insert "+n.nodeName+" in "+a.nodeName+" at "+o+" - "+t.nodeName);var d=a.ownerDocument?a.ownerDocument.importNode(n,!0):a.importNode(n,!0);if(XsltForms_browser.clearMeta(d),n.nodeType===Fleur.Node.ATTRIBUTE_NODE)XsltForms_browser.setAttributeNS(a,n.namespaceURI,n.nodeName,n.nodeValue);else if(a.nodeType===Fleur.Node.DOCUMENT_NODE){var h=a.documentElement,p=XsltForms_browser.getDocMeta(a,"model"),X=XsltForms_browser.getDocMeta(a,"instance");a.removeChild(h),h=null,a.appendChild(d),XsltForms_browser.setDocMeta(a,"instance",X),XsltForms_browser.setDocMeta(a,"model",p)}else{var f;(f=o>=s.length&&0!==s.length?s[s.length-1].nextSibling:s[o])?f.parentNode.insertBefore(d,f):0===s.length&&a.firstChild?a.insertBefore(d,a.firstChild):a.appendChild(d);var g=s.length>0?XsltForms_browser.getMeta(s[0],"repeat"):null;s.push(d),g&&XsltForms_collection[g].xfElement.insertNode(d,f)}}var x=document.getElementById(XsltForms_browser.getDocMeta(a.nodeType===Fleur.Node.DOCUMENT_NODE?a:a.ownerDocument,"model")).xfElement;XsltForms_globals.addChange(x),x.setRebuilded(!0);var b={"inserted-nodes":[d],"origin-nodes":l,"insert-location-node":o,position:this.position};XsltForms_xmlevents.dispatch(x.findInstance(a),"xforms-insert",null,null,null,null,b)}},new XsltForms_class("XsltForms_load","HTMLElement","xforms-load"),XsltForms_load.prototype=new XsltForms_abstractAction,XsltForms_load.prototype.run=function(element,ctx){var href=this.resource,node;if(this.binding){var varresolver=this.parentAction?this.parentAction.varResolver:element.xfElement.varResolver;if(node=this.binding.bind_evaluate(this.subform,ctx,varresolver).head(),node){var t=XsltForms_schema.getType(XsltForms_browser.getType(node));t.hasBase("xf:HTMLFragment")||(href=XsltForms_browser.getValue(node))}}else href&&"object"==typeof href?href=XsltForms_globals.stringValue(this.resource.xpath.xpath_evaluate(ctx)):"string"==typeof href&&(href=XsltForms_browser.unescape(href));if(href)if("javascript:"===href.substr(0,11))try{eval('{XsltForms_context={elementId:"'+element.getAttribute("id")+'"};'+href.substr(11)+"}")}catch(e){alert("XSLTForms Exception\n--------------------------\n\nError evaluating the following Javascript expression :\n\n"+href.substr(11)+"\n\n"+e)}else if("new"===this.show||"_blank"===this.targetid)window.open(href);else if("embed"===this.show||""!==this.targetid&&"_blank"!==this.targetid&&"_self"!==this.targetid){XsltForms_globals.openAction("XsltForms_load.prototype.run");var req=null,method="get",evcontext={method:method,"resource-uri":href};try{if(req=XsltForms_browser.openRequest(method,href,!1),XsltForms_browser.debugConsole.write("Load "+href),req.send(null),0!==req.status&&(req.status<200||req.status>=300))return evcontext["error-type"]="resource-error",this.issueLoadException_(evcontext,req,null),void XsltForms_globals.closeAction("XsltForms_load.prototype.run");XsltForms_submission.requesteventlog(evcontext,req),XsltForms_globals.closeAction("XsltForms_load.prototype.run");for(var resp=req.responseText,piindex=resp.indexOf("<?xml-stylesheet",0);-1!==piindex;){var xslhref=resp.substr(piindex,resp.substr(piindex).indexOf("?>")).replace(/^.*href=\"([^\"]*)\".*$/,"$1");resp=XsltForms_browser.transformText(resp,xslhref,!1),piindex=resp.indexOf("<?xml-stylesheet",0)}XsltForms_browser.dialog.hide("xsltforms-status-panel",!1);var sp=XsltForms_globals.stringSplit(resp,"\x3c!--XsltForms_MagicSeparator--\x3e"),subbody,targetelt=XsltForms_idManager.find(this.targetid);subbody=1===sp.length?resp:sp[1];var targetid=targetelt.id,targetxf=targetelt.xfElement;targetelt.xfElement&&(targetelt=targetelt.querySelector("xforms-body")),targetelt.innerHTML=subbody,targetelt.hasXFElement=null;for(var parentNode=targetelt.parentNode;parentNode&&!1===parentNode.hasXFElement;)parentNode.hasXFElement=null,parentNode=parentNode.parentNode;var subformidx=XsltForms_globals.nbsubforms++,newsubform=new XsltForms_subform(this.subform,"xsltforms-subform-"+String(subformidx),targetid);XsltForms_class.activateAll(newsubform,targetelt,function(){newsubform.construct(),targetxf&&targetxf.isComponent||(XsltForms_globals.openAction("XsltForms_subform.prototype.construct"),XsltForms_globals.closeChanges(!0),XsltForms_globals.closeAction("XsltForms_subform.prototype.construct")),targetxf&&XsltForms_xmlevents.dispatch(targetxf,"xforms-load-done",null,null,null,null,evcontext)})}catch(e){XsltForms_browser.debugConsole.write(e.message||e),evcontext["error-type"]="resource-error",this.issueLoadException_(evcontext,req,e),XsltForms_globals.closeAction("XsltForms_load.prototype.run")}}else location.href=href;else if(node)try{var v=XsltForms_browser.getValue(node).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),lw;"new"===this.show||"_blank"===this.targetid?(lw=window.open("about:blank","_blank"),lw.document.write(v),lw.document.close()):(lw=window.open("about:blank","_self"),lw.document.write(v),lw.document.close())}catch(e){XsltForms_browser.debugConsole.write("ERROR: Load:"+e.message)}},XsltForms_load.prototype.issueLoadException_=function(e,t,r){r&&(e.message=r.message||r,e["stack-trace"]=r.stack),t&&XsltForms_submission.requesteventlog(e,t),XsltForms_xmlevents.dispatch(document.getElementById(this.targetid),"xforms-link-exception",null,null,null,null,e)},XsltForms_load.subform=function(e,t,r){if(r)for(var s=r;s&&s.nodeType===Fleur.Node.ELEMENT_NODE;)"xforms-repeat-item"!==s.localName.toLowerCase()&&"repeat-item"!==s.getAttribute("xforms-name")||XsltForms_repeat.selectItem(s),s=s.parentNode;var o=null;for(s=XsltForms_idManager.find(t);s&&s.nodeType===Fleur.Node.ELEMENT_NODE;){if(s.xfSubform){o=s.xfSubform;break}s=s.parentNode}new XsltForms_load(o,null,e,"embed",t).run()},new XsltForms_class("XsltForms_message","HTMLElement","xforms-message"),XsltForms_message.prototype=new XsltForms_abstractAction,XsltForms_message.prototype.run=function(e,t){var r;if(this.binding){var s=this.binding.bind_evaluate(this.subform,t,this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver).head();s&&(r=XsltForms_browser.getValue(s))}else{var o=this.element,n=XsltForms_globals.building;XsltForms_globals.building=!0,this.running=!0,XsltForms_globals.build(o,t,null,this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver),this.running=!1,XsltForms_globals.building=n,r=this.element.textContent||this.element.innerText}r&&alert(r.trim())},new XsltForms_class("XsltForms_script","HTMLElement","xforms-script"),XsltForms_script.prototype=new XsltForms_abstractAction,XsltForms_script.prototype.run=function(element,ctx){var script=this.script;switch(this.stype){case"text/javascript":if(this.binding){var node=this.binding.bind_evaluate(this.subform,ctx).head();node&&(script=XsltForms_browser.getValue(node))}else"object"==typeof script?script=XsltForms_globals.stringValue(this.script.xpath.xpath_evaluate(ctx)):"string"==typeof script&&(script=XsltForms_browser.unescape(script));if(script)try{eval('{XsltForms_context={elementId:"'+element.getAttribute("id")+'"};'+script+"}")}catch(e){alert("XSLTForms Exception\n--------------------------\n\nError evaluating the following Javascript expression :\n\n"+script+"\n\n"+e)}break;case"application/xquery":this.script.xpath.xpath_evaluate(ctx)}},new XsltForms_class("XsltForms_setindex","HTMLElement","xforms-setindex"),XsltForms_setindex.prototype=new XsltForms_abstractAction,XsltForms_setindex.prototype.run=function(e,t){var r=XsltForms_idManager.find(this.repeat),s=XsltForms_globals.numberValue(this.index.xpath_evaluate(t));XsltForms_browser.debugConsole.write("setIndex "+s),isNaN(s)||(s<1?(s=1,XsltForms_xmlevents.dispatch(r.xfElement,"xforms-scroll-first")):s>r.xfElement.nodes.length&&(s=r.xfElement.nodes.length,XsltForms_xmlevents.dispatch(r.xfElement,"xforms-scroll-last")),r.xfElement.setIndex(s))},new XsltForms_class("XsltForms_setnode","HTMLElement","xforms-setnode"),XsltForms_setnode.prototype=new XsltForms_abstractAction,XsltForms_setnode.prototype.run=function(e,t){var r=this.binding.bind_evaluate(this.subform,t).head();if(r){this.context&&(t=this.context.xpath_evaluate(t).head());var s=this.value?XsltForms_globals.stringValue(this.context?this.value.xpath_evaluate(t,t):this.value.xpath_evaluate(r,t)):this.literal,o=XsltForms_browser.getDocMeta(r.ownerDocument,"model"),n=XsltForms_browser.getDocMeta(r.ownerDocument,"instance");if(XsltForms_globals.openAction("XsltForms_setnode.prototype.run"),this.inout){for(;r.firstChild;)r.removeChild(r.firstChild);var l=r.ownerDocument.createTextNode("temp");r.appendChild(l),XsltForms_browser.loadNode(l,s||"","application/xml")}else XsltForms_browser.loadNode(r,s||"","application/xml"),XsltForms_browser.setDocMeta(r.ownerDocument,"model",o),XsltForms_browser.setDocMeta(r.ownerDocument,"instance",n);var a=document.getElementById(o).xfElement;XsltForms_globals.addChange(a),XsltForms_browser.debugConsole.write("Setnode "+r.nodeName+(this.inout?" inner":" outer")+" = "+s),XsltForms_xmlevents.dispatch(a,"xforms-rebuild"),XsltForms_globals.refresh(),XsltForms_globals.closeAction("XsltForms_setnode.prototype.run")}},new XsltForms_class("XsltForms_setselection","HTMLElement","xforms-setselection"),XsltForms_setselection.prototype=new XsltForms_abstractAction,XsltForms_setselection.prototype.run=function(e,t){var r=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver;this.context&&(t=this.context.xpath_evaluate(e.xfElement.subform,t,null,r).head());var s=this.control;s&&s.bind_evaluate&&(s=XsltForms_globals.stringValue(s.bind_evaluate(this.subform,t,r)));var o=XsltForms_idManager.find(s).xfElement,n=o.input,l=XsltForms_globals.stringValue(this.value.xpath_evaluate(t,t,e.xfElement.subform,r)),a=n.selectionStart,i=n.selectionEnd,m=n.value.substring(0,a)+l+n.value.substring(i);XsltForms_globals.openAction("XsltForms_setselection.prototype.run");try{XsltForms_browser.setValue(o.boundnodes[0],m),n.value=m,XsltForms_browser.isChrome||n.focus(),n.setSelectionRange(a,a+l.length),document.getElementById(XsltForms_browser.getDocMeta(o.boundnodes[0].ownerDocument,"model")).xfElement.addChange(o.boundnodes[0]),XsltForms_browser.debugConsole.write("Set selection "+s+" = "+m)}catch(e){XsltForms_browser.debugConsole.write("ERROR: cannot set selection on "+s+" = "+m+"(context "+XsltForms_browser.name2string(t)+")")}XsltForms_globals.closeAction("XsltForms_setselection.prototype.run")},new XsltForms_class("XsltForms_setvalue","HTMLElement","xforms-setvalue"),XsltForms_setvalue.prototype=new XsltForms_abstractAction,XsltForms_setvalue.prototype.run=function(e,t){var r=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver,s=this.binding.bind_evaluate(e.xfElement.subform,t,r).toArray();0!==s.length&&this.context&&(t=this.context.xpath_evaluate(e.xfElement.subform,t,null,r).head());for(var o=0,n=s.length;o<n;o++){var l=s[o];if(l){var a=this.value?XsltForms_globals.stringValue(this.context?this.value.xpath_evaluate(t,t,e.xfElement.subform,r):this.value.xpath_evaluate(l,t,e.xfElement.subform,r)):this.literal;XsltForms_globals.openAction("XsltForms_setvalue.prototype.run");try{XsltForms_browser.setValue(l,a||""),document.getElementById(XsltForms_browser.getDocMeta(l.ownerDocument,"model")).xfElement.addChange(l),XsltForms_browser.debugConsole.write("Setvalue "+XsltForms_browser.name2string(l)+" = "+a)}catch(e){XsltForms_browser.debugConsole.write("ERROR: cannot setvalue on "+XsltForms_browser.name2string(l)+" = "+a+"(context "+XsltForms_browser.name2string(t)+")")}XsltForms_globals.closeAction("XsltForms_setvalue.prototype.run")}}},new XsltForms_class("XsltForms_split","HTMLElement","xforms-split"),XsltForms_split.prototype=new XsltForms_abstractAction,XsltForms_split.prototype.run=function(e,t){var r,s=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver,o=this.binding.bind_evaluate(e.xfElement.subform,t,s).toArray();if(0!==o.length){this.context&&(t=this.context.xpath_evaluate(e.xfElement.subform,t,null,s).head()),XsltForms_globals.openAction("XsltForms_split.prototype.run");try{for(var n=0,l=o.length;n<l;n++)r=o[n],XsltForms_browser.splitNode(r,this.separator||",",this.leftTrim,this.rightTrim),document.getElementById(XsltForms_browser.getDocMeta(r.ownerDocument,"model")).xfElement.addChange(r),XsltForms_browser.debugConsole.write("Split "+XsltForms_browser.name2string(r)+" = '"+XsltForms_browser.getValue(r)+"' with "+this.separator)}catch(e){XsltForms_browser.debugConsole.write("ERROR: cannot split on "+XsltForms_browser.name2string(r)+" with "+this.separator+"(context "+XsltForms_browser.name2string(t)+")")}XsltForms_globals.closeAction("XsltForms_split.prototype.run")}},new XsltForms_class("XsltForms_toggle","HTMLElement","xforms-toggle"),XsltForms_toggle.prototype=new XsltForms_abstractAction,XsltForms_toggle.prototype.run=function(e,t){XsltForms_toggle.toggle(this.caseId,t)},XsltForms_toggle.toggle=function(e,t){XsltForms_globals.openAction("XsltForms_toggle.toggle"),"object"==typeof e&&(t||(t=XsltForms_globals.defaultModel.getInstanceDocument()?XsltForms_globals.defaultModel.getInstanceDocument().documentElement:null),e=XsltForms_globals.stringValue(e.xpath.xpath_evaluate(t)));for(var r=XsltForms_idManager.find(e),s=r?r.parentNode.children:[],o=0,n=s.length;o<n;o++){var l=s[o];l!==r&&l.hasAttribute("xf-selected")&&(l.removeAttribute("xf-selected"),XsltForms_xmlevents.dispatch(l,"xforms-deselect"))}r&&(r.setAttribute("xf-selected","true"),XsltForms_xmlevents.dispatch(r,"xforms-select")),XsltForms_globals.closeAction("XsltForms_toggle.toggle")},new XsltForms_class("XsltForms_unload","HTMLElement","xforms-unload"),XsltForms_unload.prototype=new XsltForms_abstractAction,XsltForms_unload.prototype.run=function(e,t){var r=this.targetid||this.subform.eltid,s=XsltForms_idManager.find(r);s.xfSubform&&s.xfSubform.dispose(),s.xfSubform=null;var o=s.xfElement;o&&(s=s.children[s.children.length-1]),s.innerHTML="",s.hasXFElement=null,XsltForms_browser.setClass(s,"xforms-subform-loaded",!1),o&&XsltForms_xmlevents.dispatch(o,"xforms-unload-done"),XsltForms_browser.debugConsole.write("unload-done")},XsltForms_unload.subform=function(e,t){if(t)for(var r=t;r&&r.nodeType===Fleur.Node.ELEMENT_NODE;)"xforms-repeat-item"!==r.localName.toLowerCase()&&"repeat-item"!==r.getAttribute("xforms-name")||XsltForms_repeat.selectItem(r),r=r.parentNode;var s=null;for(r=XsltForms_idManager.find(e);r&&r.nodeType===Fleur.Node.ELEMENT_NODE;){if(r.xfSubform){s=r.xfSubform;break}r=r.parentNode}new XsltForms_unload(s,e).run()},new XsltForms_class("XsltForms_wrap","HTMLElement","xforms-wrap"),XsltForms_wrap.prototype=new XsltForms_abstractAction,XsltForms_wrap.prototype.run=function(e,t){var r=this.parentAction?this.parentAction.varResolver:e.xfElement.varResolver;this.context&&(t=this.context.xpath_evaluate(e.xfElement.subform,t,null,r).head());var s=this.control;s&&s.bind_evaluate&&(s=XsltForms_globals.stringValue(s.bind_evaluate(this.subform,t,r)));var o=XsltForms_idManager.find(s).xfElement,n=o.input,l=this.prevalue;l&&l.bind_evaluate&&(l=XsltForms_globals.stringValue(l.bind_evaluate(this.subform,t,r)));var a=this.postvalue;if(a&&a.bind_evaluate&&(a=XsltForms_globals.stringValue(a.bind_evaluate(this.subform,t,r))),l+a!==""){var i=n.selectionStart,m=n.selectionEnd,u=n.value.substring(0,i)+l+n.value.substring(i,m)+a+n.value.substring(m);XsltForms_globals.openAction("XsltForms_wrap.prototype.run");try{XsltForms_browser.setValue(o.boundnodes[0],u||""),n.value=u||"",XsltForms_browser.isChrome||n.focus(),n.setSelectionRange(i,m+l.length+a.length),document.getElementById(XsltForms_browser.getDocMeta(o.boundnodes[0].ownerDocument,"model")).xfElement.addChange(o.boundnodes[0]),XsltForms_browser.debugConsole.write("Wrap "+s+" = "+u)}catch(e){XsltForms_browser.debugConsole.write("ERROR: cannot wrap on "+s+" = "+u+"(context "+XsltForms_browser.name2string(t)+")")}XsltForms_globals.closeAction("XsltForms_wrap.prototype.run")}};var XsltForms_element_depsId=0;function XsltForms_control(){this.isControl=!0}function XsltForms_var(e,t){XsltForms_globals.counters.xvar++,this.init(e,t),this.element.parentNode.varScope||(this.element.parentNode.varScope={});var r=t.getAttribute("xf-name");this.element.parentNode.varScope[r]=this,this.name=r,"xforms-action"===t.parentNode.localName.toLowerCase()?(this.controlName="action-var",this.hasBinding=!1,this.value=XsltForms_xpath.create(this.subform,t.getAttribute("xf-value"))):(this.controlName="var",this.hasBinding=!0,this.binding=new XsltForms_binding(e,t),this.isOutput=!0)}function XsltForms_tree(e,t,r){this.init(e,t),this.binding=r,this.hasBinding=!0,this.root=XsltForms_browser.isXhtml?this.element.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","ul")[0]:this.element.getElementsByTagName("ul")[0],this.label=this.root.firstChild.cloneNode(!0)}function XsltForms_avt(e,t,r){if(this.init(e,t),this.controlName="avt",this.attrname=r,this.binding=new XsltForms_binding(e,t,"xf-template-"+r,"xsd:string"),this.hasBinding=!0,this.isOutput=!0,"id"===r.toLowerCase()){for(var s="xsltforms-id-",o=1;t.nodeType===Fleur.Node.ELEMENT_NODE;){for(;t.previousSibling;)t.nodeType===Fleur.Node.ELEMENT_NODE&&o++,t=t.previousSibling;s+=o+"_",t=t.parentNode,o=1}this.element.setAttribute("id",s)}else this.binding&&this.binding.type&&this.element.setAttribute(this.attrname,"")}function XsltForms_case(e,t){this.init(e,t)}function XsltForms_component(e,t,r,s,o){XsltForms_globals.counters.component++,this.init(e,t),this.valoff=r;var n=this.element.children||this.element.childNodes;if(0!==n.length){var l=n;this.valueElement=l[r]}else this.valueElement=this.element;this.hasBinding=!0,this.binding=s,this.resource=o,this.isComponent=!0,this.binding&&this.binding.type&&XsltForms_browser.setClass(this.element,"xforms-disabled",!1);var a=null;try{if(a=XsltForms_browser.openRequest("get",o,!1),XsltForms_browser.debugConsole.write("Load Component "+o),a.send(null),0!==a.status&&(a.status<200||a.status>=300))return;for(var i=a.responseText,m=i.indexOf("<?xml-stylesheet",0);-1!==m;){var u=i.substr(m,i.substr(m).indexOf("?>")).replace(/^.*href=\"([^\"]*)\".*$/,"$1");m=(i=XsltForms_browser.transformText(i,u,!1)).indexOf("<?xml-stylesheet",0)}var c,d,h=XsltForms_globals.stringSplit(i,"XsltForms_MagicSeparator"),p=this.valueElement;if(1===h.length)c=i;else{var X=(d="").indexOf('"xsltforms-mainform"'),f=p.xfSubform;for(f&&f.dispose(),X=(d='(function(){var xsltforms_subform_eltid = "'+t+'";var xsltforms_parentform = XsltForms_subform.subforms["'+this.subform.id+'"];'+d.substring(0,X)+'"xsltforms-subform-'+XsltForms_globals.nbsubforms+'"'+d.substring(X+20)+"})();").indexOf('"xsltforms-mainform-instance-default"');-1!==X;)X=(d=d.substring(0,X)+'"xsltforms-subform-'+XsltForms_globals.nbsubforms+'-instance-default"'+d.substring(X+37)).indexOf('"xsltforms-mainform-instance-default"');for(X=(c="\x3c!-- xsltforms-subform-"+XsltForms_globals.nbsubforms+" "+h[4]+" xsltforms-subform-"+XsltForms_globals.nbsubforms+" --\x3e").indexOf(' id="xsltforms-mainform');-1!==X;)X=(c=c.substring(0,X)+' id="xsltforms-subform-'+XsltForms_globals.nbsubforms+c.substring(X+23)).indexOf(' id="xsltforms-mainform')}p.innerHTML=c,p.hasXFElement=null;for(var g=p.parentNode;g&&!1===g.hasXFElement;)g.hasXFElement=null,g=g.parentNode;1!==h.length&&(XsltForms_globals.componentLoads.push(d),this.subjs=d,this.evaljs=!0),XsltForms_browser.setClass(p,"xforms-subform-loaded",!0),XsltForms_globals.nbsubforms++}catch(e){XsltForms_browser.debugConsole.write(e.message||e)}}function XsltForms_dialog(e,t){0===document.getElementsByTagName("xforms-dialog-surround").length&&document.body.appendChild(document.createElement("xforms-dialog-surround")),XsltForms_globals.counters.dialog++,this.init(e,t),this.controlName="dialog",this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(e,t):null,this.binding&&(this.hasBinding=!0)}function XsltForms_group(e,t){this.init(e,t);var r=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(e,t):null;if(XsltForms_globals.counters.group++,this.init(e,t),this.controlName="group","xforms-switch"===t.localName.toLowerCase()){for(var s=Array.prototype.slice.call(this.element.children||this.element.childNodes),o=0,n=s.length;o<n;o++){if("true"===s[o].getAttribute("xf-selected"))break}o===n&&s[0].setAttribute("xf-selected","true")}r&&(this.hasBinding=!0,this.binding=r),this.casebinding=t.hasAttribute("xf-caseref")?new XsltForms_binding(e,t):null}function XsltForms_include(e,t){this.init(e,t);var r=t.getAttribute("xf-src"),s=null;try{if(s=XsltForms_browser.openRequest("get",r,!1),XsltForms_browser.debugConsole.write("Include "+r),s.send(null),0!==s.status&&(s.status<200||s.status>=300))return;for(var o=s.responseText,n=o.indexOf("<?xml-stylesheet",0);-1!==n;){var l=o.substr(n,o.substr(n).indexOf("?>")).replace(/^.*href=\"([^\"]*)\".*$/,"$1");n=(o=XsltForms_browser.transformText(o,l,!1)).indexOf("<?xml-stylesheet",0)}var a,i=XsltForms_globals.stringSplit(o,"\x3c!--XsltForms_MagicSeparator--\x3e");for(var m in a=1===i.length?o:i[1],t.innerHTML=a,XsltForms_classes)XsltForms_classes.hasOwnProperty(m)&&Array.prototype.slice.call(t.getElementsByTagName(m)).forEach(function(t){XsltForms_classes[t.localName].classbinding(e,t)});Array.prototype.slice.call(t.querySelectorAll("*[xf-avt]")).forEach(function(t){t.xfElement||(t.xfIndex=XsltForms_collection.length,XsltForms_collection.push(t),Array.prototype.slice.call(t.attributes).filter(function(e){return e.nodeName.startsWith("xf-template-")}).forEach(function(r){new XsltForms_avt(e,t,r.nodeName.substr(12))}))})}catch(e){}}function XsltForms_input(e,t,r){XsltForms_globals.counters.input++,this.init(e,t),this.controlName="input",this.binding=new XsltForms_binding(e,t),this.inputmode=XsltForms_input.InputMode[t.getAttribute("xf-inputmode")],this.incremental="true"===t.getAttribute("xf-incremental"),this.delay=t.getAttribute("xf-delay"),this.timer=null;for(var s=this.element.children,o=0,n=s.length;o<n;o++){var l=s[o].localName.toLowerCase();"xforms-body"===l?this.cell=s[o]:"xforms-hint"===l&&"minimal"===s[o].getAttribute("xf-appearance")&&t.setAttribute("title",s[o].textContent)}this.isClone=r,this.hasBinding=!0,this.itype=t.localName.toLowerCase().substr(7),this.mediatype=t.getAttribute("xf-mediatype")}XsltForms_element.prototype.init=function(e,t){this.subform=e,this.element=t,this.element.xfElement?(this.element.xfElement instanceof Array||(this.element.xfElement=[this.element.xfElement]),this.element.xfElement.push(this)):this.element.xfElement=this,this.depsElements=[],this.depsNodesBuild=[],this.depsNodesRefresh=[],this.depsIdB=XsltForms_element_depsId++,this.depsIdR=XsltForms_element_depsId++;for(var r=this.element.parentNode;r;){if(r.varScope)for(var s in r.varScope)this.varResolver||(this.varResolver={}),this.varResolver[s]=r.varScope[s];r=r.parentNode}},XsltForms_element.prototype.dispose=function(){if(this.element&&(this.element.xfElement=null,this.element.hasXFElement=null,this.element=null),this.depsElements=null,this.depsNodesBuild)for(var e=0,t=this.depsNodesBuild.length;e<t;e++)XsltForms_browser.rmValueMeta(this.depsNodesBuild[e],"depfor",this.depsIdB);if(this.depsNodesBuild=null,this.depsNodesRefresh)for(var r=0,s=this.depsNodesRefresh.length;r<s;r++)XsltForms_browser.rmValueMeta(this.depsNodesRefresh[r],"depfor",this.depsIdR);for(var o in this.depsNodesRefresh=null,this)this.hasOwnProperty(o)&&(this[o]=null,delete this[o])},XsltForms_element.prototype.build=function(e,t){if(this.hasBinding){for(var r=this.depsElements,s=this.depsNodesBuild,o=this.depsNodesRefresh,n=!XsltForms_globals.ready||0===r.length||e!==this.ctx,l=!1,a=XsltForms_globals.changes,i=0,m=s.length;!n&&i<m;i++)n=""===s[i].nodeName;for(var u=0,c=r.length;!n&&u<c;u++)for(var d=r[u],h=0,p=a.length;!n&&h<p;h++)if(d===a[h])if(d.instances)if(d.rebuilded||d.newRebuilded)n=!0;else{for(var X=0,f=s.length;!n&&X<f;X++)n=XsltForms_browser.inArray(s[X],d.nodesChanged);if(!n)for(var g=0,x=o.length;g<x;g++)l=XsltForms_browser.inArray(o[g],d.nodesChanged)}else n=!0;if(this.changed=n||l,n){for(var b=0,F=s.length;b<F;b++)XsltForms_browser.rmValueMeta(s[b],"depfor",this.depsIdB);s.length=0;for(var _=0,y=o.length;_<y;_++)XsltForms_browser.rmValueMeta(o[_],"depfor",this.depsIdR);o.length=0,r.length=0,this.ctx=e,this.build_(e,t)}}else this.element.node="item"===this.controlName&&this.element.node||e},XsltForms_element.prototype.evaluateBinding=function(e,t,r){this.boundnodes=null;var s=null;if(e){if(this.varResolver)for(var o in this.varResolver)r||(r={}),r[o]=this.varResolver[o];if(this.boundnodes=e.bind_evaluate(this.subform,t,r,this.depsNodesBuild,this.depsIdB,this.depsElements),!Fleur.minimal&&this.boundnodes.nodeType&&(this.boundnodes=this.boundnodes.toArray()),this.boundnodes instanceof Array&&0!==this.boundnodes.length?this.element.setAttribute("xf-bound",""):this.element.removeAttribute("xf-bound"),this.boundnodes||""===this.boundnodes||0===this.boundnodes)return this.boundnodes;s="non-existent bind-ID("+e.bind+") on element("+this.element.localName+")!"}else s="no binding defined for element("+this.element.localName+")!";return XsltForms_browser.assert(s),XsltForms_globals.building&&XsltForms_globals.debugMode?(XsltForms_globals.bindErrMsgs.push(s),XsltForms_xmlevents.dispatch(this.element,"xforms-binding-exception"),this.nodes=[]):XsltForms_globals.error(this.element,"xforms-binding-exception",s),this.boundnodes},XsltForms_control.prototype=new XsltForms_element,XsltForms_control.prototype.initFocus=function(e,t){t&&(this.focusControl=e),XsltForms_browser.events.attach(e,"focus",XsltForms_control.focusHandler),XsltForms_browser.events.attach(e,"blur",XsltForms_control.blurHandler)},XsltForms_control.prototype.dispose=function(){this.focusControl=null,XsltForms_element.prototype.dispose.call(this)},XsltForms_control.prototype.focus=function(e,t){if(!this.isOutput){if(XsltForms_globals.focus!==this){XsltForms_globals.openAction("XsltForms_control.prototype.focus"),XsltForms_globals.blur(!0),XsltForms_globals.focus=this,this.element.setAttribute("xf-focus","");for(var r=this.element.parentNode;r.nodeType===Fleur.Node.ELEMENT_NODE;)void 0===r.node||"xforms-repeat-item"!==r.localName.toLowerCase()&&"repeat-item"!==r.getAttribute("xforms-name")||XsltForms_repeat.selectItem(r),r=r.parentNode;XsltForms_xmlevents.dispatch(XsltForms_globals.focus,"DOMFocusIn",null,null,null,null,t),XsltForms_globals.closeAction("XsltForms_control.prototype.focus"),this.full&&!e&&this.focusFirst()}var s=this.focusControl;if(XsltForms_globals.posibleBlur=!1,s&&!e){var o=this.focusControl,n=o.nodeName.toLowerCase();try{o.focus(),o.focus()}catch(e){XsltForms_browser.debugConsole.write("ERROR: Could not focus on element "+o)}if("input"===n||"textarea"===n)try{o.select()}catch(e){}}}},XsltForms_control.prototype.build_=function(e,t){if("output"===this.controlName){var r=this.element.parentNode;if("xforms-message"===r.localName.toLowerCase()&&!r.xfElement.running)return}var s=this.evaluateBinding(this.binding,e,t);if("object"==typeof s){var o=s.head(),n=this.element;n.node===o&&XsltForms_globals.ready||(n.node=o,this.nodeChanged=!0),o?(this.depsNodesRefresh.push(o),n.setAttribute("xf-bound","")):n.removeAttribute("xf-bound")}else this.outputValue=s},XsltForms_control.prototype.refresh=function(){if("var"!==this.controlName&&"action-var"!==this.controlName){var e=this.element,t=e.node;if(void 0!==this.outputValue)"var"!==this.controlName&&(this.setValue(this.outputValue),this.eventDispatch("xforms-disabled","xforms-enabled",!1));else if(t){this.value||(this.value=this.hasCopy?[]:"");var r,s=this.value instanceof Array?XsltForms_browser.getValueItemsetCopy(t):XsltForms_browser.getValue(t,!0,this.complex);if(XsltForms_globals.openAction("XsltForms_control.prototype.refresh"),this.currentValue instanceof Array){if(r=!1,this.currentValue.length!==s.length)r=!0;else for(var o=0,n=this.currentValue.length;o<n;o++)if(this.currentValue[o]!==s[o]){r=!0;break}r=r||this.nodeChanged}else r=s!==this.currentValue||this.nodeChanged;this.changeProp(t,"required","xforms-required","xforms-optional",r,s),this.changeProp(t,"notrelevant","xforms-disabled","xforms-enabled",r,s),this.changeProp(t,"readonly","xforms-readonly","xforms-readwrite",r,s),this.changeProp(t,"invalid","xforms-invalid","xforms-valid",r,s),this.currentValue=s instanceof Array?s.slice(0):s,r&&(this.setValue(s),this.nodeChanged||this.isTrigger||XsltForms_xmlevents.dispatch(e,"xforms-value-changed")),XsltForms_globals.closeAction("XsltForms_control.prototype.refresh")}else this.eventDispatch("xforms-disabled","xforms-enabled",!this.hasValue);this.nodeChanged=!1}},XsltForms_control.prototype.eventDispatch=function(e,t,r){this.nodeChanged&&!XsltForms_globals.ready||this.isTrigger||XsltForms_xmlevents.dispatch(this.element,r?e:t)},XsltForms_control.prototype.changeProp=function(e,t,r,s,o,n){var l=!("invalid"===t&&""===n&&!XsltForms_globals.validationError)&&XsltForms_browser.getBoolMeta(e,t);(o||l!==this[t])&&(this.eventDispatch(r,s,l),this[t]=l,l?this.element.setAttribute("xf-"+t,""):this.element.removeAttribute("xf-"+t),"readonly"===t&&this.changeReadonly&&this.changeReadonly())},XsltForms_control.prototype.valueChanged=function(e,t){var r,s=this.element.node,o=document.getElementById(XsltForms_browser.getDocMeta(s.ownerDocument,"model")).xfElement,n=XsltForms_schema.getType(XsltForms_browser.getType(s)||"xsd_:string");if(e&&!(e instanceof Array)&&e.length>0&&n.parse)try{e=n.parse(e)}catch(e){}if(e instanceof Array){var l=XsltForms_browser.getValueItemsetCopy(s);r=!0;var a=0,i=e.length;if(l.length===i)for(r=!1;a<i;a++)if(l[a]!==e[a]){r=!0;break}}else r=e!==XsltForms_browser.getValue(s);(r||t)&&(e instanceof Array||this.currentValue instanceof Array?(XsltForms_browser.setValue(s,e),o.addChange(s),XsltForms_globals.addChange(o),o.setRebuilded(!0)):(XsltForms_globals.openAction("XsltForms_control.prototype.valueChanged"),XsltForms_browser.setValue(s,e),o.addChange(s),XsltForms_xmlevents.dispatch(o,"xforms-recalculate"),XsltForms_globals.refresh(),XsltForms_globals.closeAction("XsltForms_control.prototype.valueChanged")))},XsltForms_control.getXFElement=function(e){for(var t=null;!t&&e;)(t=e.xfElement)&&!t.isControl&&(t=null),e=e.parentNode;return t},XsltForms_control.focusHandler=function(){var e=XsltForms_control.getXFElement(this);XsltForms_globals.focus!==e?e.focus(!0):XsltForms_globals.posibleBlur=!1},XsltForms_control.blurHandler=function(){XsltForms_control.getXFElement(this)===XsltForms_globals.focus&&(XsltForms_globals.posibleBlur=!0,XsltForms_globals.blur())},new XsltForms_class("XsltForms_var","HTMLElement","xforms-var"),XsltForms_var.prototype=new XsltForms_control,XsltForms_var.prototype.clone=function(e){return new XsltForms_var(this.subform,e,this.name,this.binding)},XsltForms_var.prototype.dispose=function(){XsltForms_globals.counters.xvar--,XsltForms_control.prototype.dispose.call(this)},XsltForms_var.prototype.execute=function(e,t,r){t||(t=e.node||(XsltForms_globals.defaultModel.getInstanceDocument()?XsltForms_globals.defaultModel.getInstanceDocument().documentElement:null)),this.boundnodes=this.value.xpath_evaluate(t)},new XsltForms_class("XsltForms_tree","HTMLElement","xforms-tree"),XsltForms_tree.prototype=new XsltForms_element,XsltForms_tree.prototype.dispose=function(){this.root=null,this.selected=null,XsltForms_element.prototype.dispose.call(this)},XsltForms_tree.prototype.build_=function(e){var t=this.evaluateBinding(this.binding,e)[0];if(t){var r=[];this.buildTree(this.root,0,t,r),this.selected&&XsltForms_browser.inArray(this.selected,r)||this.select(this.root.firstChild)}},XsltForms_tree.prototype.select=function(e){var t=!0;!!this.selected&&(this.selected===e?t=!1:(XsltForms_browser.setClass(this.selected,"xforms-tree-item-selected",!1),XsltForms_browser.setClass(this.selected.childNodes[1],"xforms-tree-item-label-selected",!1))),t&&(this.element.node=e.node,this.selected=e,XsltForms_browser.setClass(e,"xforms-tree-item-selected",!0),XsltForms_browser.setClass(e.childNodes[1],"xforms-tree-item-label-selected",!0),XsltForms_globals.openAction(),XsltForms_globals.addChange(this),XsltForms_globals.addChange(document.getElementById(XsltForms_browser.getDocMeta(e.node.ownerDocument,"model")).xfElement),XsltForms_globals.closeAction())},XsltForms_tree.prototype.click=function(e){if("xforms-tree-item-button"===e.className){var t=e.nextSibling.nextSibling;t&&(t.style.display="none"!==t.style.display?"none":"block")}else XsltForms_browser.hasClass(e,"xforms-tree-item-label")&&this.select(e.parentNode)},XsltForms_tree.prototype.buildTree=function(e,t,r,s){var o=null,n=null,l=r.childNodes,a=0===l.length;if(s.push(r),e.childNodes.length<t+1)o=this.label.cloneNode(!0),e.appendChild(o),XsltForms_repeat.initClone(o);else{var i=(o=e.childNodes[t]).lastChild;"ul"===i.nodeName.toLowerCase()&&(n=i,a&&(XsltForms_globals.dispose(n),o.removeChild(n)))}o.node=r,XsltForms_browser.setClass(o,"xforms-tree-item-fork",!a),XsltForms_browser.setClass(o,"xforms-tree-item-leaf",a);for(var m=0,u=l.length;m<u;m++){var c=l[m];c.nodeType===Fleur.Node.ELEMENT_NODE&&(n||(n=XsltForms_browser.createElement("ul",o)),this.buildTree(n,m,c,s))}if(n)for(var d=n.childNodes.length,h=l.length;d>h;d--)XsltForms_globals.dispose(n.lastChild),n.removeChild(n.lastChild)},XsltForms_tree.prototype.refresh=function(){},XsltForms_avt.prototype=new XsltForms_control,XsltForms_avt.prototype.clone=function(e){return new XsltForms_avt(this.subform,e,this.attrname,this.binding)},XsltForms_avt.prototype.dispose=function(){XsltForms_control.prototype.dispose.call(this)},XsltForms_avt.prototype.setValue=function(e){"id"===this.attrname&&this.element.id===this.element.getAttribute("oldid")&&(XsltForms_globals.idalt||(XsltForms_globals.idalt={}),XsltForms_globals.idalt[this.element.id]=this.element),this.element.setAttribute(this.attrname,e)},XsltForms_avt.prototype.getValue=function(e){return this.element.getAttribute(this.attrname)},new XsltForms_class("XsltForms_case","HTMLElement","xforms-case"),XsltForms_case.prototype=new XsltForms_element,new XsltForms_class("XsltForms_component","HTMLElement","xforms-component"),XsltForms_component.prototype=new XsltForms_control,XsltForms_component.prototype.clone=function(e){return new XsltForms_component(this.subform,e,this.valoff,this.binding,this.resource)},XsltForms_component.prototype.dispose=function(){this.valueElement=null,XsltForms_globals.counters.component--,XsltForms_control.prototype.dispose.call(this)},XsltForms_component.prototype.blur=function(){},XsltForms_component.prototype.setValue=function(e){XsltForms_browser.forEach(this.valueElement.children[0].xfElement.subform.binds,"propagate")},new XsltForms_class("XsltForms_dialog","HTMLElement","xforms-dialog"),XsltForms_dialog.prototype=new XsltForms_element,new XsltForms_class("XsltForms_group","HTMLElement","xforms-group","<xforms-label></xforms-label><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint><xforms-body></xforms-body>"),new XsltForms_class("XsltForms_group","HTMLElement","xforms-switch"),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[xforms-name=\"group\"]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_group(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_group.prototype=new XsltForms_element,XsltForms_group.prototype.dispose=function(){XsltForms_globals.counters.group--,XsltForms_element.prototype.dispose.call(this)},XsltForms_group.prototype.clone=function(e){return new XsltForms_group(this.subform,e,this.binding,this.casebinding)},XsltForms_group.prototype.build_=function(e){var t=this.evaluateBinding(this.binding,e).head();if(this.element.node=t,this.depsNodesRefresh.push(t),this.casebinding){var r=this.evaluateBinding(this.casebinding,t);r&&XsltForms_toggle.toggle(XsltForms_globals.stringValue(r))}},XsltForms_group.prototype.refresh=function(){var e=this.element;!e.node||XsltForms_browser.getBoolMeta(e.node,"notrelevant")?this.element.setAttribute("xf-notrelevant",""):this.element.removeAttribute("xf-notrelevant")},XsltForms_group.prototype.collapse=function(){var e=this.element.children[0],t=this.element.children[1];XsltForms_browser.hasClass(e,"xforms-group-label-collapsed")?(XsltForms_browser.setClass(e,"xforms-group-label-collapsed",!1),XsltForms_browser.setClass(e,"xforms-group-label-expanded",!0),XsltForms_browser.setClass(t,"xforms-disabled",!1)):(XsltForms_browser.setClass(e,"xforms-group-label-collapsed",!0),XsltForms_browser.setClass(e,"xforms-group-label-expanded",!1),XsltForms_browser.setClass(t,"xforms-disabled",!0))},new XsltForms_class("XsltForms_include","HTMLElement","xforms-include"),XsltForms_include.prototype=new XsltForms_element,new XsltForms_class("XsltForms_input","HTMLElement","xforms-input","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),new XsltForms_class("XsltForms_input","HTMLElement","xforms-secret","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),new XsltForms_class("XsltForms_input","HTMLElement","xforms-textarea","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),XsltForms_input.prototype=new XsltForms_control,XsltForms_input.prototype.clone=function(e){return new XsltForms_input(this.subform,e,this.valoff,this.itype,this.binding,this.inputmode,this.incremental,this.delay,this.mediatype,this.bolAidButton,!0)},XsltForms_input.prototype.dispose=function(){if("application/xhtml+xml"===this.mediatype&&this.type.rte)switch(this.type.rte.toLowerCase()){case"tinymce":try{"3."===XsltForms_globals.jslibraries["http://www.tinymce.com"].substr(0,2)?(tinyMCE.execCommand("mceFocus",!1,this.cell.children[0].id),tinyMCE.execCommand("mceRemoveControl",!1,this.cell.children[0].id)):tinyMCE.editors[this.cell.children[1].id].remove()}catch(e){}break;case"ckeditor":this.rte&&(this.rte.destroy(),this.rte=null)}this.cell=null,this.calendarButton=null,XsltForms_globals.counters.input--,XsltForms_control.prototype.dispose.call(this)},XsltForms_input.prototype.initBody=function(type){var cell=this.cell,input=cell.children[0],tclass=type.class,initinfo={};if(!input||type!==this.type){var inputid=input?input.id:"";if(this.type=type,"boolean"!==tclass&&input&&this.itype===input.type){for(;cell.firstChild.nodeType===Fleur.Node.TEXT_NODE;)cell.removeChild(cell.firstChild);for(var i=cell.childNodes.length-1;i>=1;i--)cell.removeChild(cell.childNodes[i])}else for(;cell.firstChild;)cell.removeChild(cell.firstChild);if("boolean"===tclass)input=XsltForms_browser.createElement("input"),input.type="checkbox",""!==inputid&&(input.id=inputid),cell.appendChild(input);else{input&&this.itype===input.type||(input=XsltForms_browser.createElement("xforms-textarea"===this.element.localName.toLowerCase()?"textarea":"input",cell),"xforms-secret"===this.element.localName.toLowerCase()&&input.setAttribute("type","password")),""!==inputid&&(input.id=inputid),this.initEvents(input,"input"===this.itype||"secret"===this.itype),"time"===tclass?"5"===XsltForms_globals.htmlversion&&(XsltForms_browser.isChrome||XsltForms_browser.isOpera||XsltForms_browser.isEdge)&&(input.type="time"):"date"===tclass||"datetime"===tclass?"5"===XsltForms_globals.htmlversion&&(XsltForms_browser.isChrome||XsltForms_browser.isOpera||XsltForms_browser.isSafari)?"date"===tclass?input.type="date":"datetime"===tclass&&(input.type="datetime-local"):(this.calendarButton=XsltForms_browser.createElement("button",cell,XsltForms_browser.selectSingleNode("calendar.label",XsltForms_browser.config)?XsltForms_browser.i18n.get("calendar.label"):"...","xsltforms-aid-button"),this.calendarButton.setAttribute("type","button"),this.initFocus(this.calendarButton)):"number"===tclass?("5"===XsltForms_globals.htmlversion&&(XsltForms_browser.isChrome||XsltForms_browser.isOpera||XsltForms_browser.isSafari)&&(input.type="number","number"==typeof type.fractionDigits?input.step=String(Math.pow(1,-parseInt(type.fractionDigits,10))):input.step="any"),input.setAttribute("xf-numeric","")):input.removeAttribute("xf-numeric");var max=type.getMaxLength();max?input.maxLength=max:input.removeAttribute("maxLength");var tlength=type.getDisplayLength();tlength?input.size=tlength:input.removeAttribute("size")}}if(this.input=input,input&&"secret"===input.type)this.type=XsltForms_schema.getType("xsd_:string"),this.initEvents(input,!0);else if(input&&"textarea"===input.nodeName.toLowerCase()){if(this.type=type,"application/xhtml+xml"===this.mediatype&&type.rte)switch(type.rte.toLowerCase()){case"tinymce":input.id="xsltforms_"+String(this.element.xfIndex)+"_textarea",XsltForms_browser.debugConsole.write(input.id+": init="+XsltForms_globals.tinyMCEinit),XsltForms_globals.tinyMCEinit&&"3."===XsltForms_globals.jslibraries["http://www.tinymce.com"].substr(0,2)||(eval("initinfo = "+(type.appinfo?type.appinfo.replace(/(\r\n|\n|\r)/gm," "):"{}")),initinfo.mode="none",initinfo.Xsltforms_usersetup=initinfo.setup||function(){},XsltForms_globals.jslibraries["http://www.tinymce.com"]&&"3."!==XsltForms_globals.jslibraries["http://www.tinymce.com"].substr(0,2)?(initinfo.setup=function(e){initinfo.Xsltforms_usersetup(e),e.on("KeyUp",function(){XsltForms_control.getXFElement(document.getElementById(this.id)).valueChanged(this.getContent()||"")}),e.on("Change",function(e){XsltForms_control.getXFElement(document.getElementById(this.id)).valueChanged(e.target.getContent()||"")}),e.on("Undo",function(e){XsltForms_control.getXFElement(document.getElementById(this.id)).valueChanged(e.target.getContent()||"")}),e.on("Redo",function(e){XsltForms_control.getXFElement(document.getElementById(this.id)).valueChanged(e.target.getContent()||"")})},initinfo.selector="#"+input.id):initinfo.setup=function(e){initinfo.Xsltforms_usersetup(e),e.onKeyUp.add(function(e){XsltForms_control.getXFElement(document.getElementById(e.id)).valueChanged(e.getContent()||"")}),e.onChange.add(function(e){XsltForms_control.getXFElement(document.getElementById(e.id)).valueChanged(e.getContent()||"")}),e.onUndo.add(function(e){XsltForms_control.getXFElement(document.getElementById(e.id)).valueChanged(e.getContent()||"")}),e.onRedo.add(function(e){XsltForms_control.getXFElement(document.getElementById(e.id)).valueChanged(e.getContent()||"")})},XsltForms_browser.debugConsole.write(input.id+": initinfo="+initinfo),tinyMCE.init(initinfo),XsltForms_globals.tinyMCEinit=!0),tinyMCE.execCommand("mceAddEditor",!0,input.id);break;case"ckeditor":input.id="xsltforms_"+String(this.element.xfIndex)+"_textarea",CKEDITOR.replace||alert("CKEditor is not compatible with XHTML mode."),initinfo="",eval("initinfo = "+(type.appinfo?type.appinfo.replace(/(\r\n|\n|\r)/gm," "):"{}")),this.rte=CKEDITOR.replace(input.id,initinfo);var eltRefresh=function(e){var t=e.editor.getData();"\n"===t.substr(t.length-1)&&(t=t.substr(0,t.length-1));var r=XsltForms_control.getXFElement(document.getElementById(e.editor.name));XsltForms_browser.setBoolMeta(r.element.node,"unsafe","source"===e.editor.mode),r.valueChanged(t||"",!0)};this.rte.on("change",eltRefresh),this.rte.on("blur",eltRefresh),this.rte.on("mode",eltRefresh)}this.initEvents(input,!1)}this.initFocus(input,!0),this.input=input},XsltForms_input.prototype.setValue=function(e){var t,r=this.element.node,s=r?XsltForms_schema.getType(XsltForms_browser.getType(r)||"xsd_:string"):XsltForms_schema.getType("xsd_:string");if(this.input&&s===this.type||(this.initBody(s),this.changeReadonly()),"boolean"===s.class)this.input.checked="true"===e;else if(this.type.rte&&"tinymce"===this.type.rte.toLowerCase()&&tinymce.get(this.input.id))try{var o=tinymce.get(this.input.id);(o.getContent?o.getContent():o.contentDocument.body.innerHTML)!==e&&(this.input.value=e||"",o.setContent(e),t=o.contentDocument?o.contentDocument.body.innerHTML:o.getContent(),this.input.value=t||"",XsltForms_browser.debugConsole.write(this.input.id+": getContent() ="+t),XsltForms_browser.debugConsole.write(this.input.id+".value ="+this.input.value))}catch(t){this.input.value=e}else if(this.type.rte&&"ckeditor"===this.type.rte.toLowerCase()&&this.rte){var n=this.rte.getData();"\n"===n.substr(n.length-1)&&(n=n.substr(0,n.length-1)),n!==e&&(XsltForms_browser.debugConsole.write("value = '"+e+"'"),XsltForms_browser.debugConsole.write(this.input.id+": getData() = '"+this.rte.getData()+"'"),XsltForms_browser.debugConsole.write(this.input.id+".value = '"+this.input.value+"'"),this.input.value=e||"",this.rte.setData(e))}else if("date"===this.input.type.substr(0,4))this.input.value!==XsltForms_browser.getValue(r).substr(0,15)&&(this.input.value=XsltForms_browser.getValue(r).substr(0,15));else{var l=this.input.value;if(t=e,s.parse){if(l&&l.length>0)try{l=s.parse(l)}catch(e){}if(t&&t.length>0)try{t=s.parse(t)}catch(e){}}"time"===this.input.type||"date"===this.input.type||"datetime-local"===this.input.type?l!==t&&(this.input.value=t):l!==e&&(this.input.value=e||"")}},XsltForms_input.prototype.changeReadonly=function(){var e=this.element.node,t=e?XsltForms_schema.getType(XsltForms_browser.getType(e)||"xsd_:string"):XsltForms_schema.getType("xsd_:string");this.input&&("boolean"===t.class&&(this.input.disabled=this.readonly),this.input.readOnly=this.readonly,this.calendarButton&&(this.calendarButton.style.display=this.readonly?"none":""))},XsltForms_input.prototype.initEvents=function(e,t){var r="keyup";(XsltForms_browser.isEdge||XsltForms_browser.isIE11||"5"===XsltForms_globals.htmlversion&&(XsltForms_browser.isChrome||XsltForms_browser.isOpera||XsltForms_browser.isSafari))&&(r="input"),this.inputmode&&XsltForms_browser.events.attach(e,r,XsltForms_input.keyUpInputMode),t?(XsltForms_browser.events.attach(e,"keydown",XsltForms_input.keyDownActivate),XsltForms_browser.events.attach(e,"keypress",XsltForms_input.keyPressActivate),this.incremental&&XsltForms_browser.events.attach(e,r,XsltForms_input.keyUpIncrementalActivate)):this.incremental&&XsltForms_browser.events.attach(e,r,XsltForms_input.keyUpIncremental)},XsltForms_input.prototype.blur=function(e){XsltForms_globals.focus=null;var t,r=this.input;if(this.incremental){var s=this.element.node;if((t=r.value)&&t.length>0&&"time"!==r.type&&"date"!==r.type.substr(0,4)&&XsltForms_schema.getType(XsltForms_browser.getType(s)||"xsd_:string").format)try{r.value=XsltForms_browser.getValue(s,!0)}catch(e){}this.timer&&(window.clearTimeout(this.timer),this.timer=null,this.valueChanged(t))}else XsltForms_browser.assert(r,this.element.id),"checkbox"===r.type?t=r.checked?"true":"false":"textarea"!==r.nodeName.toLowerCase()?(t=r.value,"time"===r.type&&t&&5===t.length&&(t+=":00")):this.type.rte&&"tinymce"===this.type.rte.toLowerCase()?t=tinyMCE.get(r.id).getContent():this.type.rte&&"ckeditor"===this.type.rte.toLowerCase()?"\n"===(t=this.rte.getData()).substr(t.length-1)&&(t=t.substr(0,t.length-1)):t=r.value,this.valueChanged(t)},XsltForms_input.prototype.click=function(e){e===this.aidButton?(XsltForms_globals.openAction("XsltForms_input.prototype.click#1"),XsltForms_xmlevents.dispatch(this,"ajx-aid"),XsltForms_globals.closeAction("XsltForms_input.prototype.click#1")):e===this.input&&"boolean"===this.type.class?(XsltForms_globals.openAction("XsltForms_input.prototype.click#2"),this.valueChanged(e.checked?"true":"false"),XsltForms_xmlevents.dispatch(this,"DOMActivate"),XsltForms_globals.closeAction("XsltForms_input.prototype.click#2")):e===this.calendarButton&&XsltForms_calendar.show(e.previousSibling,"datetime"===this.type.class?XsltForms_calendar.SECONDS:XsltForms_calendar.ONLY_DATE)},XsltForms_input.keyUpInputMode=function(){var e=XsltForms_control.getXFElement(this);this.value=e.inputmode(this.value)},XsltForms_input.keyDownActivate=function(e){this.keyDownCode=e.keyCode},XsltForms_input.keyPressActivate=function(e){var t=XsltForms_control.getXFElement(this);this.keyPressCode=e.keyCode,13===e.keyCode&&(XsltForms_globals.openAction("XsltForms_input.keyUpActivate"),t.valueChanged(("time"===this.type&&this.value&&5===this.value.length?this.value+":00":this.value)||""),XsltForms_xmlevents.dispatch(t,"DOMActivate"),XsltForms_globals.closeAction("XsltForms_input.keyUpActivate"),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):e.cancelBubble=!0)},XsltForms_input.keyUpActivate=function(e){this.keyDownCode=this.keyPressCode=null},XsltForms_input.keyUpIncrementalActivate=function(e){var t=XsltForms_control.getXFElement(this);if(t.delay&&t.delay>0){t.timer&&window.clearTimeout(t.timer);var r=this;t.timer=window.setTimeout(function(){XsltForms_globals.openAction("XsltForms_input.keyUpIncrementalActivate#2"),t.valueChanged(("time"===r.type&&r.value&&5===r.value.length?r.value+":00":r.value)||""),XsltForms_globals.closeAction("XsltForms_input.keyUpIncrementalActivate#2")},t.delay)}else XsltForms_globals.openAction("XsltForms_input.keyUpIncrementalActivate#3"),t.valueChanged(("time"===this.type&&this.value&&5===this.value.length?this.value+":00":this.value)||""),XsltForms_globals.closeAction("XsltForms_input.keyUpIncrementalActivate#3");this.keyDownCode=this.keyPressCode=null},XsltForms_input.inputActivate=function(e){var t=XsltForms_control.getXFElement(this);XsltForms_globals.openAction("XsltForms_input.inputActivate#1"),t.valueChanged(this.value||""),XsltForms_globals.closeAction("XsltForms_input.inputActivate#1")},XsltForms_input.keyUpIncremental=function(){var e=XsltForms_control.getXFElement(this);if(e.delay&&e.delay>0){e.timer&&window.clearTimeout(e.timer);var t=this;e.timer=window.setTimeout(function(){XsltForms_globals.openAction("XsltForms_input.keyUpIncremental#1"),e.valueChanged(("time"===t.type&&t.value&&5===t.value.length?t.value+":00":t.value)||""),XsltForms_globals.closeAction("XsltForms_input.keyUpIncremental#1")},e.delay)}else XsltForms_globals.openAction("XsltForms_input.keyUpIncremental#2"),e.valueChanged(("time"===this.type&&this.value&&5===this.value.length?this.value+":00":this.value)||""),XsltForms_globals.closeAction("XsltForms_input.keyUpIncremental#2")},XsltForms_input.InputMode={lowerCase:function(e){return e.toLowerCase()},upperCase:function(e){return e.toUpperCase()},titleCase:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},digits:function(e){if(/^[0-9]*$/.exec(e))return e;alert("Character not valid");for(var t="",r=0,s=e.length;r<s;r++)-1!=="1234567890".indexOf(e.charAt(r))&&(t+=e.charAt(r));return t}},new XsltForms_class("XsltForms_output","HTMLElement","xforms-output","<xforms-label></xforms-label><xforms-body></xforms-body><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>");var XsltForms_output_svgtemplate=document.createElementNS("http://www.w3.org/2000/svg","tspan");function XsltForms_output(e,t){XsltForms_globals.counters.output++,this.init(e,t),this.controlName="output";for(var r,s=this.element.children||this.element.childNodes,o=0,n=s.length;o<n;o++)if("xforms-body"===s[o].localName.toLowerCase()||"body"===s[o].getAttribute("xforms-name")){this.cell=s[o];break}this.binding=new XsltForms_binding(e,t),this.hasBinding=!0,Array.prototype.slice.call(t.children||t.childNodes).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-mediatype":r=e}}),this.mediatype=r?r.hasAttribute("xf-value")?new XsltForms_binding(this.subform,r):r.textContent:t.getAttribute("xf-mediatype"),this.complex="application/xhtml+xml"===this.mediatype||"text/html"===this.mediatype||"text/markdown"===this.mediatype,this.isOutput=!0}function XsltForms_item(e,t,r){XsltForms_globals.counters.item++,this.init(e,t),this.controlName="item"}function XsltForms_itemset(e,t){var r,s,o;XsltForms_globals.counters.itemset++,this.init(e,t),this.controlName="itemset",this.nodesetBinding=new XsltForms_binding(e,t),Array.prototype.slice.call(t.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-label":r=e;break;case"xforms-value":s=e;break;case"xforms-copy":o=e}}),this.labelContent=r?r.innerHTML:"",this.labelBinding=r&&r.hasAttribute("xf-ref")?new XsltForms_binding(e,r):null,this.valueBinding=s?new XsltForms_binding(e,s):null,this.copyBinding=o?new XsltForms_binding(e,o):null,this.hasBinding=!0}function XsltForms_range(e,t){XsltForms_globals.counters.upload++,this.init(e,t),this.controlName="range",this.binding=new XsltForms_binding(e,t),this.incremental="false"!==t.getAttribute("xf-incremental"),this.hasBinding=!0,this.start=parseFloat(t.getAttribute("xf-start")||0),this.end=parseFloat(t.getAttribute("xf-end")||0),this.step=parseFloat(t.getAttribute("xf-step")||1),this.value="";for(var r=this.element.children,s=0,o=r.length;s<o;s++){var n=r[s].localName.toLowerCase();"xforms-body"===n?this.cell=r[s]:"xforms-hint"===n&&"minimal"===r[s].getAttribute("xf-appearance")&&t.setAttribute("title",r[s].textContent)}this.initBody()}function XsltForms_repeat(e,t){if(this.init(e,t),this.controlName="repeat",this.index=1,this.isRepeat=!0,this.hasBinding=!0,"xforms-repeat"===t.localName.toLowerCase()||"repeat"===t.getAttribute("xforms-name")){if(this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(e,t):null,this.nbsiblings=0,this.root=t,this.isItemset=!1,!(t.firstChild.localName&&"xforms-repeat-item"===t.firstChild.localName.toLowerCase()||t.firstChild.getAttribute&&"repeat-item"===t.firstChild.getAttribute("xforms-name"))){var r;"xforms-repeat"===t.localName.toLowerCase()?r=document.createElement("xforms-repeat-item"):(r=document.createElementNS(t.namespaceURI,t.localName)).setAttribute("xforms-name","repeat-item");for(var s=Array.prototype.slice.call(this.element.childNodes),o=0,n=s.length;o<n;o++)r.appendChild(s[o]);r.varScope=t.varScope,t.varScope=null,t.appendChild(r)}}else t.hasAttribute("xf-repeat-ref")||t.hasAttribute("xf-repeat-bind")?this.binding=new XsltForms_binding(e,t,"xf-repeat-ref"):t.hasAttribute("data-xf-repeat-ref")||t.hasAttribute("data-xf-repeat-bind")?this.binding=new XsltForms_binding(e,t,"data-xf-repeat-ref"):this.binding=null,this.nbsiblings=0,this.root=t}function XsltForms_select(e,t,r){this.inputname="xsltforms-select-"+String(XsltForms_globals.counters.select++),this.init(e,t),this.controlName=t.localName.substr(7),this.binding=new XsltForms_binding(e,t),this.min=t.getAttribute("xf-min"),this.min=this.min?Math.max(Number(this.min),1):1,this.max=t.getAttribute("xf-max"),this.max=this.max?Math.max(Number(this.max),this.min):"xforms-select1"===t.localName.toLowerCase()?1:null,this.inputtype=1===this.max?"radio":"checkbox",this.full="full"===t.getAttribute("xf-appearance"),this.compact="compact"===t.getAttribute("xf-appearance"),this.open="open"===t.getAttribute("xf-selection"),this.incremental="false"!==t.getAttribute("xf-incremental");for(var s,o=Array.prototype.slice.call(this.element.children),n=0,l=o.length;n<l;n++)"xforms-body"===(s=o[n].localName.toLowerCase())?this.cell=o[n]:"xforms-hint"===s&&"minimal"===o[n].getAttribute("xf-appearance")&&t.setAttribute("title",o[n].textContent);for(n=0,l=o.length;n<l;n++)"xforms-item"!==(s=o[n].localName.toLowerCase())&&"xforms-itemset"!==s&&"xforms-choices"!==s||this.cell.appendChild(o[n]);this.isClone=r,this.hasBinding=!0,this.outRange=!1}function XsltForms_trigger(e,t){switch(this.init(e,t),t.localName.toLowerCase()){case"xforms-trigger":this.binding=t.hasAttribute("xf-ref")||t.hasAttribute("xf-bind")?new XsltForms_binding(e,t):null;break;case"xforms-submit":var r=document.createElement("xforms-send");r.setAttribute("ev-event","DOMActivate"),t.hasAttribute("xf-submission")&&r.setAttribute("xf-submission",t.getAttribute("xf-submission")),t.appendChild(r),XsltForms_classes["xforms-dispatch"].classbinding(e,r)}var s=t.getAttribute("xf-appearance");this.appearance=s||"full",XsltForms_globals.counters.trigger++,this.controlName="trigger",this.hasBinding=Boolean(this.binding);for(var o=Array.prototype.slice.call(this.element.children),n=0,l=o.length;n<l;n++){var a=o[n].localName.toLowerCase();"xforms-body"===a?this.cell=o[n]:"xforms-hint"===a&&"minimal"===o[n].getAttribute("xf-appearance")&&t.setAttribute("title",o[n].textContent)}this.isTrigger=!0,this.initBody()}function XsltForms_upload(e,t){XsltForms_globals.counters.upload++,this.init(e,t),this.controlName="upload",this.binding=new XsltForms_binding(e,t),this.incremental="true"===t.getAttribute("xf-incremental");for(var r=this.element.children,s=0,o=r.length;s<o;s++){var n=r[s].localName.toLowerCase();"xforms-body"===n?this.cell=r[s]:"xforms-hint"===n&&"minimal"===r[s].getAttribute("xf-appearance")&&t.setAttribute("title",r[s].textContent)}this.hasBinding=!0;var l,a,i,m=[];Array.prototype.slice.call(t.children).forEach(function(t){switch(t.localName.toLowerCase()){case"xforms-filename":a=t;break;case"xforms-mediatype":i=t;break;case"xforms-resource":l=t;break;case"xforms-header":var r,s=[];Array.prototype.slice.call(t.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-name":r=e;break;case"xforms-value":s.push(e)}}),m.push({nodeset:t.hasAttribute("xf-ref")?new XsltForms_binding(e,t):null,name:r?r.hasAttribute("xf-value")?new XsltForms_binding(e,r):r.textContent:t.getAttribute("xf-name"),combine:t.getAttribute("xf-combine")||"append",values:s.map(function(t){return t.hasAttribute("xf-value")?new XsltForms_binding(e,t):t.textContent})})}}),this.mediatype=i?i.hasAttribute("xf-value")||i.hasAttribute("xf-ref")?new XsltForms_binding(e,i):i.textContent:t.getAttribute("xf-mediatype"),this.filename=a?a.hasAttribute("xf-value")||a.hasAttribute("xf-ref")?new XsltForms_binding(e,a):a.textContent:t.getAttribute("xf-filename"),this.headers=m,this.resource=l?l.hasAttribute("xf-value")?new XsltForms_binding(e,l):l.textContent:t.getAttribute("xf-resource"),this.value="",this.initBody()}function XsltForms_label(e,t){XsltForms_globals.counters.label++,this.init(e,t),this.controlName="label",(t.getAttribute("xf-ref")||t.getAttribute("xf-value")||t.getAttribute("xf-bind"))&&(this.hasBinding=!0,this.binding=new XsltForms_binding(e,t))}function XsltForms_calendar(){var e=XsltForms_browser.isXhtml?document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body")[0]:document.getElementsByTagName("body")[0];this.element=XsltForms_browser.createElement("table",e,null,"xsltforms-calendar");var t=XsltForms_browser.createElement("thead",this.element),r=XsltForms_browser.createElement("tr",t),s=XsltForms_browser.createElement("td",r,null,"xsltforms-calendar-title");s.colSpan=7,this.selectMonth=XsltForms_browser.createElement("select",s),XsltForms_browser.events.attach(this.selectMonth,"change",function(){XsltForms_calendar.INSTANCE.refresh()});for(var o=0;o<12;o++){XsltForms_browser.createElement("option",this.selectMonth,XsltForms_browser.i18n.get("calendar.month"+o)).setAttribute("value",o)}this.inputYear=XsltForms_browser.createElement("input",s),this.inputYear.readOnly=!0,XsltForms_browser.events.attach(this.inputYear,"mouseup",function(){XsltForms_calendar.INSTANCE.yearList.show()}),XsltForms_browser.events.attach(this.inputYear,"change",function(){XsltForms_calendar.INSTANCE.refresh()});var n=XsltForms_browser.createElement("button",s,"X");n.setAttribute("type","button"),n.setAttribute("title",XsltForms_browser.i18n.get("calendar.close","Close")),XsltForms_browser.events.attach(n,"click",function(){XsltForms_calendar.close()});for(var l=XsltForms_browser.createElement("tr",t,null,"xsltforms-calendar-names"),a=parseInt(XsltForms_browser.i18n.get("calendar.initDay"),10),i=0;i<7;i++){var m=(i+a)%7;this.createElement(l,"xsltforms-calendar-name",XsltForms_browser.i18n.get("calendar.day"+m))}this.tBody=XsltForms_browser.createElement("tbody",this.element);for(var u=function(e){var t=XsltForms_browser.events.getTarget(e).childNodes[0].nodeValue,r=XsltForms_calendar.INSTANCE;if(""!==t){r.day=t;var s=new Date(r.inputYear.value,r.selectMonth.value,r.day);r.isTimestamp?(s.setSeconds(r.inputSec.value),s.setMinutes(r.inputMin.value),s.setHours(r.inputHour.value),r.input.value=XsltForms_browser.i18n.format(s,null,!0)):r.input.value=XsltForms_browser.i18n.formatDate(s),XsltForms_calendar.close(),XsltForms_browser.events.dispatch(r.input,"keyup"),r.input.focus()}},c=0;c<6;c++)for(var d=XsltForms_browser.createElement("tr",this.tBody),h=0;h<7;h++)this.createElement(d,"xsltforms-calendar-day"," ",1,u);var p=XsltForms_browser.createElement("tfoot",this.element),X=XsltForms_browser.createElement("tr",p),f=XsltForms_browser.createElement("td",X);f.colSpan=7,this.inputHour=XsltForms_browser.createElement("input",f),this.inputHour.readOnly=!0,XsltForms_browser.events.attach(this.inputHour,"mouseup",function(){XsltForms_calendar.INSTANCE.hourList.show()}),f.appendChild(document.createTextNode(":")),this.inputMin=XsltForms_browser.createElement("input",f),this.inputMin.readOnly=!0,XsltForms_browser.events.attach(this.inputMin,"mouseup",function(){XsltForms_calendar.INSTANCE.minList.show()}),f.appendChild(document.createTextNode(":")),this.inputSec=XsltForms_browser.createElement("input",f),this.inputSec.readOnly=!0,XsltForms_browser.events.attach(this.inputSec,"mouseup",function(){XsltForms_calendar.INSTANCE.type>=XsltForms_calendar.SECONDS&&XsltForms_calendar.INSTANCE.secList.show()}),this.yearList=new XsltForms_numberList(s,"xsltforms-calendarList",this.inputYear,1900,2050),this.hourList=new XsltForms_numberList(f,"xsltforms-calendarList",this.inputHour,0,23,2),this.minList=new XsltForms_numberList(f,"xsltforms-calendarList",this.inputMin,0,59,2),this.secList=new XsltForms_numberList(f,"xsltforms-calendarList",this.inputSec,0,59,2)}function XsltForms_type(){}function XsltForms_schema(e,t,r,s,o){if(XsltForms_schema.all[t])throw XsltForms_globals.error(XsltForms_globals.defaultModel,"xforms-link-exception","More than one schema with the same namespace declaration"),new Error("Error");if(""===t)return XsltForms_schema.all["http://www.w3.org/2002/xforms"];if(this.subform=e,this.name=r,this.ns=t,this.types={},this.prefixes=s||{},XsltForms_schema.all[t]=this,e&&e.schemas.push(this),o)for(var n,l=o.documentElement;l;){switch(l.localName||l.baseName){case"simpleType":n=(new XsltForms_atomicType).setSchema(this).setName(l.getAttribute("name"));break;case"restriction":if(n.put("base",l.getAttribute("base")),l.getAttributeNS)n.put("rte",l.getAttributeNS("http://www.agencexml.com/xsltforms","rte"));else{var a=l.attributes.getQualifiedItem("rte","http://www.agencexml.com/xsltforms");a&&n.put("rte",a.nodeValue)}break;case"length":case"minLength":case"maxLength":case"enumeration":case"whiteSpace":case"maxInclusive":case"minInclusive":case"maxExclusive":case"minExclusive":case"totalDigits":case"fractionDigits":case"maxScale":case"minScale":n.put(l.localName||l.baseName,l.getAttribute("value"));break;case"pattern":n.put("pattern",new RegExp("^("+l.getAttribute("value").replace(/\//g,"\\/")+")$"));break;case"appinfo":n.put("appinfo",l.firstChild.nodeValue)}if(l.firstChild)l=l.firstChild;else if(l.nextSibling)l=l.nextSibling;else{do{l=l.parentNode}while(l&&!l.nextSibling);l&&(l=l.nextSibling)}}}function XsltForms_atomicType(){this.patterns=[]}function XsltForms_listType(){this.whiteSpace="collapse"}function XsltForms_unionType(e){this.baseTypes=[],this.memberTypes=e?e.split(" "):[]}XsltForms_output_svgtemplate.innerHTML="<tspan xmlns='http://www.w3.org/2000/svg' xforms-name='label'/><tspan xmlns='http://www.w3.org/2000/svg' xforms-name='body'/>",XsltForms_output_svgtemplate.children||(XsltForms_output_svgtemplate.appendChild(document.createElementNS("http://www.w3.org/2000/svg","tspan")),XsltForms_output_svgtemplate.firstChild.setAttribute("xforms-name","label"),XsltForms_output_svgtemplate.appendChild(document.createElementNS("http://www.w3.org/2000/svg","tspan")),XsltForms_output_svgtemplate.lastChild.setAttribute("xforms-name","body")),XsltForms_output_svgtemplate=Array.prototype.slice.call(XsltForms_output_svgtemplate.childNodes),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[xforms-name=\"output\"]')).forEach(function(elt) { if (!elt.xfElement) { XsltForms_class._applyTemplate(elt, XsltForms_output_svgtemplate); elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_output(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_output.prototype=new XsltForms_control,XsltForms_output.prototype.clone=function(e){return new XsltForms_output(this.subform,e,this.valoff,this.binding,this.mediatype)},XsltForms_output.prototype.dispose=function(){this.cell=null,XsltForms_globals.counters.output--,XsltForms_control.prototype.dispose.call(this)},XsltForms_output.prototype.setValue=function(e){var t=this.cell,r=this.mediatype;if(r&&r.bind_evaluate&&(r=XsltForms_globals.stringValue(r.bind_evaluate(this.subform,this.boundnodes[0]))),r&&0===r.indexOf("image/")&&"image/svg+xml"!==r)t.innerHTML="<img src='"+e+"'>";else if("xforms-body"===t.nodeName.toLowerCase()||"tspan"===t.nodeName.toLowerCase()||"xforms-label"===t.nodeName.toLowerCase()){if("application/xhtml+xml"===r||"text/html"===r){for(;t.firstChild;)t.removeChild(t.firstChild);e&&(t.innerHTML=e)}else if("text/markdown"===r){for(;t.firstChild;)t.removeChild(t.firstChild);e&&(t.innerHTML=XsltForms_browser.md2string(e))}else if("image/svg+xml"===r){for(;t.firstChild;)t.removeChild(t.firstChild);if(XsltForms_browser.isIE&&!XsltForms_browser.isIE9){var s=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","script"):document.createElement("script");s.setAttribute("type","text/xaml"),s.setAttribute("id",this.element.id+"-xaml"),s.text=XsltForms_browser.transformText(e,XsltForms_browser.ROOT+"svg2xaml.xsl",!1,"width",t.currentStyle.width,"height",t.currentStyle.height),t.appendChild(s);var o=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","object"):document.createElement("object");o.setAttribute("width",t.currentStyle.width+"px"),o.setAttribute("height",t.currentStyle.height+"px"),o.setAttribute("type","application/x-silverlight"),o.setAttribute("style","min-width: "+t.currentStyle.width+"px");var n=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","param"):document.createElement("param");n.setAttribute("name","source"),n.setAttribute("value","#"+this.element.id+"-xaml"),o.appendChild(n);var l=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","param"):document.createElement("param");l.setAttribute("name","onload"),l.setAttribute("value","onLoaded"),o.appendChild(l);var a=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","param"):document.createElement("param");a.setAttribute("name","iswindowless"),a.setAttribute("value","true"),o.appendChild(a),t.appendChild(o)}else if(XsltForms_browser.isXhtml){var i=window.getComputedStyle(t,null);XDocument.parse(e,t),t.firstChild.setAttribute("width",i.getPropertyValue("min-width")),t.firstChild.setAttribute("height",i.getPropertyValue("min-height"))}else{var m=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","object"):document.createElement("object");m.setAttribute("type","image/svg+xml"),m.setAttribute("data","data:image/svg+xml,"+e),t.appendChild(m)}}else if(XsltForms_browser.setValue(t,e),"xforms-label"===t.parentElement.parentElement.nodeName.toLowerCase())for(var u=t;u.parentElement;)if((u=u.parentElement).nodeName.toLowerCase().startsWith("xforms-select")){u.xfElement.full||u.xfElement.initBody();break}}else XsltForms_browser.setValue(t,e)},XsltForms_output.prototype.getValue=function(e){var t=this.cell;if("span"===t.nodeName.toLowerCase())return XsltForms_browser.getValue(t,e);var r=t.src;if(r&&e&&t.type.format)try{r=t.type.format(r)}catch(e){}return r},new XsltForms_class("XsltForms_item","HTMLElement","xforms-item","<xforms-body></xforms-body><xforms-label></xforms-label>"),XsltForms_item.prototype=new XsltForms_element,XsltForms_item.prototype.clone=function(e){return new XsltForms_item(this.subform,e,this.bindingL,this.bindingV,this.copyBinding)},XsltForms_item.prototype.dispose=function(){this.input=null,this.label=null,XsltForms_globals.counters.item--,XsltForms_element.prototype.dispose.call(this)},XsltForms_item.prototype.build_=function(e){var t,r=this.element,s=r.parentNode.xfElement;s&&s.isRepeat?this.ctx=e=r.node:r.node=e,this.bindingL&&(t=this.evaluateBinding(this.bindingL,e),Fleur.minimal?"object"==typeof t?(r.nodeL=t[0],r.valueL=null,this.depsNodesRefresh.push(r.nodeL)):(r.nodeL=null,r.valueL=t):t.nodeType!==Fleur.Node.TEXT_NODE?(r.nodeL=t.head(),r.valueL=null):(r.nodeL=null,r.valueL=t.data)),this.bindingV&&(t=this.evaluateBinding(this.bindingV,e),Fleur.minimal?"object"==typeof t?(r.nodeV=t[0],r.valueV=null,this.depsNodesRefresh.push(r.nodeV)):(r.nodeV=null,r.valueV=t):t.nodeType!==Fleur.Node.TEXT_NODE?(r.nodeV=t.head(),r.valueV=null):(r.nodeV=null,r.valueV=t.data));var o=this.copyBinding?this.evaluateBinding(this.copyBinding,e)[0]:null;if(this.copyBinding&&o){r.parentNode.parentNode.parentNode.parentNode.xfElement.hasCopy=!0,this.depsNodesRefresh.push(o);try{r.copy=XsltForms_browser.saveNode(o,"application/xml")}catch(e){}}},XsltForms_item.prototype.refresh=function(){var e=this.element;if("option"===e.nodeName.toLowerCase()){if(e.nodeL)try{e.text=XsltForms_browser.getValue(e.nodeL,!0)}catch(e){}else e.valueL&&(e.text=e.valueL);if(e.nodeV)try{e.value=XsltForms_browser.getValue(e.nodeV)}catch(e){}else e.valueV&&(e.value=e.valueV)}else e.nodeL?XsltForms_browser.setValue(this.label,XsltForms_browser.getValue(e.nodeL,!0)):e.valueL&&XsltForms_browser.setValue(this.label,e.valueL),e.nodeV?this.input.value=XsltForms_browser.getValue(e.nodeV):e.valueV?this.input.value=e.valueV:e.copy&&(this.input.value=this.input.copy=e.copy)},XsltForms_item.prototype.click=function(e){var t=this.input;if(t){var r=XsltForms_control.getXFElement(this.element);r.element.node.readonly||e!==t||r.itemClick(t.value)}},new XsltForms_class("XsltForms_itemset","HTMLElement","xforms-itemset"),XsltForms_itemset.prototype=new XsltForms_element,XsltForms_itemset.prototype.build_=function(e){if(!this.element.getAttribute("cloned")){this.nodes=this.evaluateBinding(this.nodesetBinding,e).toArray();var t=this.element,r=this;0!==this.nodes.length?this.element.setAttribute("xf-bound",""):this.element.removeAttribute("xf-bound");var s=this.subform;Array.prototype.slice.call(t.querySelectorAll("xforms-item")).forEach(function(e){t.removeChild(e)}),this.nodes.reverse().forEach(function(e){var o,n,l,a,i,m=document.createElement("xforms-item");if(r.labelBinding)if("object"==typeof(o=r.evaluateBinding(r.labelBinding,e))){n=o[0],r.depsNodesRefresh.push(n);try{a=XsltForms_browser.getValue(n,!0)}catch(e){}}else a=o;else a=r.labelContent;if(o=r.valueBinding?r.evaluateBinding(r.valueBinding,e):null,r.valueBinding&&o)if(Fleur.minimal)if("object"==typeof o){l=o[0],r.depsNodesRefresh.push(l);try{i=XsltForms_browser.getValue(l)}catch(e){}}else i=o;else if(o.nodeType!==Fleur.Node.TEXT_NODE&&o.head){l=o.head(),r.depsNodesRefresh.push(l);try{i=XsltForms_browser.getValue(l)}catch(e){}}else i=o.data||o;var u=r.copyBinding?r.evaluateBinding(r.copyBinding,e).head():null;if(r.copyBinding&&u){t.parentNode.parentNode.xfElement.hasCopy=!0,r.depsNodesRefresh.push(u);try{i=Fleur.Serializer.escapeXML(XsltForms_browser.saveNode(u,"application/xml"))}catch(e){}}m.innerHTML="<xforms-label>"+a+"</xforms-label><xforms-value"+(r.copyBinding&&u?" xf-copy":"")+">"+i+"</xforms-value>",t.insertBefore(m,t.firstChild),r.labelBinding?XsltForms_classes["xforms-item"].classbinding(s,m):(m.node=e,XsltForms_repeat.initClone(s,m))});var o=t.parentNode.parentNode;"xforms-body"===o.localName.toLowerCase()&&(o=o.parentNode);var n=o.xfElement;n instanceof Array&&(n=n[0]),n.initBody(),n.setValue(n.currentValue)}},XsltForms_itemset.prototype.refresh=function(){},XsltForms_itemset.prototype.clone=function(e){return new XsltForms_itemset(this.subform,e,this.nodesetBinding,this.labelBinding,this.valueBinding,this.copyBinding)},XsltForms_itemset.prototype.dispose=function(){XsltForms_globals.counters.itemset--,XsltForms_element.prototype.dispose.call(this)},XsltForms_itemset.prototype.refresh_=function(e,t){var r,s,o,n=this.nodes[t];if("object"==typeof(r=this.evaluateBinding(this.labelBinding,n))){s=r[0],this.depsNodesRefresh.push(s);try{e.text=XsltForms_browser.getValue(s,!0)}catch(e){}}else e.text=r;if(r=this.valueBinding?this.evaluateBinding(this.valueBinding,n):null,this.valueBinding&&r)if("object"==typeof r){o=r[0],this.depsNodesRefresh.push(o);try{e.value=XsltForms_browser.getValue(o)}catch(e){}}else e.value=r;var l=this.copyBinding?this.evaluateBinding(this.copyBinding,n)[0]:null;if(this.copyBinding&&l){e.parentNode.parentNode.parentNode.xfElement.hasCopy=!0,this.depsNodesRefresh.push(l);try{e.value=XsltForms_browser.saveNode(l,"application/xml"),e.setAttribute("xf-copy","")}catch(e){}}},new XsltForms_class("XsltForms_range","HTMLElement","xforms-range","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),XsltForms_range.prototype=new XsltForms_control,XsltForms_range.prototype.clone=function(e){return new XsltForms_range(this.subform,e,this.valoff,this.binding,this.incremental,this.start,this.end,this.step,this.bolAidButton,!0)},XsltForms_range.prototype.dispose=function(){this.cell=null,XsltForms_globals.counters.range--,XsltForms_control.prototype.dispose.call(this)},XsltForms_range.railfocus=function(e){for(var t=XsltForms_browser.events.getTarget(e);t&&t.nodeType===Fleur.Node.ELEMENT_NODE;){var r=t.xfElement;if(r){alert("rail_focus "+r.element.id);break}t=t.parentNode}},XsltForms_range.raildown=function(e){for(var t=XsltForms_browser.events.getTarget(e);t&&t.nodeType===Fleur.Node.ELEMENT_NODE;){var r=parent.xfElement;if(r){var s=XsltForms_browser.getEventPos(e).x+(void 0!==window.pageLeft?window.pageLeft:document.documentElement&&void 0!==document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);for(t=r.rail;t;)s-=t.offsetLeft,t=t.offsetParent;var o=r.element.node,n=Math.round(s/r.rail.clientWidth*(r.end-r.start)/r.step)*r.step+r.start,l=XsltForms_schema.getType(XsltForms_browser.getType(o)||"xsd_:string");l.format&&(n=l.format(n)),r.setValue(n),r.incremental&&(XsltForms_globals.openAction("XsltForms_range#1"),r.valueChanged(String(r.value)),XsltForms_globals.closeAction("XsltForms_range#1")),document.activeElement&&!document.activeElement===r.cursor||r.cursor.focus();break}t=t.parentNode}},XsltForms_range.cursordown=function(e){for(var t=XsltForms_browser.events.getTarget(e);t&&t.nodeType===Fleur.Node.ELEMENT_NODE;){var r=t.xfElement;if(r){for(r.offset=XsltForms_browser.getEventPos(e).x+(void 0!==window.pageLeft?window.pageLeft:document.documentElement&&void 0!==document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),t=r.cursor;t;)r.offset-=t.offsetLeft,t=t.offsetParent;document.onmousemove=function(e){for(var t=XsltForms_browser.isIE?document.activeElement:XsltForms_browser.events.getTarget(e);t&&t.nodeType===Fleur.Node.ELEMENT_NODE;){var r=t.xfElement;if(r){var s=XsltForms_browser.getEventPos(e).x-r.offset+(void 0!==window.pageLeft?window.pageLeft:document.documentElement&&void 0!==document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);for(t=r.rail;t;)s-=t.offsetLeft,t=t.offsetParent;var o=r.element.node,n=Math.round(s/r.rail.clientWidth*(r.end-r.start)/r.step)*r.step+r.start;n=Math.min(Math.max(n,r.start),r.end);var l=XsltForms_schema.getType(XsltForms_browser.getType(o)||"xsd_:string");l.format&&(n=l.format(n)),r.setValue(n),r.incremental&&(XsltForms_globals.openAction("XsltForms_range#2"),r.valueChanged(String(r.value)),XsltForms_globals.closeAction("XsltForms_range#2")),document.activeElement&&!document.activeElement===r.cursor||r.cursor.focus();break}t=t.parentNode}},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null},document.activeElement&&!document.activeElement===r.cursor||r.cursor.focus();break}t=t.parentNode}"function"==typeof e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&(e.cancelBubble=!0),e.preventDefault&&e.preventDefault()},XsltForms_range.prototype.initBody=function(){0===this.cell.children.length&&(this.cell.innerHTML="<xforms-range-rail><xforms-range-cursor></xforms-range-cursor></xforms-range-rail><xforms-range-value></xforms-range-value>"),this.rail=this.cell.children[0],this.cursor=this.rail.children[0],this.outputvalue=this.cell.children[1],XsltForms_browser.events.attach(this.rail,"focus",XsltForms_range.railfocus),XsltForms_browser.events.attach(this.rail,"mousedown",XsltForms_range.raildown),XsltForms_browser.events.attach(this.cursor,"mousedown",XsltForms_range.cursordown),this.initFocus(this.cell.children[0],!0)},XsltForms_range.prototype.setValue=function(e){this.outputvalue.innerHTML=e;var t=this.element.node,r=XsltForms_schema.getType(XsltForms_browser.getType(t)||"xsd_:string").parse;r&&(e=r(e)),this.value!==e&&(this.value=e,this.cursor.style.left=Math.round(this.rail.clientWidth*(this.value-this.start)/(this.end-this.start))+"px")},XsltForms_range.prototype.blur=function(e){XsltForms_globals.focus=null,this.incremental||(XsltForms_browser.assert(this.input,this.element.id),this.valueChanged(this.value))},new XsltForms_class("XsltForms_repeat","HTMLElement","xforms-repeat"),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[xf-repeat-ref]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_repeat(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[xf-repeat-bind]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_repeat(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[data-xf-repeat-ref]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_repeat(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[data-xf-repeat-bind]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_repeat(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_browser.addLoadListener(new Function("Array.prototype.slice.call(document.querySelectorAll('*[xforms-name=\"repeat\"]')).forEach(function(elt) { if (!elt.xfElement) { elt.xfIndex = XsltForms_collection.length; XsltForms_collection.push(elt); elt.xfElement = new XsltForms_repeat(XsltForms_subform.subforms['xsltforms-mainform'], elt); } });")),XsltForms_repeat.prototype=new XsltForms_element,XsltForms_repeat.prototype.dispose=function(){this.root=null,XsltForms_globals.counters.repeat--,XsltForms_element.prototype.dispose.call(this)},XsltForms_repeat.prototype.setIndex=function(e){if(0===this.nodes.length)this.index=0;else if(this.index!==e){var t=this.nodes[e-1];t&&(XsltForms_globals.openAction("XsltForms_repeat.prototype.setIndex"),this.index=e,this.element.node=t,XsltForms_globals.addChange(this),XsltForms_globals.addChange(document.getElementById(XsltForms_browser.getDocMeta(t.ownerDocument,"model")).xfElement),XsltForms_globals.closeAction("XsltForms_repeat.prototype.setIndex"))}},XsltForms_repeat.prototype.deleteNode=function(e){for(var t=[],r=this.nodes,s=0,o=r.length;s<o;s++)e!==r[s]&&t.push(r[s]);this.nodes=t,this.setIndex(this.index===r.length?this.index-1:this.index)},XsltForms_repeat.prototype.insertNode=function(e,t){var r,s,o=this.nodes;if(t){var n=null;for(r=0,s=o.length;r<s&&null===n;r++)for(n=t;null!==n&&n!==o[r];)n=n.nextSibling}if(n){var l=[],a=1;for(r=0,s=o.length;r<s;r++)n===o[r]&&(l.push(e),a=r+1),l.push(o[r]);this.nodes=l,this.setIndex(a)}else o.push(e),this.setIndex(o.length)},XsltForms_repeat.prototype.build_=function(e){var t,r,s,o,n=this.evaluateBinding(this.binding,e),l=[];if(n.isSingle())l[0]=n;else for(let e=0,t=n.childNodes.length;e<t;e++)XsltForms_browser.getBoolMeta(n.childNodes[e],"notrelevant")||l.push(n.childNodes[e]);var a={ids:{},fors:{}};this.nodes=l;let i=l.length;if(0===this.nbsiblings){for(r=this.root;r.firstChild.nodeType===Fleur.Node.TEXT_NODE;)r.removeChild(r.firstChild);t=r.children?r.children[0]:r.childNodes[0],XsltForms_repeat.forceOldId(t);for(var m=s=r.children?r.children.length:r.childNodes.length;m<i;m++)o=t.cloneNode(!0),Array.prototype.slice.call(o.querySelectorAll(".cke")).forEach(function(e){e.parentNode.removeChild(e)}),r.appendChild(o),XsltForms_repeat.initClone(this.subform,o,a);for(var u=i;u<s&&r.childNodes.length>1;u++)XsltForms_globals.dispose(r.lastChild),r.removeChild(r.lastChild);for(var c=0;c<i;c++)XsltForms_browser.setMeta(l[c],"repeat",String(this.element.xfIndex)),r.children?r.children[c].node=l[c]:r.childNodes[c].node=l[c]}else{t=this.root,XsltForms_repeat.forceOldId(t);for(var d=(r=t.parentNode).firstChild,h=0;d&&d!==t;)h++,d=d.nextSibling;s=1;for(var p=r.childNodes[h+this.nbsiblings];p&&(p.id===this.element.id||p.attributes.oldid.value===this.element.id);)s++,p=r.childNodes[h+s*this.nbsiblings];for(var X=s;X<i;X++){o=t.cloneNode(!0),Array.prototype.slice.call(o.querySelectorAll(".cke")).forEach(function(e){e.parentNode.removeChild(e)}),r.insertBefore(o,p),XsltForms_repeat.initClone(this.subform,o,a),delete o.xfElement;for(var f=t.nextSibling,g=1;g<this.nbsiblings;g++,f=f.nextSibling)o=f.cloneNode(!0),r.insertBefore(o,p),XsltForms_repeat.initClone(this.subform,o,a)}for(var x=i;x<s;x++){var b=r.childNodes[h+(i+1)*this.nbsiblings];if(!b||b.id!==this.element.id&&b.attributes.oldid.value!==this.element.id)break;for(var F=0;F<this.nbsiblings;F++)XsltForms_globals.dispose(r.children[h+i*this.nbsiblings]),r.removeChild(r.children[h+i*this.nbsiblings])}for(var _=0;_<i;_++)XsltForms_browser.setMeta(l[_],"repeat",String(this.element.xfIndex)),r.children?r.children[h+_*this.nbsiblings].node=l[_]:r.childNodes[h+_*this.nbsiblings].node=l[_]}for(var y=0;y<i;y++)if(this.element.node===l[y])return void(this.index!==y+1&&(this.index=y+1,XsltForms_globals.addChange(this),XsltForms_globals.addChange(this.element.node.ownerDocument.model)));this.element.node=l[0],this.element.node?1!==this.index&&(this.index=1,XsltForms_globals.addChange(this),XsltForms_globals.addChange(this.element.node.ownerDocument.model)):(this.index=0,XsltForms_globals.ready&&XsltForms_globals.addChange(this))},XsltForms_repeat.prototype.refresh=function(e){var t=0===this.nodes.length;if(t?this.element.removeAttribute("xf-bound"):this.element.setAttribute("xf-bound",""),!t&&!this.isItemset&&0===this.nbsiblings)for(var r=this.root.children||this.root.childNodes,s=0,o=r.length;s<o;s++){var n=e&&this.index===s+1;r[s].selected=n,r[s].setAttribute("xf-selected",String(n))}},XsltForms_repeat.prototype.clone=function(e){return new XsltForms_repeat(this.subform,e,this.nbsiblings,this.binding,!0)},XsltForms_repeat.initClone=function(subform,element,inputids){"LABEL"===element.nodeName.toUpperCase()&&""!==element.getAttribute("for")&&(inputids.ids[element.getAttribute("for")]?element.setAttribute("for",inputids.ids[element.getAttribute("for")]):inputids.fors[element.getAttribute("for")]=element);var id=element.id;if(id){XsltForms_idManager.cloneId(element),"INPUT"===element.nodeName.toUpperCase()&&(inputids.fors[id]?(inputids.fors[id].setAttribute("for",element.id),delete inputids.ids[id]):inputids.ids[id]=element.id);var oldid=element.getAttribute("oldid"),original=document.getElementById(oldid);original||(original=XsltForms_globals.idalt[oldid])}var ename=element.nodeName.toLowerCase(),xfclass=XsltForms_classes[ename];(xfclass||element.nodeType===Fleur.Node.ELEMENT_NODE&&element.hasAttribute("xf-avt"))&&(element.xfElement=null),xfclass&&xfclass.classbinding(subform,element),element.nodeType===Fleur.Node.ELEMENT_NODE&&element.hasAttribute("xforms-name")&&XsltForms_classes["xforms-"+element.getAttribute("xforms-name")]&&(element.xfElement=eval("new "+XsltForms_classes["xforms-"+element.getAttribute("xforms-name")].className+"(subform, element)"),element.xfIndex=XsltForms_collection.length,XsltForms_collection.push(element)),element.nodeType===Fleur.Node.ELEMENT_NODE&&(element.hasAttribute("xf-repeat-ref")||element.hasAttribute("xf-repeat-bind"))&&(element.xfElement=new XsltForms_repeat(subform,element),element.xfIndex=XsltForms_collection.length,XsltForms_collection.push(element)),element.nodeType===Fleur.Node.ELEMENT_NODE&&element.hasAttribute("xf-avt")&&(element.xfIndex=XsltForms_collection.length,XsltForms_collection.push(element),Array.prototype.slice.call(element.attributes).filter(function(e){return e.nodeName.startsWith("xf-template-")}).forEach(function(e){new XsltForms_avt(subform,element,e.nodeName.substr(12))}));var parentXF=element.parentNode.xfElement;if(parentXF&&parentXF.isComponent&&parentXF.valueElement===element)parentXF.evaljs&&(eval(parentXF.subjs),parentXF.evaljs=!1);else for(var next=element.firstChild;next;){var child=next;next=next.nextSibling,child.id&&child.getAttribute("cloned")?element.removeChild(child):XsltForms_repeat.initClone(subform,child,inputids)}},XsltForms_repeat.forceOldId=function(e){var t=e.id;if(t){if("clonedId"===t.substr(0,8))return;e.setAttribute("oldid",t)}for(var r=e.firstChild;r;){var s=r;r=r.nextSibling,XsltForms_repeat.forceOldId(s)}},XsltForms_repeat.selectItem=function(e){var t=e.parentNode;if(t){var r=t.xfElement?t:t.parentNode;if(r.xfElement){var s=t.children;XsltForms_browser.assert(r.xfElement,e.nodeName+" - "+r.nodeName);for(var o=0,n=s.length;o<n;o++)if(s[o]===e){r.xfElement.setIndex(o+1);break}}else{for(var l=e,a=1;l&&!l.xfElement;)l=l.previousSibling,a++;l&&l.xfElement&&l.xfElement.nbsiblings>0&&l.xfElement.setIndex(a/l.xfElement.nbsiblings)}}},new XsltForms_class("XsltForms_select","HTMLElement","xforms-select","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),new XsltForms_class("XsltForms_select","HTMLElement","xforms-select1","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),XsltForms_select.prototype=new XsltForms_control,XsltForms_select.prototype.clone=function(e){return new XsltForms_select(this.subform,e,this.min,this.max,this.full,this.binding,this.open,this.incremental,!0)},XsltForms_select.prototype.dispose=function(){this.select=null,this.selectedOptions=null,XsltForms_globals.counters.select--,XsltForms_control.prototype.dispose.call(this)},XsltForms_select.prototype.focusFirst=function(){var e=XsltForms_browser.isXhtml?this.element.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","input")[0]:this.element.getElementsByTagName("input")[0];e.focus(),XsltForms_browser.isOpera&&e.focus()},XsltForms_select.initChild={"xforms-item":function(e){var t,r,s;return Array.prototype.slice.call(e.children).forEach(function(e){switch(e.localName.toLowerCase()){case"xforms-value":r=e.textContent.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),s=e.hasAttribute("xf-copy");break;case"xforms-label":t=e.innerHTML}}),'<option value="'+r+'"'+(s?" xf-copy":"")+' xf-index="'+e.xfIndex+'">'+t+"</option>"},"xforms-itemset":function(e){return Array.prototype.slice.call(e.children).map(function(e){var t=XsltForms_select.initChild[e.localName.toLowerCase()];return t?t(e):""},"").join("")},"xforms-choices":function(e){var t=Array.prototype.slice.call(e.children),r=t.filter(function(e){return"xforms-label"===e.localName.toLowerCase()});return"<optgroup"+(0!==r.length?' label="'+r[0].textContent+'"':"")+">"+t.map(function(e){var t=XsltForms_select.initChild[e.localName.toLowerCase()];return t?t(e):""},"").join("")+"</optgroup>"}},XsltForms_select.initChildFull={"xforms-item":function(e,t){var r,s,o;Array.prototype.slice.call(e.children).forEach(function(t){switch(t.localName.toLowerCase()){case"xforms-body":r=t;break;case"xforms-value":s=t.textContent.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),o=t.hasAttribute("xf-copy");break;case"xforms-label":e.xfElement.label=t}}),r.innerHTML='<input type="'+t.inputtype+'" value="'+s+'"'+(o?" xf-copy":"")+' name="'+t.inputname+'">',e.xfElement.input=r.children[0],XsltForms_browser.events.attach(r.children[0],"focus",XsltForms_control.focusHandler),XsltForms_browser.events.attach(r.children[0],"blur",XsltForms_control.blurHandler)},"xforms-itemset":function(e,t){Array.prototype.slice.call(e.children).map(function(e){var r=XsltForms_select.initChildFull[e.localName.toLowerCase()];r&&r(e,t)})},"xforms-choices":function(e,t){Array.prototype.slice.call(e.children).map(function(e){var r=XsltForms_select.initChildFull[e.localName.toLowerCase()];r&&r(e,t)})}},XsltForms_select.prototype.initBody=function(){var e=this.cell,t=this;if(this.full)Array.prototype.slice.call(e.children).forEach(function(e){var r=XsltForms_select.initChildFull[e.localName.toLowerCase()];return r?r(e,t):""});else{var r;"select"===e.lastChild.localName.toLowerCase()?r=e.lastChild:(r=document.createElement("select"),(!this.max||this.max>this.min+1)&&r.setAttribute("multiple",""),this.compact&&r.setAttribute("size","4"),e.appendChild(r));var s=r.value,o=(" "===r.value?'<option value=" " id=""> </option>':"")+Array.prototype.slice.call(e.children).map(function(e){var t=XsltForms_select.initChild[e.localName.toLowerCase()];return t?t(e):""}).join("");r.innerHTML=o,Array.prototype.slice.call(r.querySelectorAll("*")).forEach(function(e){if(e.hasAttribute("xf-index")){var t=XsltForms_collection[e.getAttribute("xf-index")].listeners;t&&t.forEach(function(t){t.clone(e)}),e.removeAttribute("xf-index")}}),r.value=s,this.open?(this.select=r,this.datalist=void 0):(this.select=r,this.datalist=this.select),this.initFocus(this.select),this.incremental?(XsltForms_browser.events.attach(this.select,"change",XsltForms_select.incrementalChange),XsltForms_browser.events.attach(this.select,"keyup",XsltForms_select.incrementalChangeKeyup)):XsltForms_browser.events.attach(this.select,"change",XsltForms_select.normalChange)}this.bodyOK=!0},XsltForms_select.prototype.setValue=function(e){var t,r;if(this.bodyOK||this.initBody(),this.select&&1===this.datalist.options.length&&this.datalist.options[0]&&" "===this.datalist.options[0].value&&(this.currentValue=null),this.full||e&&""!==e){!this.full&&0===this.min&&this.datalist.options[0]&&" "!==this.datalist.options[0].value&&((r=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","option"):document.createElement("option")).value=" ",r.text=" ",r.id="",this.datalist.children[0]?this.datalist.insertBefore(r,this.datalist.children[0]):this.datalist.appendChild(r)),this.full||!this.datalist.firstChild||" "!==this.datalist.firstChild.value||0===this.min&&1===this.max||this.datalist.remove(0);for(var s,o=e?e instanceof Array?e:1!==this.max?e.split(XsltForms_globals.valuesSeparator):[e]:[""],n=this.full?XsltForms_browser.isXhtml?this.element.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","input"):this.element.getElementsByTagName("input"):this.datalist.options,l=!0,a=XsltForms_schema.getType(this.element.node&&XsltForms_browser.getType(this.element.node)||"xsd_:string"),i=0,m=o.length;l&&i<m;i++){for(var u=o[i],c=!1,d=0,h=n.length;!c&&d<h;d++){if(t=n[d].value,a.format)try{t=a.format(t)}catch(e){}t===u&&(c=!0)}l=c}if(l||1!==this.max&&!e?this.outRange&&(this.outRange=!1,XsltForms_xmlevents.dispatch(this,"xforms-in-range")):1!==this.max&&!e||this.outRange||(this.outRange=!0,XsltForms_xmlevents.dispatch(this,"xforms-out-of-range")),o=1!==this.max?o:[o[0]],this.full)for(var p=0,X=n.length;p<X;p++)(s=n[p]).checked=""!==s.value&&XsltForms_browser.inArray(s.value,o);else{this.selectedOptions=[];for(var f=0,g=n.length;f<g;f++){if(t=(s=n[f]).value,a.format)try{t=a.format(t)}catch(e){}var x=XsltForms_browser.inArray(t,o);x&&this.selectedOptions.push(s);try{s.selected=x}catch(e){}}}}else this.selectedOptions=[],this.datalist.options[0]&&" "!==this.datalist.options[0].value&&((r=XsltForms_browser.isXhtml?document.createElementNS("http://www.w3.org/1999/xhtml","option"):document.createElement("option")).value=" ",r.text=" ",r.id="",this.datalist.children[0]?this.datalist.insertBefore(r,this.datalist.children[0]):this.datalist.appendChild(r),this.datalist.selectedIndex=0)},XsltForms_select.prototype.changeReadonly=function(){if(this.full)for(var e=XsltForms_browser.isXhtml?this.element.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","input"):this.element.getElementsByTagName("input"),t=0,r=e.length;t<r;t++)e[t].disabled=this.readonly;else!XsltForms_browser.dialog.knownSelect(this.select)&&this.select&&(this.select.disabled=this.readonly)},XsltForms_select.prototype.itemClick=function(e){var t,r=XsltForms_browser.isXhtml?this.element.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","input"):this.element.getElementsByTagName("input");XsltForms_globals.openAction("XsltForms_select.prototype.itemClick");var s="";if(1!==this.max)for(var o=0,n=r.length;o<n;o++)(t=r[o]).hasAttribute("xf-copy")&&""===s&&(s=[]),t.value===e&&XsltForms_xmlevents.dispatch(t.parentNode,t.checked?"xforms-select":"xforms-deselect"),t.checked&&(t.hasAttribute("xf-copy")?s.push(t.value):s=(""!==s?s+XsltForms_globals.valuesSeparator:"")+t.value);else{var l=this.value,a=XsltForms_schema.getType(XsltForms_browser.getType(this.element.node)||"xsd_:string");if(!l&&(l=XsltForms_browser.getValue(this.element.node),a.format))try{l=a.format(l)}catch(e){}var i=null;if(l===e&&0!==this.min)return void XsltForms_globals.closeAction("XsltForms_select.prototype.itemClick");for(var m=0,u=r.length;m<u;m++){var c=(t=r[m]).value;if(a.format)try{c=a.format(c)}catch(e){}t.checked=c===e,c===l?(t.checked&&0===this.min&&(t.checked=!1,s=t.hasAttribute("xf-copy")?[]:""),XsltForms_xmlevents.dispatch(t.parentNode,"xforms-deselect")):c===e&&(i=t,s=t.hasAttribute("xf-copy")?[e]:e)}i&&XsltForms_xmlevents.dispatch(i.parentNode,"xforms-select")}e=s,this.incremental?this.valueChanged(this.value=e||""):this.value=e||"",XsltForms_globals.closeAction("XsltForms_select.prototype.itemClick")},XsltForms_select.prototype.blur=function(e){this.value&&(XsltForms_globals.openAction("XsltForms_select.prototype.blur"),this.valueChanged(this.value),XsltForms_globals.closeAction("XsltForms_select.prototype.blur"),this.value=null)},XsltForms_select.normalChange=function(e){var t,r=XsltForms_control.getXFElement(this),s=[],o="",n=[],l=r.getSelected(),a=this.options;XsltForms_globals.openAction("XsltForms_select.normalChange");for(var i=0,m=l.length;i<m;i++)l[i].selected?s.push(l[i]):XsltForms_xmlevents.dispatch(l[i],"xforms-deselect");for(var u=0,c=a.length;u<c;u++)(t=a[u]).selected&&(t.hasAttribute("xf-copy")?n.push(t.value):" "!==t.value&&(o=o?o+XsltForms_globals.valuesSeparator+t.value:t.value));for(var d=0,h=a.length;d<h;d++)(t=a[d]).selected&&" "!==t.value&&(XsltForms_browser.inArray(t,s)||(s.push(t),XsltForms_xmlevents.dispatch(t,"xforms-select")));if(0===n.length){r.value=o;var p=XsltForms_schema.getType(XsltForms_browser.getType(r.element.node)||"xsd_:string");if(p.format)try{r.value=p.format(o)}catch(e){}}else r.value=n;r.selectedOptions=s,XsltForms_globals.closeAction("XsltForms_select.normalChange")},XsltForms_select.incrementalChange=function(e){var t=XsltForms_control.getXFElement(this);XsltForms_globals.openAction("XsltForms_select.incrementalChange"),XsltForms_select.normalChange.call(this,e),t.valueChanged(t.value),XsltForms_globals.closeAction("XsltForms_select.incrementalChange")},XsltForms_select.incrementalChangeKeyup=function(e){if(9!==e.keyCode&&17!==e.keyCode){var t=XsltForms_control.getXFElement(this);XsltForms_globals.openAction("XsltForms_select.incrementalChangeKeyup"),XsltForms_select.normalChange.call(this,e),t.valueChanged(t.value),XsltForms_globals.closeAction("XsltForms_select.incrementalChangeKeyup")}},XsltForms_select.prototype.getSelected=function(){var e=this.selectedOptions;if(!e||0===e.length){e=[];for(var t=this.select.options,r=0,s=t.length;r<s;r++)t[r].selected&&e.push(t[r])}return e},new XsltForms_class("XsltForms_trigger","HTMLElement","xforms-trigger","<xforms-label></xforms-label><xforms-body></xforms-body><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),new XsltForms_class("XsltForms_trigger","HTMLElement","xforms-submit","<xforms-label></xforms-label><xforms-body></xforms-body><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),XsltForms_trigger.prototype=new XsltForms_control,XsltForms_trigger.prototype.initBody=function(){var e,t,r=Array.prototype.slice.call(this.element.children);switch(this.appearance){case"full":case"compact":if(0===this.cell.children.length||"BUTTON"!==this.cell.children[0].nodeName.toUpperCase()){for(this.cell.innerHTML='<button type="button"></button>',this.input=this.cell.children[0],e=0,t=r.length;e<t;e++)if("xforms-label"===r[e].localName.toLowerCase()){this.input.appendChild(r[e]);break}}else this.input=this.cell.children[0];break;case"minimal":if(0===this.cell.children.length||"A"!==this.cell.children[0].nodeName.toUpperCase()){for(this.cell.innerHTML="<a></a>",this.input=this.cell.children[0],e=0,t=r.length;e<t;e++)if("xforms-label"===r[e].localName.toLowerCase()){this.input.appendChild(r[e]);break}}else this.input=this.cell.children[0]}this.initFocus(this.input)},XsltForms_trigger.prototype.setValue=function(){},XsltForms_trigger.prototype.changeReadonly=function(){this.input.disabled=this.readonly},XsltForms_trigger.prototype.clone=function(e){return new XsltForms_trigger(this.subform,e,this.binding,!0)},XsltForms_trigger.prototype.dispose=function(){XsltForms_globals.counters.trigger--,XsltForms_element.prototype.dispose.call(this)},XsltForms_trigger.prototype.click=function(e,t){XsltForms_globals.openAction("XsltForms_trigger.prototype.click"),XsltForms_xmlevents.dispatch(this,"DOMActivate",null,null,null,null,t),XsltForms_globals.closeAction("XsltForms_trigger.prototype.click")},XsltForms_trigger.prototype.blur=function(){},new XsltForms_class("XsltForms_upload","HTMLElement","xforms-upload","<xforms-focus></xforms-focus><xforms-label></xforms-label><xforms-body></xforms-body><xforms-required></xforms-required><xforms-alert></xforms-alert><xforms-help></xforms-help><xforms-hint></xforms-hint>"),XsltForms_upload.prototype=new XsltForms_control,XsltForms_upload.contents={},XsltForms_upload.prototype.resource=function(e){return this.resource=e,this},XsltForms_upload.prototype.header=function(e,t,r,s){return this.headers.push({nodeset:e,combine:t,name:r,values:s}),this},XsltForms_upload.prototype.clone=function(e){return new XsltForms_upload(this.subform,e,this.valoff,this.binding,this.incremental,this.filename,this.mediatype,this.bolAidButton,!0)},XsltForms_upload.prototype.dispose=function(){this.cell=null,XsltForms_globals.counters.upload--,XsltForms_control.prototype.dispose.call(this)},XsltForms_upload.prototype.initBody=function(){this.resource?0===this.cell.children.length||"BUTTON"!==this.cell.children[0].nodeName.toUpperCase()?(this.cell.innerHTML='<button type="button">Select&nbsp;files</button><button type="button">Upload</button>',this.input=this.cell.children[0]):this.input=this.cell.children[0]:0===this.cell.children.length||"INPUT"!==this.cell.children[0].nodeName.toUpperCase()?(this.cell.innerHTML='<input type="file">',this.input=this.cell.children[0],this.input.onclick=function(e){return e.target.parentElement.parentElement.xfElement.directclick()},this.input.onchange=function(e){e.target.parentElement.parentElement.xfElement.change()}):this.input=this.cell.children[0],this.initFocus(this.input)},XsltForms_upload.prototype.setValue=function(value){var node=this.element.node;if(this.type=node?XsltForms_schema.getType(XsltForms_browser.getType(node)||"xsd_:string"):XsltForms_schema.getType("xsd_:string"),this.value!==value&&(this.value=value||"","form"===this.input.parentElement.nodeName.toLowerCase()&&this.input.form.reset()),this.resource&&"undefined"!=typeof plupload&&!this.uploader){var upsettings={};if(eval("upsettings = "+(this.type.appinfo?this.type.appinfo.replace(/(\r\n|\n|\r)/gm," "):"{}")),upsettings.url="dummy",upsettings.init={PostInit:function(){var e=XsltForms_control.getXFElement(this.getOption("browse_button")[0]);e.uploadbtn&&(e.uploadbtn.disabled=!0,e.uploadbtn.onclick=function(){return XsltForms_control.getXFElement(this).uploader.start(),!1})},FileFiltered:function(e,t){var r=XsltForms_control.getXFElement(e.getOption("browse_button")[0]);-1===(" "+r.value+" ").indexOf(" "+t.name+" ")&&(""!==r.value?r.value=r.value+" "+t.name:r.value=t.name,r.incremental&&r.valueChanged(r.value)),r.uploadbtn&&(r.uploadbtn.disabled=!1)},BeforeUpload:function(e){var t,r=XsltForms_control.getXFElement(e.getOption("browse_button")[0]);if(t=r.resource.bind_evaluate?XsltForms_globals.stringValue(r.resource.bind_evaluate(r.subform,r.boundnodes[0])):r.resource,e.setOption("url",t),0!==r.headers.length){for(var s={},o=0,n=r.headers.length;o<n;o++)for(var l,a=[],i=0,m=(a=r.headers[o].nodeset?r.headers[o].nodeset.bind_evaluate(r.subform,r.boundnodes[0]):r.boundnodes).length;i<m;i++)if(""!==(l=r.headers[o].name.bind_evaluate?XsltForms_globals.stringValue(r.headers[o].name.bind_evaluate(r.subform,a[i])):r.headers[o].name)){var u,c,d="";for(u=0,c=r.headers[o].values.length;u<c;u++){var h=r.headers[o].values[u];d+=h.bind_evaluate?XsltForms_globals.stringValue(h.bind_evaluate(r.subform,a[i])):h,u<c-1&&(d+=",")}s[l]=d}e.setOption("headers",s)}},UploadComplete:function(e){var t=XsltForms_control.getXFElement(e.getOption("browse_button")[0]);t.uploadbtn&&(t.uploadbtn.disabled=!0),t.error?t.error=null:XsltForms_xmlevents.dispatch(t,"xforms-upload-done")},Error:function(e,t){var r={method:"POST","resource-uri":e.getOption("url"),"error-type":"resource-error","response-body":t.response,"response-status-code":t.code,"response-reason-phrase":t.message},s=XsltForms_control.getXFElement(e.getOption("browse_button")[0]);s.error=!0,XsltForms_xmlevents.dispatch(s,"xforms-upload-error",null,null,null,null,r)}},XsltForms_globals.jslibraries["http://www.plupload.com/jquery.ui.plupload"]){var $jQuery=jQuery.noConflict();$jQuery(this.element.children[this.valoff].firstChild).plupload(upsettings)}else this.uploadbtn=this.element.children[this.valoff].firstChild.children[1],upsettings.browse_button=this.element.children[this.valoff].firstChild.firstChild,this.uploader=new plupload.Uploader(upsettings),this.uploader.init()}},XsltForms_upload.prototype.blur=function(e){XsltForms_globals.focus=null,this.incremental||(XsltForms_browser.assert(this.input,this.element.id),this.valueChanged(this.value))},XsltForms_upload.prototype.directclick=function(){if(window.FileReader)return!0;if("http://www.w3.org/2001/XMLSchema"!==this.type.nsuri||"anyURI"!==this.type.name&&"string"!==this.type.name&&"base64Binary"!==this.type.name&&"hexBinary"!==this.type.name)throw alert("Unexpected type for upload control: "+this.type.nsuri+" "+this.type.name),new Error("Error");var e="unselected",t=XsltForms_browser.readFile("","ISO-8859-1",this.type.name,"XSLTForms Java Upload");if(document.applets.xsltforms?e=document.applets.xsltforms.lastChosenFileName:document.getElementById("xsltforms_applet")&&(e=document.getElementById("xsltforms_applet").xsltforms.lastChosenFileName),e=e.split("\\").pop(),"anyURI"===this.type.name?(this.value="file://"+e+"?id="+this.element.id,XsltForms_upload.contents[this.element.id]=t):this.value=t,this.input.value=e,this.incremental&&this.valueChanged(this.value),this.filename&&this.filename.bind_evaluate){var r=this.filename.bind_evaluate(this.element.node)[0];if(r){XsltForms_globals.openAction("XsltForms_upload.prototype.directclick"),XsltForms_browser.setValue(r,e||"");var s=document.getElementById(XsltForms_browser.getDocMeta(r.ownerDocument,"model")).xfElement;s.addChange(r),XsltForms_xmlevents.dispatch(s,"xforms-recalculate"),XsltForms_globals.refresh(),XsltForms_globals.closeAction("XsltForms_upload.prototype.directclick")}}return!1},XsltForms_upload.prototype.change=function(){if("http://www.w3.org/2001/XMLSchema"!==this.type.nsuri||"anyURI"!==this.type.name&&"string"!==this.type.name&&"base64Binary"!==this.type.name&&"hexBinary"!==this.type.name)throw alert("Unexpected type for upload control: "+this.type.nsuri+" "+this.type.name),new Error("Error");var e="unselected",t="",r=this;try{var s=new FileReader,o=r.input.files[0];o?(e=o.name,"string"===r.type.name?s.onload=function(e){for(var s=new Uint8Array(e.target.result),o=0,n=s.length;o<n;o++)t+=String.fromCharCode(s[o]);r.value=t,r.incremental&&r.valueChanged(t)}:"hexBinary"===r.type.name?s.onload=function(e){for(var s=new Uint8Array(e.target.result),o=0,n=s.length;o<n;o++){var l=s[o]>>4,a=15&s[o];t+=String.fromCharCode(l>9?l+55:l+48,a>9?a+55:a+48)}r.value=t,r.incremental&&r.valueChanged(t)}:"base64Binary"===r.type.name?s.onload=function(e){var s=new Uint8Array(e.target.result),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=s.length;s[n]=s[n+1]=0;for(var l=0;l<n;l+=3){var a=s[l]>>2,i=(3&s[l])<<4|s[l+1]>>4,m=(15&s[l+1])<<2|s[l+2]>>6,u=63&s[l+2];l===n-1?m=u=64:l===n-2&&(u=64),t+=o.charAt(a)+o.charAt(i)+o.charAt(m)+o.charAt(u)}r.value=t,r.incremental&&r.valueChanged(t)}:s.onload=function(t){XsltForms_upload.contents[r.element.id]=t.target.result,r.value="file://"+e+"?id="+(r.element.id||"xsltforms_"+String(r.element.xfIndex)),r.incremental&&r.valueChanged(r.value)},s.readAsArrayBuffer(o)):(r.value="",r.incremental&&r.valueChanged(""))}catch(s){t=XsltForms_browser.readFile(r.input.value,"ISO-8859-1",r.type.name,""),"anyURI"===r.type.name?(r.value="file://"+e+"?id="+r.element.id,XsltForms_upload.contents[r.element.id]=t):r.value=t,r.incremental&&r.valueChanged(r.value)}if(this.filename&&this.filename.bind_evaluate){var n=this.filename.bind_evaluate(this.element.node)[0];if(n){XsltForms_globals.openAction("XsltForms_upload.prototype.change"),XsltForms_browser.setValue(n,e||"");var l=document.getElementById(XsltForms_browser.getDocMeta(n.ownerDocument,"model")).xfElement;l.addChange(n),XsltForms_xmlevents.dispatch(l,"xforms-recalculate"),XsltForms_globals.refresh(),XsltForms_globals.closeAction("XsltForms_upload.prototype.change")}}},new XsltForms_class("XsltForms_label","HTMLElement","xforms-label"),XsltForms_label.prototype=new XsltForms_element,XsltForms_label.prototype.clone=function(e){return new XsltForms_label(this.subform,e,this.binding)},XsltForms_label.prototype.dispose=function(){XsltForms_globals.counters.label--,XsltForms_element.prototype.dispose.call(this)},XsltForms_label.prototype.build_=function(e){var t=this.evaluateBinding(this.binding,e);this.element.node=t.head(),this.depsNodesRefresh.push(this.element.node)},XsltForms_label.prototype.refresh=function(){var e=this.element.node,t=e?XsltForms_browser.getValue(e,!0):"";XsltForms_browser.setValue(this.element.getAttributeNode("label")?this.element.getAttributeNode("label"):this.element,t)},XsltForms_calendar.prototype.today=function(){this.refreshControls(new Date)},XsltForms_calendar.prototype.refreshControls=function(e){this.day=e.getDate(),this.selectMonth.value=e.getMonth(),this.inputYear.value=e.getYear()<1e3?1900+e.getYear():e.getYear(),this.isTimestamp&&(this.inputHour.value=XsltForms_browser.zeros(e.getHours(),2),this.inputMin.value=this.type>=XsltForms_calendar.MINUTES?XsltForms_browser.zeros(e.getMinutes(),2):"00",this.inputSec.value=this.type>=XsltForms_calendar.SECONDS?XsltForms_browser.zeros(e.getSeconds(),2):"00"),this.refresh()},XsltForms_calendar.prototype.refresh=function(){for(var e=this.getFirstDay(),t=this.getDaysOfMonth(),r=parseInt(XsltForms_browser.i18n.get("calendar.initDay"),10),s=0,o=1,n=this.selectMonth.value===this.currentMonth&&this.inputYear.value===this.currentYear,l=0;l<6;l++)for(var a=this.tBody.childNodes[l],i=0;i<7;i++,s++){var m=a.childNodes[i],u=s>=e&&s<e+t;XsltForms_browser.setClass(m,"xsltforms-listHover",!1),XsltForms_browser.setClass(m,"xsltforms-calendar-today",n&&o===this.currentDay),XsltForms_browser.setClass(m,"xsltforms-calendar-selected",u&&o===this.day),XsltForms_browser.setClass(m,"xsltforms-calendar-weekend",(i+r)%7>4),m.firstChild.nodeValue=u?o++:""}},XsltForms_calendar.prototype.getFirstDay=function(){var e=new Date;e.setDate(1),e.setMonth(this.selectMonth.value),e.setYear(this.inputYear.value);var t=parseInt(XsltForms_browser.i18n.get("calendar.initDay"),10);return(e.getDay()+(6-t))%7},XsltForms_calendar.prototype.getDaysOfMonth=function(){var e=parseInt(this.inputYear.value,10);return 1!==parseInt(this.selectMonth.value,10)||0!=e%4||0==e%100&&0!=e%400?XsltForms_calendar.daysOfMonth[this.selectMonth.value]:29},XsltForms_calendar.prototype.createElement=function(e,t,r,s,o){var n=XsltForms_browser.createElement("td",e,r,t);return s>1&&(n.colSpan=s),o&&(XsltForms_browser.events.attach(n,"click",o),XsltForms_browser.initHover(n)),n},XsltForms_calendar.daysOfMonth=[31,28,31,30,31,30,31,31,30,31,30,31],XsltForms_calendar.ONLY_DATE=0,XsltForms_calendar.HOURS=1,XsltForms_calendar.MINUTES=2,XsltForms_calendar.SECONDS=3,XsltForms_calendar.show=function(e,t){var r,s=XsltForms_calendar.INSTANCE;s||(s=new XsltForms_calendar,XsltForms_calendar.INSTANCE=s),t||(t=XsltForms_calendar.ONLY_DATE),s.input=e,s.type=t,s.isTimestamp=t!==XsltForms_calendar.ONLY_DATE,XsltForms_browser.setClass(s.element,"xsltforms-calendar-date",!s.isTimestamp);try{r=s.isTimestamp?XsltForms_browser.i18n.parse(e.value):XsltForms_browser.i18n.parseDate(e.value)}catch(e){r=new Date}r?s.refreshControls(r):s.today(),XsltForms_browser.dialog.show(s.element,e,!1)},XsltForms_calendar.close=function(){var e=XsltForms_calendar.INSTANCE;e.yearList.close(),XsltForms_browser.dialog.hide(e.element,!1)},XsltForms_type.prototype.setSchema=function(e){return this.schema=e,this},XsltForms_type.prototype.setName=function(e){return this.name=e,this.nsuri=this.schema.ns,this.schema.types[e]=this,this},XsltForms_type.prototype.canonicalValue=function(e){switch(e=e.toString(),this.whiteSpace){case"replace":e=e.replace(/[\t\r\n]/g," ");break;case"collapse":e=e.replace(/[\t\r\n ]+/g," ").replace(/^\s+|\s+$/g,"")}return e},XsltForms_type.prototype.getMaxLength=function(){return this.maxLength?this.maxLength:this.length?this.length:this.totalDigits?this.totalDigits+1:null},XsltForms_type.prototype.getDisplayLength=function(){return this.displayLength},XsltForms_schema.prototype.dispose=function(e){XsltForms_schema.all[this.ns]=null,this.types=null,this.prefixes=null},XsltForms_schema.all={},XsltForms_schema.prototype.getType=function(e){if(-1!==e.indexOf(":")){var t=e.split(":"),r=t[0],s=this.prefixes[r];return s?XsltForms_schema.getTypeNS(s,t[1]):XsltForms_schema.getType(e)}var o=this.types[e];if(!o)throw alert("Type "+e+" not defined"),new Error("Error");return o},XsltForms_schema.getType=function(e){var t=(e=e||"xsd:string").split(":");return void 0===t[1]?XsltForms_schema.getTypeNS(XsltForms_schema.prefixes.xforms,t[0]):XsltForms_schema.getTypeNS(Fleur.XPathNSResolver_default.uri[Fleur.XPathNSResolver_default.pf.lastIndexOf(t[0].toLowerCase())],t[1])},XsltForms_schema.getTypeNS=function(e,t){var r=XsltForms_schema.all[e];if(!r)throw alert("Schema for namespace "+e+" not defined for type "+t),new Error("Error");var s=r.types[t];return s||(XsltForms_globals.debugMode&&alert("Type "+t+" not defined in namespace "+e),s=XsltForms_schema.getTypeNS("http://www.w3.org/2001/XMLSchema","string")),s},XsltForms_schema.get=function(e,t){var r=XsltForms_schema.all[t];return r||(r=new XsltForms_schema(e,t)),r},XsltForms_schema.prefixes={xsd_:"http://www.w3.org/2001/XMLSchema",xsd:"http://www.w3.org/2001/XMLSchema",xs:"http://www.w3.org/2001/XMLSchema",xf:"http://www.w3.org/2002/xforms",xform:"http://www.w3.org/2002/xforms",xforms:"http://www.w3.org/2002/xforms",xsltforms:"http://www.agencexml.com/xsltforms",rte:"http://www.agencexml.com/xsltforms/rte",dcterms:"http://purl.org/dc/terms/"},XsltForms_schema.registerPrefix=function(e,t){this.prefixes[e]=t},XsltForms_atomicType.prototype=new XsltForms_type,XsltForms_atomicType.prototype.setBase=function(e){var t="string"==typeof e?this.schema.getType(e):e;for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];"patterns"===r?XsltForms_browser.copyArray(s,this.patterns):"name"!==r&&"nsuri"!==r&&"base"!==r&&(this[r]=s)}return this.basensuri=t.nsuri,this.basename=t.name,this},XsltForms_atomicType.prototype.hasBase=function(e){for(var t=XsltForms_schema.getType(e),r=this;r!==t;){if(!r.basename)return!1;if(!(r=XsltForms_schema.getTypeNS(r.basensuri,r.basename)))return!1}return!0},XsltForms_atomicType.prototype.put=function(e,t){return"base"===e?this.setBase(t):"pattern"===e?XsltForms_browser.copyArray([t],this.patterns):"enumeration"===e?(this.enumeration||(this.enumeration=[]),this.enumeration.push(t)):("length"===e||"minLength"===e||"maxLength"===e||"fractionDigits"===e||"totalDigits"===e?t=parseInt(t,10):"minInclusive"!==e&&"maxInclusive"!==e||(t=parseFloat(t)),this[e]=t),this},XsltForms_atomicType.prototype.validate=function(e){e=this.canonicalValue(e);for(var t=0,r=this.patterns.length;t<r;t++)if(!e.match(this.patterns[t]))return!1;if(this.enumeration){for(var s=!1,o=0,n=this.enumeration.length;o<n;o++)if(e===this.canonicalValue(this.enumeration[o])){s=!0;break}if(!s)return!1}var l=e.length,a=parseInt(e,10);if("number"==typeof this.length&&this.length!==l||"number"==typeof this.minLength&&l<this.minLength||"number"==typeof this.maxLength&&l>this.maxLength||"number"==typeof this.maxInclusive&&a>this.maxInclusive||"number"==typeof this.maxExclusive&&a>=this.maxExclusive||"number"==typeof this.minInclusive&&a<this.minInclusive||"number"==typeof this.minExclusive&&a<=this.minExclusive)return!1;if("number"==typeof this.totalDigits||"number"==typeof this.fractionDigits){var i=e.indexOf("."),m=""+Math.abs(parseInt(-1!==i?e.substring(0,i):e,10)),u=-1!==i?e.substring(i+1):"";if(-1!==i){if(0===this.fractionDigits)return!1;for(var c=u.length-1;c>=0&&0===u.charAt(c);)c--;u=u.substring(0,c+1)}if("number"==typeof this.totalDigits&&m.length+u.length>this.totalDigits||"number"==typeof this.fractionDigits&&u.length>this.fractionDigits)return!1}return!0},XsltForms_atomicType.prototype.normalize=function(e){if("number"==typeof this.fractionDigits){var t,r=parseFloat(e);if(isNaN(r))return"NaN";if(0===r)t=XsltForms_browser.zeros(0,this.fractionDigits+1,!0);else{var s=XsltForms_browser.zeros(1,this.fractionDigits+1,!0);t=""+Math.round(r*s)}if(0!==this.fractionDigits){var o=t.length-this.fractionDigits;return(0===o?"0":t.substring(0,o))+"."+t.substring(o)}return t}return e},XsltForms_listType.prototype=new XsltForms_type,XsltForms_listType.prototype.setItemType=function(e){return this.itemType="string"==typeof e?this.schema.getType(e):e,this},XsltForms_listType.prototype.validate=function(e){for(var t=0,r=this.itemType.canonicalValue.call(this,e).split(" "),s=0,o=r.length;s<o;s++){if(""!==r[s])if(t++,!this.itemType.validate(r[s]))return!1}return!(this.minLength&&t<this.minLength||this.maxLength&&t>this.maxLength)},XsltForms_listType.prototype.canonicalValue=function(e){for(var t=this.itemType.canonicalValue(e).split(" "),r="",s=0,o=t.length;s<o;s++){var n=this.itemType.canonicalValue(t[s]);r+=(0===r.length?"":" ")+n}return r},XsltForms_unionType.prototype=new XsltForms_type,XsltForms_unionType.prototype.addType=function(e){return this.baseTypes.push("string"==typeof e?this.schema.getType(e):e),this},XsltForms_unionType.prototype.addTypes=function(){for(var e=0,t=this.memberTypes.length;e<t;e++)this.baseTypes.push(this.schema.getType(this.memberTypes[e]));return this},XsltForms_unionType.prototype.validate=function(e){for(var t=0,r=this.baseTypes.length;t<r;++t)if(this.baseTypes[t].validate(e))return!0;return!1};var XsltForms_typeDefs={initAll:function(){this.init("http://www.w3.org/2001/XMLSchema",this.Default),this.init("http://www.w3.org/2002/xforms",this.XForms),this.init("http://www.agencexml.com/xsltforms",this.XSLTForms),this.init("http://purl.org/dc/terms/",this.DublinCore)},init:function(e,t){var r=XsltForms_schema.get(null,e);for(var s in t)if(t.hasOwnProperty(s)){var o=new XsltForms_atomicType;o.setSchema(r),o.setName(s);var n=t[s],l=n.base;for(var a in l&&o.setBase(l),n)"base"!==a&&(o[a]=n[a])}},ctes:{i:"A-Za-z_\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF",c:"A-Za-z_\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\-\\.0-9\\xB7"}};XsltForms_typeDefs.Default={string:{nsuri:"http://www.w3.org/2001/XMLSchema",whiteSpace:"preserve"},boolean:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^(true|false|0|1)$"],class:"boolean"},decimal:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^[\\-+]?([0-9]+(\\.[0-9]*)?|\\.[0-9]+)$"],class:"number",format:function(e){return XsltForms_browser.i18n.formatNumber(e,this.fractionDigits)},parse:function(e){return XsltForms_browser.i18n.parseNumber(e)}},float:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^(([\\-+]?([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))([eE][\\-+]?[0-9]+)?|-?INF|NaN)$"],class:"number"},double:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^(([\\-+]?([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))([eE][-+]?[0-9]+)?|-?INF|NaN)$"],class:"number"},dateTime:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?$"],class:"datetime",displayLength:20,format:function(e){return new RegExp("^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?$").test(e)?XsltForms_browser.i18n.formatDateTime(XsltForms_browser.i18n.parse(e,"yyyy-MM-ddThh:mm:ss"),null,!0):e},parse:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e),"yyyy-MM-ddThh:mm:ss",!0)}},date:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?$"],class:"date",displayLength:10,format:function(e){return new RegExp("^([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?$").test(e)?XsltForms_browser.i18n.formatDate(XsltForms_browser.i18n.parse(e,"yyyy-MM-dd"),null,!0):e},parse:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parseDate(e),"yyyy-MM-dd",!0)}},time:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?$"],class:"time",displayLength:8,format:function(e){return new RegExp("^([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$").test(e)?XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e,"hh:mm:ss",!0),null,!0,!0):e},parse:function(e){return new RegExp(XsltForms_globals.AMPM?"^(?:0?[1-9](?![0-9])|1[0-2]):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)? ?("+XsltForms_browser.i18n.get("format.time.AM")+"|"+XsltForms_browser.i18n.get("format.time.PM")+")$":"^(?:0?[0-9](?![0-9])|1[0-9]|20|21|22|23):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$","i").test(e)?XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e,null,!0),"hh:mm:ss",!0,!0):e}},duration:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^-?P(?!$)([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T(?!$)([0-9]+H)?([0-9]+M)?([0-9]+(\\.[0-9]+)?S)?)?$"]},gDay:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^---(0[1-9]|[12][0-9]|3[01])$"]},gMonth:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^--(0[1-9]|1[012])$"]},gMonthDay:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^--(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$"]},gYear:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^([\\-+]?([0-9]{4}|[1-9][0-9]{4,}))?$"]},gYearMonth:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^([12][0-9]{3})-(0[1-9]|1[012])$"]},integer:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:decimal",fractionDigits:0},nonPositiveInteger:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",patterns:["^(-[0-9]+|0)$"]},nonNegativeInteger:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",patterns:["^\\+?[0-9]+$"]},negativeInteger:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",patterns:["^-0*[1-9][0-9]*$"]},positiveInteger:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",patterns:["^\\+?0*[1-9][0-9]*$"]},byte:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",minInclusive:-128,maxInclusive:127},short:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",minInclusive:-32768,maxInclusive:32767},int:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",minInclusive:-2147483648,maxInclusive:2147483647},long:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:integer",minInclusive:-0x8000000000000000,maxInclusive:0x8000000000000000},unsignedByte:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:nonNegativeInteger",maxInclusive:255},unsignedShort:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:nonNegativeInteger",maxInclusive:65535},unsignedInt:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:nonNegativeInteger",maxInclusive:4294967295},unsignedLong:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:nonNegativeInteger",maxInclusive:0x10000000000000000},normalizedString:{nsuri:"http://www.w3.org/2001/XMLSchema",whiteSpace:"replace"},token:{nsuri:"http://www.w3.org/2001/XMLSchema",whiteSpace:"collapse"},language:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:token",patterns:["^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$"]},anyURI:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:token",patterns:["^(([^ :\\/?#]+):\\/\\/)?[^ \\/\\?#]+([^ \\?#]*)(\\?([^ #]*))?(#([^ \\:#\\[\\]\\@\\!\\$\\&\\\\'\\(\\)\\*\\+\\,\\;\\=]*))?$"]},Name:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:token",patterns:["^["+XsltForms_typeDefs.ctes.i+":]["+XsltForms_typeDefs.ctes.c+":]*$"]},NCName:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:token",patterns:["^["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*$"]},QName:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:token",patterns:["^(([a-zA-Z][0-9a-zA-Z+\\-\\.]*:)?/{0,2}[0-9a-zA-Z;/?:@&=+$\\.\\>> -_!~*'()%]+)?(>> #[0-9a-zA-Z;/?:@&=+$\\.\\-_!~*'()%]+)?:["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*$"]},ID:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:NCName"},IDREF:{nsuri:"http://www.w3.org/2001/XMLSchema",base:"xsd_:NCName"},IDREFS:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*( +["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*)*$"]},NMTOKEN:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^["+XsltForms_typeDefs.ctes.c+"]+$"]},NMTOKENS:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^["+XsltForms_typeDefs.ctes.c+"]+( ["+XsltForms_typeDefs.ctes.c+"]+)*$"]},base64Binary:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^[a-zA-Z0-9+/=]+$"]},hexBinary:{nsuri:"http://www.w3.org/2001/XMLSchema",patterns:["^[0-9A-Fa-f]+$"],format:function(e){return e.toUpperCase()},parse:function(e){return e.toUpperCase()}},select1:{nsuri:"http://www.w3.org/2001/XMLSchema",whiteSpace:"preserve"}},XsltForms_typeDefs.XForms={string:{nsuri:"http://www.w3.org/2002/xforms",whiteSpace:"preserve"},boolean:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(true|false|0|1)?$"],class:"boolean"},decimal:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^([\\-+]?([0-9]+(\\.[0-9]*)?|\\.[0-9]+))?$"],class:"number",format:function(e){return XsltForms_browser.i18n.formatNumber(e,this.fractionDigits)},parse:function(e){return XsltForms_browser.i18n.parseNumber(e)}},float:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^((([\\-+]?([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))([eE][\\-+]?[0-9]+)?|-?INF|NaN))?$"],class:"number"},double:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^((([\\-+]?([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))([eE][-+]?[0-9]+)?|-?INF|NaN))?$"],class:"number"},dateTime:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$"],class:"datetime",displayLength:20,format:function(e){return new RegExp("^(([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$").test(e)?XsltForms_browser.i18n.formatDateTime(XsltForms_browser.i18n.parse(e,"yyyy-MM-ddThh:mm:ss"),null,!0):e},parse:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e),"yyyy-MM-ddThh:mm:ss",!0)}},date:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$"],class:"date",displayLength:10,format:function(e){return new RegExp("^(([12][0-9]{3})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$").test(e)?XsltForms_browser.i18n.formatDate(XsltForms_browser.i18n.parse(e,"yyyy-MM-dd"),null,!0):e},parse:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parseDate(e),"yyyy-MM-dd",!0)}},time:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?$"],class:"time",displayLength:8,format:function(e){return new RegExp("^(([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?)?$").test(e)?XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e,"hh:mm:ss",!0),null,!0,!0):e},parse:function(e){return new RegExp(XsltForms_globals.AMPM?"^((?:0?[1-9](?![0-9])|1[0-2]):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)? ?("+XsltForms_browser.i18n.get("format.time.AM")+"|"+XsltForms_browser.i18n.get("format.time.PM")+"))?$":"^((?:0?[0-9](?![0-9])|1[0-9]|20|21|22|23):[0-5][0-9](:[0-5][0-9](\\.[0-9]+)?(Z|[+\\-]([01][0-9]|2[0-3]):[0-5][0-9])?)?)?$","i").test(e)?XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e,null,!0),"hh:mm:ss",!0,!0):e}},duration:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(-?P(?!$)([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T(?!$)([0-9]+H)?([0-9]+M)?([0-9]+(\\.[0-9]+)?S)?)?)?$"]},dayTimeDuration:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(-?P([0-9]+D(T([0-9]+(H([0-9]+(M([0-9]+(\\.[0-9]*)?S|\\.[0-9]+S)?|(\\.[0-9]*)?S)|(\\.[0-9]*)?S)?|M([0-9]+(\\.[0-9]*)?S|\\.[0-9]+S)?|(\\.[0-9]*)?S)|\\.[0-9]+S))?|T([0-9]+(H([0-9]+(M([0-9]+(\\.[0-9]*)?S|\\.[0-9]+S)?|(\\.[0-9]*)?S)|(\\.[0-9]*)?S)?|M([0-9]+(\\.[0-9]*)?S|\\.[0-9]+S)?|(\\.[0-9]*)?S)|\\.[0-9]+S)))?$"]},yearMonthDuration:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(-?P[0-9]+(Y([0-9]+M)?|M))?$"]},gDay:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(---(0[1-9]|[12][0-9]|3[01]))?$"]},gMonth:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(--(0[1-9]|1[012]))?$"]},gMonthDay:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(--(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))?$"]},gYear:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^([\\-+]?([0-9]{4}|[1-9][0-9]{4,}))?$"]},gYearMonth:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(([12][0-9]{3})-(0[1-9]|1[012]))?$"]},integer:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:decimal",fractionDigits:0},nonPositiveInteger:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",patterns:["^((-[0-9]+|0))?$"]},nonNegativeInteger:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",patterns:["^(\\+?[0-9]+)?$"]},negativeInteger:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",patterns:["^(-[0-9]+)?$"]},positiveInteger:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",patterns:["^(\\+?0*[1-9][0-9]*)?$"]},byte:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",minInclusive:-128,maxInclusive:127},short:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",minInclusive:-32768,maxInclusive:32767},int:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",minInclusive:-2147483648,maxInclusive:2147483647},long:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:integer",minInclusive:-0x8000000000000000,maxInclusive:0x8000000000000000},unsignedByte:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:nonNegativeInteger",maxInclusive:255},unsignedShort:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:nonNegativeInteger",maxInclusive:65535},unsignedInt:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:nonNegativeInteger",maxInclusive:4294967295},unsignedLong:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:nonNegativeInteger",maxInclusive:0x10000000000000000},normalizedString:{nsuri:"http://www.w3.org/2002/xforms",whiteSpace:"replace"},token:{nsuri:"http://www.w3.org/2002/xforms",whiteSpace:"collapse"},language:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:token",patterns:["^([a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*)?$"]},anyURI:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:token",patterns:["^((([a-zA-Z][0-9a-zA-Z+\\-\\.]*:)?/{0,2}[0-9a-zA-Z;/?:@&=+$\\.\\>> -_!~*'()%]+)?(>> #[0-9a-zA-Z;/?:@&=+$\\.\\-_!~*'()%]+)?)?$"]},Name:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:token",patterns:["^(["+XsltForms_typeDefs.ctes.i+":]["+XsltForms_typeDefs.ctes.c+":]*)?$"]},NCName:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:token",patterns:["^(["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*)?$"]},QName:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:token",patterns:["^((([a-zA-Z][0-9a-zA-Z+\\-\\.]*:)?/{0,2}[0-9a-zA-Z;/?:@&=+$\\.\\>> -_!~*'()%]+)?(>> #[0-9a-zA-Z;/?:@&=+$\\.\\-_!~*'()%]+)?:["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*)?$"]},ID:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:NCName"},IDREF:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:NCName"},IDREFS:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]+( +["+XsltForms_typeDefs.ctes.i+"]["+XsltForms_typeDefs.ctes.c+"]*)*)?$"]},NMTOKEN:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^["+XsltForms_typeDefs.ctes.c+"]*$"]},NMTOKENS:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^(["+XsltForms_typeDefs.ctes.c+"]+( ["+XsltForms_typeDefs.ctes.c+"]+)*)?$"]},base64Binary:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^[a-zA-Z0-9+/]*$"]},hexBinary:{nsuri:"http://www.w3.org/2002/xforms",patterns:["^[0-9A-Fa-f]*$"],format:function(e){return e.toUpperCase()},parse:function(e){return e.toUpperCase()}},email:{nsuri:"http://www.w3.org/2002/xforms",base:"xsd_:string",whiteSpace:"collapse",patterns:["^([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)?$"]},"card-number":{nsuri:"http://www.w3.org/2002/xforms",base:"xsd_:string",patterns:["^[0-9]*$"]},url:{nsuri:"http://www.w3.org/2002/xforms",base:"xsd_:string",whiteSpace:"collapse",patterns:["^(ht|f)tp(s?)://([a-z0-9]*:[a-z0-9]*@)?([a-z0-9.]*\\.[a-z]{2,7})$"]},amount:{nsuri:"http://www.w3.org/2002/xforms",base:"xforms:decimal",format:function(e){return XsltForms_browser.i18n.formatNumber(e,2)}},HTMLFragment:{nsuri:"http://www.w3.org/2002/xforms",base:"xsd_:string"},trimmed:{nsuri:"http://www.w3.org/2002/xforms",base:"xsd_:string",format:function(e){return e.replace(/^\s+|\s+$/gm,"")},parse:function(e){return e.replace(/^\s+|\s+$/gm,"")}}},XsltForms_typeDefs.XSLTForms={shortDate:{nsuri:"http://www.agencexml.com/xsltforms",patterns:["^(([12][0-9]{3})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01]))?$"],class:"date",displayLength:10,format:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e,"yyyyMMdd"),null,!0)},parse:function(e){return XsltForms_browser.i18n.format(XsltForms_browser.i18n.parse(e),"yyyyMMdd",!0)}},decimal:{nsuri:"http://www.agencexml.com/xsltforms",patterns:["^[\\-+]?\\(*[\\-+]?([0-9]+(\\.[0-9]*)?|\\.[0-9]+)(([+-/]|\\*)\\(*([0-9]+(\\.[0-9]*)?|\\.[0-9]+)\\)*)*$"],class:"number",eval:"xsd:decimal"},float:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:float"},double:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:double"},integer:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:integer"},nonPositiveInteger:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:nonPositiveInteger"},nonNegativeInteger:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:nonNegativeInteger"},negativeInteger:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:negativeInteger"},positiveInteger:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:positiveInteger"},byte:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:byte"},short:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:short"},int:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:int"},long:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:long"},unsignedByte:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:unsignedByte"},unsignedShort:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:unsignedShort"},unsignedInt:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:unsignedInt"},unsignedLong:{nsuri:"http://www.agencexml.com/xsltforms",base:"xsltforms:decimal",eval:"xsd:unsignedLong"}},XsltForms_typeDefs.DublinCore={W3CDTF:{nsuri:"http://purl.org/dc/terms/",base:"xsd_:dateTime"}},XsltForms_typeDefs.initAll(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var s=r.indexOf(e,t);return-1!==s&&s===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var s=arguments[1],o=0;o<r;){var n=t[o];if(e.call(s,n,o,t))return n;o++}},configurable:!0,writable:!0}),Array.prototype.head||Object.defineProperty(Array.prototype,"head",{value(){return this.find(Boolean)}}),Array.prototype.isSingle||Object.defineProperty(Array.prototype,"isSingle",{value:()=>!1}),Array.prototype.childNodes||Object.defineProperty(Array.prototype,"childNodes",{get:function(){return this}}),Array.prototype.toArray||Object.defineProperty(Array.prototype,"toArray",{value(){return this}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,s=new Array(r);r--;)s[r]=[t[r],e[t[r]]];return s}),"undefined"==typeof xsltforms_d0&&function(){var e,t,r=document.getElementsByTagName("script"),s=[];for(e=0,t=r.length;e<t;e++)s[e]=r[e];r=null;var o,n=null;for(e=0,t=s.length;e<t;e++)-1!==s[e].src.indexOf("xsltforms.js")&&(n=s[e].src.replace("xsltforms.js",""));(XsltForms_globals.standalone=null===n,XsltForms_globals.standalone)||("/js/"===n.substring(n.length-4)&&(n=n.substring(0,n.length-4)+"/css/"),Array.prototype.slice.call(document.querySelectorAll("link[href][type = 'text/css'][rel = 'stylesheet']")).reduce(function(e,t){return e||t.getAttribute("href").endsWith("xsltforms.css")},!1)||((o=document.createElement("link")).setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",n+"xsltforms.css"),document.getElementsByTagName("head")[0].appendChild(o)));var l=function(){try{if(function(){if(XsltForms_globals.standalone){let e="";for(let t=0,r=document.childNodes.length;t<r;t++){const r=document.childNodes[t];switch(r.nodeType){case Fleur.Node.ELEMENT_NODE:e+=r.outerHTML;break;case Fleur.Node.DOCUMENT_TYPE_NODE:e+="<!DOCTYPE "+r.name+">\n";break;case Fleur.Node.TEXT_NODE:e+=r.textContent;break;case Fleur.Node.COMMENT_NODE:e+="\x3c!--"+r.data+"--\x3e"}}XsltForms_globals.formSource=e}var e=document.createElement("div");if(e.setAttribute("id","xsltforms-console"),document.getElementsByTagName("body")[0].appendChild(e),(e=document.createElement("div")).setAttribute("id","xsltforms-status-panel"),e.setAttribute("style","display: none; z-index: 99; top: 294.5px; left: 490px;"),e.innerHTML="... Loading ...",document.getElementsByTagName("body")[0].appendChild(e),XsltForms_browser.dialog.show("xsltforms-status-panel"),!(8===document.documentElement.childNodes[0].nodeType||XsltForms_browser.isIE&&document.documentElement.childNodes[0].childNodes[1]&&8===document.documentElement.childNodes[0].childNodes[1].nodeType)){var t=document.createComment("HTML elements and Javascript instructions generated by XSLTForms 1.6 (663) - Copyright (C) 2022 <agenceXML> - Alain Couthures - http://www.agencexml.com");document.documentElement.insertBefore(t,document.documentElement.firstChild)}var r,s,l,a=document.getElementsByTagName("script"),i=[];for(r=0,s=a.length;r<s;r++)i[r]=a[r];for(a=null,r=0,s=i.length;r<s;r++)if("text/xforms"===i[r].type){var m=new Date;l=XsltForms_browser.transformText('<html xmlns="http://www.w3.org/1999/xhtml"><body>'+i[r].text+"</body></html>",n+"xsltforms.xsl",!1);var u=new Date;XsltForms_globals.transformtime=u-m;var c=XsltForms_globals.stringSplit(l,"XsltForms_MagicSeparator"),d="xsltforms_d0 = new Date();  }";if((o=document.createElement("script")).setAttribute("id","xsltforms-generated-script"),o.setAttribute("type","text/javascript"),XsltForms_browser.isIE)o.text=d;else{var h=document.createTextNode(d);o.appendChild(h)}document.getElementsByTagName("body")[0].appendChild(o);var p="\x3c!-- xsltforms-mainform "+c[4]+" xsltforms-mainform --\x3e";i[r].outerHTML=p}}(),"undefined"!=typeof xsltforms_initImpl)xsltforms_initImpl();else{var e=document.createElement("xforms-model");e.setAttribute("id","xsltforms_model_config"),XsltForms_browser.configElt=document.createElement("xforms-instance"),XsltForms_browser.configElt.setAttribute("id","xsltforms_instance_config");var t=document.createElement("script");t.setAttribute("type","application/xml"),t.textContent='<properties xmlns=""><html>4</html><language>navigator</language><calendar.label>...</calendar.label><calendar.day0>Mon</calendar.day0><calendar.day1>Tue</calendar.day1><calendar.day2>Wed</calendar.day2><calendar.day3>Thu</calendar.day3><calendar.day4>Fri</calendar.day4><calendar.day5>Sat</calendar.day5><calendar.day6>Sun</calendar.day6><calendar.initDay>6</calendar.initDay><calendar.month0>January</calendar.month0><calendar.month1>February</calendar.month1><calendar.month2>March</calendar.month2><calendar.month3>April</calendar.month3><calendar.month4>May</calendar.month4><calendar.month5>June</calendar.month5><calendar.month6>July</calendar.month6><calendar.month7>August</calendar.month7><calendar.month8>September</calendar.month8><calendar.month9>October</calendar.month9><calendar.month10>November</calendar.month10><calendar.month11>December</calendar.month11><calendar.close>Close</calendar.close><format.date>MM/dd/yyyy</format.date><format.datetime>MM/dd/yyyy hh:mm:ss</format.datetime><format.decimal>.</format.decimal><format-number.decimal-separator-sign>.</format-number.decimal-separator-sign><format-number.exponent-separator-sign>e</format-number.exponent-separator-sign><format-number.grouping-separator-sign>,</format-number.grouping-separator-sign><format-number.infinity>Infinity</format-number.infinity><format-number.minus-sign>-</format-number.minus-sign><format-number.NaN>NaN</format-number.NaN><format-number.percent-sign>%</format-number.percent-sign><format-number.per-mille-sign>&#8240;</format-number.per-mille-sign><status>... Loading ...</status></properties>',XsltForms_browser.configElt.appendChild(t),e.appendChild(XsltForms_browser.configElt),document.getElementsByTagName("body")[0].appendChild(e),XsltForms_class.activateAll(XsltForms_subform.subforms["xsltforms-mainform"],document,function(){XsltForms_browser.i18n.asyncinit(XsltForms_globals.init)})}}catch(e){alert("XSLTForms Exception\n--------------------------\n\nIncorrect Javascript code generation:\n\n"+(void 0===e.stack?"":e.stack)+"\n\n"+(e.name?e.name+(e.message?"\n\n"+e.message:""):e))}};"complete"===document.readyState?l():XsltForms_browser.addLoadListener(l)}();